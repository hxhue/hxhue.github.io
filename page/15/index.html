<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.143.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="Bluegill"><meta itemprop=description content="个人博客，主要是零散的笔记。"><meta itemprop=image content="https://hxhue.github.io/imgs/371907.jpg"><meta itemprop=keywords content><meta name=google-site-verification content="hwfud_ndcnJHe2Jz7ClToP1nuUA3k7FqZv-0VpFAHjg"><link type=text/css rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css><link rel=stylesheet href=/css/main.min.bea76f574a755574e17d42bea39502a74ca3ca4db65807b8c82d3e26dcec8420.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><link rel=stylesheet type=text/css href=/css/style.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/github-markdown-css@5.3.0/github-markdown-dark.css><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js></script><script>MathJax={tex:{displayMath:[["$$","$$"],["\\[","\\]"]],inlineMath:[["$","$"],["\\(","\\)"]]},svg:{fontCache:"global"}}</script><script type=module>
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: false });
  mermaid.mermaidAPI.initialize();
  window.mermaid = mermaid;
</script><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":false,"isHome":true,"isPage":false,"path":"hxhue.github.io","permalink":"https://hxhue.github.io/","title":"Bluegill","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>Bluegill</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>Bluegill</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description></p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class="hvr-icon-pulse menu-item-active" rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about/ class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档</a></li><li class="menu-item menu-item-categories"><a href=/categories/ class=hvr-icon-pulse rel=section><i class="fa fa-th hvr-icon"></i>分类</a></li><li class="menu-item menu-item-tags"><a href=/tags/ class=hvr-icon-pulse rel=section><i class="fa fa-hashtag hvr-icon"></i>标签</a></li><li class="menu-item menu-item-daily"><a href=/daily/ class=hvr-icon-pulse rel=section><i class="fa fa-newspaper hvr-icon"></i>随笔</a></li><li class="menu-item menu-item-discovery"><a href=https://rift-fear-f2c.notion.site/2025-1e354a33cfb1802c841bdf29f2f3dab3 class=hvr-icon-pulse rel=section><i class="fa fa-compass hvr-icon"></i>发现</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-overview-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=🤖 src=/imgs/371907.jpg><p class=site-author-name itemprop=name>🤖</p><div class=site-description itemprop=description>个人博客，主要是零散的笔记。</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>433</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>12</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>86</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/hxhue title="Github → https://github.com/hxhue" rel=noopener target=_blank><i class="fab fa-github fa-fw"></i>
Github
</a></span><span class=links-of-social-item><a href=/rss.xml title="RSS 订阅 → /rss.xml" rel=noopener target=_blank><i class="fa fa-rss fa-fw"></i>
RSS 订阅</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://shuai.guru/ title=https://shuai.guru/ target=_blank>shuai.guru</a></li></ul></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner index posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/the-linux-programming-interface/28-%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="🤖"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="🤖"><meta itemprop=description content="个人博客，主要是零散的笔记。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="28 进程的创建和执行过程"><meta itemprop=description content="记账

记账功能打开后，系统会在每个进程结束后记录一条账单信息。标准工具 sa(8) 对账单文件进行汇总，lastcomm(1) 则就先前执行的命令列出相关信息。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/the-linux-programming-interface/28-%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/ itemprop=url class=post-title-link>28 进程的创建和执行过程</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-07-07 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-07-07 00:00:00 +0800 CST">2024-07-07
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title=修改时间：2024-09-13T00:00:00+08:00 itemprop=dateModified datetime=2024-09-13T00:00:00+08:00>2024-09-13</time>
</span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/the-linux-programming-interface itemprop=url rel=index><span itemprop=name>the-linux-programming-interface</span></a></span></span></div></div></header><div class=post-body itemprop=articleBody><h1 id=记账>记账
<a class=header-anchor href=#%e8%ae%b0%e8%b4%a6></a></h1><p>记账功能打开后，系统会在每个进程结束后记录一条账单信息。标准工具 sa(8) 对账单文件进行汇总，lastcomm(1) 则就先前执行的命令列出相关信息。</p><div class="markdown-alert markdown-alert-tip"><p class=markdown-alert-title><svg class="octicon octicon-light-bulb mr-2" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M8 1.5c-2.363.0-4 1.69-4 3.75.0.984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75.0 01-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456.0 00-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863.0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751.0 01-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304.0-2.06-1.637-3.75-4-3.75zM5.75 12h4.5a.75.75.0 010 1.5h-4.5a.75.75.0 010-1.5zM6 15.25a.75.75.0 01.75-.75h2.5a.75.75.0 010 1.5h-2.5A.75.75.0 016 15.25z"/></svg>Tip</p><p>Linux 系统的进程记账功能属于可选内核组件，可以通过 <code>CONFIG_BSD_PROCESS_ACCT</code> 选项进行配置。 在 Debian 上，需要使用 <code>apt install acct</code> 来安装（否则 <code>man 8 sa</code> 和 <code>which lastcomm</code> 都找不到）。</p></div><p>特权进程可以使用 <code>acct</code> 系统调用来打开或关闭记账功能，应用程序则很少使用到这种调用。</p><h1 id=系统调用-clone>系统调用 <code>clone()</code>
<a class=header-anchor href=#%e7%b3%bb%e7%bb%9f%e8%b0%83%e7%94%a8-clone></a></h1><p><code>clone()</code> 的地位和 <code>fork()</code>、<code>vfork()</code> 一样，它们在内核中都是用 <code>do_fork()</code> 来实现的，但是它能支持比后两个函数更加精细的控制，因此也被用作线程实现的方式。我们一般使用的 <code>clone()</code> 是 glibc 的包装函数，它和内核提供的 SYS_clone 系统调用有一点差异。</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#586e75>/* Prototype for the glibc wrapper function */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#719e07>#define _GNU_SOURCE
</span></span></span><span style=display:flex><span><span style=color:#719e07>#include</span> <span style=color:#719e07>&lt;sched.h&gt;</span><span style=color:#719e07>
</span></span></span><span style=display:flex><span><span style=color:#719e07></span>
</span></span><span style=display:flex><span><span style=color:#dc322f>int</span> <span style=color:#268bd2>clone</span>(<span style=color:#dc322f>int</span> (<span style=color:#719e07>*</span>fn)(<span style=color:#dc322f>void</span> <span style=color:#719e07>*</span>_Nullable), <span style=color:#dc322f>void</span> <span style=color:#719e07>*</span>stack, <span style=color:#dc322f>int</span> flags,
</span></span><span style=display:flex><span>         <span style=color:#dc322f>void</span> <span style=color:#719e07>*</span>_Nullable arg, ...  <span style=color:#586e75>/* pid_t *_Nullable parent_tid,
</span></span></span><span style=display:flex><span><span style=color:#586e75>                                      void *_Nullable tls,
</span></span></span><span style=display:flex><span><span style=color:#586e75>                                      pid_t *_Nullable child_tid */</span> );
</span></span></code></pre></div></div><footer class=post-footer><div readmore=true><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/the-linux-programming-interface/28-%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B/#more rel=contents>阅读全文 &#187;</a></div></div></div><div class=no-more-to-read><hr><center>没有啦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/posts/cli/cmake/%E5%AF%B9-CMake-%E6%9E%84%E5%BB%BA%E7%B1%BB%E5%9E%8B-CMAKE_BUILD_TYPE-%E7%9A%84%E8%80%83%E9%87%8F/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="🤖"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="🤖"><meta itemprop=description content="个人博客，主要是零散的笔记。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="对 CMake 构建类型 CMAKE_BUILD_TYPE 的考量"><meta itemprop=description content="参考

https://stackoverflow.com/a/59314670/
https://cmake.org/cmake/help/latest/variable/CMAKE_BUILD_TYPE.html 的解释：

  Specifies the build type on single-configuration generators (e.g. Makefile Generators or Ninja). Typical values include Debug, Release, RelWithDebInfo and MinSizeRel, but custom build types can also be defined.
Stack Overflow 回答里提到的 BetaTest 等其他构建类型应该就是上面所说的 custom build types."></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/posts/cli/cmake/%E5%AF%B9-CMake-%E6%9E%84%E5%BB%BA%E7%B1%BB%E5%9E%8B-CMAKE_BUILD_TYPE-%E7%9A%84%E8%80%83%E9%87%8F/ itemprop=url class=post-title-link>对 CMake 构建类型 CMAKE_BUILD_TYPE 的考量</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-07-07 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-07-07 00:00:00 +0800 CST">2024-07-07</time></span></div></div></header><div class=post-body itemprop=articleBody><h1 id=参考>参考
<a class=header-anchor href=#%e5%8f%82%e8%80%83></a></h1><p><a href=https://stackoverflow.com/a/59314670/ title=https://stackoverflow.com/a/59314670/ rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://stackoverflow.com/a/59314670/<i class="fa fa-external-link-alt"></i></a></p><p><a href=https://cmake.org/cmake/help/latest/variable/CMAKE_BUILD_TYPE.html title=https://cmake.org/cmake/help/latest/variable/CMAKE_BUILD_TYPE.html rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://cmake.org/cmake/help/latest/variable/CMAKE_BUILD_TYPE.html<i class="fa fa-external-link-alt"></i></a> 的解释：</p><blockquote><p>Specifies the build type on single-configuration generators (e.g. <a href=https://cmake.org/cmake/help/latest/manual/cmake-generators.7.html#makefile-generators title="Makefile Generators" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Makefile Generators<i class="fa fa-external-link-alt"></i></a> or <a href=https://cmake.org/cmake/help/latest/generator/Ninja.html#generator:Ninja title=Ninja rel="noopener external nofollow noreferrer" target=_blank class=exturl><code>Ninja</code><i class="fa fa-external-link-alt"></i></a>). Typical values include <code>Debug</code>, <code>Release</code>, <code>RelWithDebInfo</code> and <code>MinSizeRel</code>, but custom build types can also be defined.</p></blockquote><p>Stack Overflow 回答里提到的 BetaTest 等其他构建类型应该就是上面所说的 <em>custom build types</em>.</p><h1 id=在尽可能复现错误的情况下调试>在尽可能复现错误的情况下调试
<a class=header-anchor href=#%e5%9c%a8%e5%b0%bd%e5%8f%af%e8%83%bd%e5%a4%8d%e7%8e%b0%e9%94%99%e8%af%af%e7%9a%84%e6%83%85%e5%86%b5%e4%b8%8b%e8%b0%83%e8%af%95></a></h1><h2 id=使用-relwithdebinfo>使用 RelWithDebInfo？
<a class=header-anchor href=#%e4%bd%bf%e7%94%a8-relwithdebinfo></a></h2><p>考虑编译器 gcc 或者 clang：</p></div><footer class=post-footer><div readmore=true><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/posts/cli/cmake/%E5%AF%B9-CMake-%E6%9E%84%E5%BB%BA%E7%B1%BB%E5%9E%8B-CMAKE_BUILD_TYPE-%E7%9A%84%E8%80%83%E9%87%8F/#more rel=contents>阅读全文 &#187;</a></div></div></div><div class=no-more-to-read><hr><center>没有啦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/posts/life/%E5%AF%B9%E9%94%AE%E7%9B%98%E7%9A%84%E7%A2%8E%E7%A2%8E%E5%BF%B5/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="🤖"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="🤖"><meta itemprop=description content="个人博客，主要是零散的笔记。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="对键盘的碎碎念"><meta itemprop=description content="说明

这里放的是我觉得没有必要专门写一篇文章的内容。
2024-07-06

V75K 不同的键有点高低不一致了，怀疑是定位板被我弄的不平了。数字 5、6、7、8 这几个位置不仅突起，而且手感还偏硬，估计是下面有电池（这同时意味着这个地方不应该再使劲按下去了，可能不安全）；回车的位置下陷了，我觉得是装键帽使劲按回车导致的。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/posts/life/%E5%AF%B9%E9%94%AE%E7%9B%98%E7%9A%84%E7%A2%8E%E7%A2%8E%E5%BF%B5/ itemprop=url class=post-title-link>对键盘的碎碎念</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-07-06 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-07-06 00:00:00 +0800 CST">2024-07-06
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title=修改时间：2025-01-17T00:00:00+08:00 itemprop=dateModified datetime=2025-01-17T00:00:00+08:00>2025-01-17</time></span></div></div></header><div class=post-body itemprop=articleBody><h1 id=说明>说明
<a class=header-anchor href=#%e8%af%b4%e6%98%8e></a></h1><p>这里放的是我觉得没有必要专门写一篇文章的内容。</p><h1 id=2024-07-06>2024-07-06
<a class=header-anchor href=#2024-07-06></a></h1><p>V75K 不同的键有点高低不一致了，怀疑是定位板被我弄的不平了。数字 5、6、7、8 这几个位置不仅突起，而且手感还偏硬，估计是下面有电池（这同时意味着这个地方不应该再使劲按下去了，可能不安全）；回车的位置下陷了，我觉得是装键帽使劲按回车导致的。</p><h1 id=2024-07-07>2024-07-07
<a class=header-anchor href=#2024-07-07></a></h1><ol><li>鲸海轴一定要对准孔位小心插入。和其他轴体清脆一声按下去就是插好了不同，鲸海轴听到清脆一声按下去了可能是方向不正，有可能针脚都跪了。我已经跪两颗了。</li><li>卫星轴是调不好的，只有放弃强迫症安心用键盘。</li></ol><h1 id=2024-07-10>2024-07-10
<a class=header-anchor href=#2024-07-10></a></h1><p>鲸海轴还是太重了，换回阿尼亚轴了。昨天晚上把键盘里面也拆了，定位板是有一点变形，怪不得键帽高高低低的。调是调不好了。又在可乐蛙的店铺买了特氟龙和空格卫星轴，其他店铺一般都是多个 2U 和一个 6.25U 捆绑销售的，这个店铺可以单买。</p><h1 id=2024-07-13>2024-07-13
<a class=header-anchor href=#2024-07-13></a></h1><ol><li>还是觉得因为定位板变形导致键帽高低不平看着难受，下次换钢板定位板算了。</li><li>最好选准轴体不要自己换了。</li><li>避开短行程轴体的键盘。厂家可能为了更好的效果使用短行程的卫星轴，自己换长行程的轴体时大键按下去就会有异样的感觉。我的 V75K 大概率用的就是短行程卫星轴。我试了一下用 3.5±0.4mm 的鲸海轴和 3.5mm 的卫星轴（单独买的，不知道 V75K 标配卫星轴多长键程）也会有卡涩的感觉，说明轴体应该明显小于卫星轴键程。</li></ol></div><footer class=post-footer><div readmore=true><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/posts/life/%E5%AF%B9%E9%94%AE%E7%9B%98%E7%9A%84%E7%A2%8E%E7%A2%8E%E5%BF%B5/#more rel=contents>阅读全文 &#187;</a></div></div></div><div class=no-more-to-read><hr><center>没有啦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/posts/cli/ssh/%E5%88%A9%E7%94%A8-ssh-agent-%E5%9C%A8%E4%B8%A4%E4%B8%AA%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B9%8B%E9%97%B4%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="🤖"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="🤖"><meta itemprop=description content="个人博客，主要是零散的笔记。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="利用 ssh-agent 在两个服务器之间传输文件"><meta itemprop=description content="eval $(ssh-agent -s)
ssh-add ~/.ssh/id_ed25519 # 根据实际情况操作
ssh -A server1
scp server2:/data /data
由于 sever1 可能没有把 server2 作为主机存储，在 scp 的时候需要输入一长串的用户名、主机、端口。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/posts/cli/ssh/%E5%88%A9%E7%94%A8-ssh-agent-%E5%9C%A8%E4%B8%A4%E4%B8%AA%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B9%8B%E9%97%B4%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6/ itemprop=url class=post-title-link>利用 ssh-agent 在两个服务器之间传输文件</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-07-06 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-07-06 00:00:00 +0800 CST">2024-07-06</time></span></div></div></header><div class=post-body itemprop=articleBody><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#b58900>eval</span> <span style=color:#719e07>$(</span>ssh-agent -s<span style=color:#719e07>)</span>
</span></span><span style=display:flex><span>ssh-add ~/.ssh/id_ed25519 <span style=color:#586e75># 根据实际情况操作</span>
</span></span><span style=display:flex><span>ssh -A server1
</span></span><span style=display:flex><span>scp server2:/data /data
</span></span></code></pre></div><p>由于 sever1 可能没有把 server2 作为主机存储，在 <code>scp</code> 的时候需要输入一长串的用户名、主机、端口。</p></div><footer class=post-footer><div readmore=false><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/posts/cli/ssh/%E5%88%A9%E7%94%A8-ssh-agent-%E5%9C%A8%E4%B8%A4%E4%B8%AA%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B9%8B%E9%97%B4%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6/#more rel=contents>阅读全文 &#187;</a></div></div></div><div class=no-more-to-read><hr><center>没有啦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/the-linux-programming-interface/27-%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%89%A7%E8%A1%8C-exec/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="🤖"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="🤖"><meta itemprop=description content="个人博客，主要是零散的笔记。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="27 进程的执行 exec()"><meta itemprop=description content="exec() 函数

SYNOPSIS
#include <unistd.h>

extern char **environ;

int execl(const char *pathname, const char *arg, ...
               /*, (char *) NULL */);
int execlp(const char *file, const char *arg, ...
               /*, (char *) NULL */);
int execle(const char *pathname, const char *arg, ...
               /*, (char *) NULL, char *const envp[] */);
int execv(const char *pathname, char *const argv[]);
int execvp(const char *file, char *const argv[]);
int execvpe(const char *file, char *const argv[], char *const envp[]); /* GNU 扩展 */

/* 不知道为什么单独出来一个手册页，和上面没有放在一起？ */
int execve(const char *pathname, char *const _Nullable argv[],
          char *const _Nullable envp[]);
函数命名规则："></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/the-linux-programming-interface/27-%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%89%A7%E8%A1%8C-exec/ itemprop=url class=post-title-link>27 进程的执行 exec()</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-07-04 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-07-04 00:00:00 +0800 CST">2024-07-04
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title=修改时间：2024-09-10T00:00:00+08:00 itemprop=dateModified datetime=2024-09-10T00:00:00+08:00>2024-09-10</time>
</span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/the-linux-programming-interface itemprop=url rel=index><span itemprop=name>the-linux-programming-interface</span></a></span></span></div></div></header><div class=post-body itemprop=articleBody><h1 id=exec-函数><code>exec()</code> 函数
<a class=header-anchor href=#exec-%e5%87%bd%e6%95%b0></a></h1><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-c data-lang=c><span style=display:flex><span>SYNOPSIS
</span></span><span style=display:flex><span><span style=color:#719e07>#include</span> <span style=color:#719e07>&lt;unistd.h&gt;</span><span style=color:#719e07>
</span></span></span><span style=display:flex><span><span style=color:#719e07></span>
</span></span><span style=display:flex><span><span style=color:#719e07>extern</span> <span style=color:#dc322f>char</span> <span style=color:#719e07>**</span>environ;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#dc322f>int</span> <span style=color:#268bd2>execl</span>(<span style=color:#719e07>const</span> <span style=color:#dc322f>char</span> <span style=color:#719e07>*</span>pathname, <span style=color:#719e07>const</span> <span style=color:#dc322f>char</span> <span style=color:#719e07>*</span>arg, ...
</span></span><span style=display:flex><span>               <span style=color:#586e75>/*, (char *)</span> <span style=color:#b58900>NULL</span> */);
</span></span><span style=display:flex><span><span style=color:#dc322f>int</span> <span style=color:#268bd2>execlp</span>(<span style=color:#719e07>const</span> <span style=color:#dc322f>char</span> <span style=color:#719e07>*</span>file, <span style=color:#719e07>const</span> <span style=color:#dc322f>char</span> <span style=color:#719e07>*</span>arg, ...
</span></span><span style=display:flex><span>               <span style=color:#586e75>/*, (char *)</span> <span style=color:#b58900>NULL</span> */);
</span></span><span style=display:flex><span><span style=color:#dc322f>int</span> <span style=color:#268bd2>execle</span>(<span style=color:#719e07>const</span> <span style=color:#dc322f>char</span> <span style=color:#719e07>*</span>pathname, <span style=color:#719e07>const</span> <span style=color:#dc322f>char</span> <span style=color:#719e07>*</span>arg, ...
</span></span><span style=display:flex><span>               <span style=color:#586e75>/*, (char *)</span> <span style=color:#b58900>NULL</span>, <span style=color:#dc322f>char</span> <span style=color:#719e07>*</span><span style=color:#719e07>const</span> envp[] */);
</span></span><span style=display:flex><span><span style=color:#dc322f>int</span> <span style=color:#268bd2>execv</span>(<span style=color:#719e07>const</span> <span style=color:#dc322f>char</span> <span style=color:#719e07>*</span>pathname, <span style=color:#dc322f>char</span> <span style=color:#719e07>*</span><span style=color:#719e07>const</span> argv[]);
</span></span><span style=display:flex><span><span style=color:#dc322f>int</span> <span style=color:#268bd2>execvp</span>(<span style=color:#719e07>const</span> <span style=color:#dc322f>char</span> <span style=color:#719e07>*</span>file, <span style=color:#dc322f>char</span> <span style=color:#719e07>*</span><span style=color:#719e07>const</span> argv[]);
</span></span><span style=display:flex><span><span style=color:#dc322f>int</span> <span style=color:#268bd2>execvpe</span>(<span style=color:#719e07>const</span> <span style=color:#dc322f>char</span> <span style=color:#719e07>*</span>file, <span style=color:#dc322f>char</span> <span style=color:#719e07>*</span><span style=color:#719e07>const</span> argv[], <span style=color:#dc322f>char</span> <span style=color:#719e07>*</span><span style=color:#719e07>const</span> envp[]); <span style=color:#586e75>/* GNU 扩展 */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75>/* 不知道为什么单独出来一个手册页，和上面没有放在一起？ */</span>
</span></span><span style=display:flex><span><span style=color:#dc322f>int</span> <span style=color:#268bd2>execve</span>(<span style=color:#719e07>const</span> <span style=color:#dc322f>char</span> <span style=color:#719e07>*</span>pathname, <span style=color:#dc322f>char</span> <span style=color:#719e07>*</span><span style=color:#719e07>const</span> _Nullable argv[],
</span></span><span style=display:flex><span>          <span style=color:#dc322f>char</span> <span style=color:#719e07>*</span><span style=color:#719e07>const</span> _Nullable envp[]);
</span></span></code></pre></div><p>函数命名规则：</p><ol><li>其中 <code>exec</code> 前缀是一定有的。</li><li>然后用 <code>l</code>（<code>va_list</code> 形式）或者 <code>v</code>（数组形式）表示命令行参数，这也是一定有的。</li><li>（可选）如果允许在 <code>PATH</code> 中搜索（可执行）文件，而不是用绝对或相对路径搜索文件，则有 <code>p</code> 后缀。</li><li>（可选）如果允许（以字符串数组的形式）设置环境变量，则有 <code>e</code> 后缀。</li></ol><p>如果在设置环境变量的 <code>exec()</code> 系列系统调用中没有提及 <code>PATH</code> 环境变量，则使用默认 <code>PATH</code>。根据系统不同，默认的 <code>PATH</code> 可能不同，常见的 <code>PATH</code> 是 <code>.:/usr/bin:/bin</code>。处于安全考虑，特权用户的 <code>PATH</code> 中常常没有 <code>.</code>（当前工作目录）。</p><blockquote><p>If this variable isn&rsquo;t defined, the path list defaults to a list that includes the directories returned by <code>confstr(_CS_PATH)</code> (which typically returns the value &ldquo;/bin:/usr/bin&rdquo;) and possibly also the current working directory</p></blockquote></div><footer class=post-footer><div readmore=true><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/the-linux-programming-interface/27-%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%89%A7%E8%A1%8C-exec/#more rel=contents>阅读全文 &#187;</a></div></div></div><div class=no-more-to-read><hr><center>没有啦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/posts/cli/common/less-%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%8D%E6%95%8F%E6%84%9F%E6%90%9C%E7%B4%A2%E8%BF%87%E6%BB%A4/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="🤖"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="🤖"><meta itemprop=description content="个人博客，主要是零散的笔记。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="less 大小写不敏感搜索、过滤"><meta itemprop=description content="启用标记（例子：大小写不敏感搜索）

- 加上其他字符。比如 -i 表示开关大小写敏感搜索（ignore case in searches）。但是，这只对全小写的输入有用，如果查询的词中包含大写字母、又想要大小写不敏感搜索，则需要使用 -I（ignore case in searches and in patterns）。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/posts/cli/common/less-%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%8D%E6%95%8F%E6%84%9F%E6%90%9C%E7%B4%A2%E8%BF%87%E6%BB%A4/ itemprop=url class=post-title-link>less 大小写不敏感搜索、过滤</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-07-04 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-07-04 00:00:00 +0800 CST">2024-07-04
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title=修改时间：2024-10-31T00:00:00+08:00 itemprop=dateModified datetime=2024-10-31T00:00:00+08:00>2024-10-31</time></span></div></div></header><div class=post-body itemprop=articleBody><h1 id=启用标记例子大小写不敏感搜索>启用标记（例子：大小写不敏感搜索）
<a class=header-anchor href=#%e5%90%af%e7%94%a8%e6%a0%87%e8%ae%b0%e4%be%8b%e5%ad%90%e5%a4%a7%e5%b0%8f%e5%86%99%e4%b8%8d%e6%95%8f%e6%84%9f%e6%90%9c%e7%b4%a2></a></h1><p><code>-</code> 加上其他字符。比如 <code>-i</code> 表示开关大小写敏感搜索（ignore case in searches）。但是，这只对全小写的输入有用，如果查询的词中包含大写字母、又想要大小写不敏感搜索，则需要使用 <code>-I</code>（ignore case in searches and in patterns）。</p><p>这些标记不仅可以从命令行选项中设置，还能从 <code>LESS</code> 环境变量中读取，当然也能像上一段所说的那样在 <code>less</code> 已经打开后设置。Man 手册打开的 <code>less</code> 分页器似乎就是带有 <code>-i</code> 标志的。</p><div class="markdown-alert markdown-alert-tip"><p class=markdown-alert-title><svg class="octicon octicon-light-bulb mr-2" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M8 1.5c-2.363.0-4 1.69-4 3.75.0.984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75.0 01-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456.0 00-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863.0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751.0 01-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304.0-2.06-1.637-3.75-4-3.75zM5.75 12h4.5a.75.75.0 010 1.5h-4.5a.75.75.0 010-1.5zM6 15.25a.75.75.0 01.75-.75h2.5a.75.75.0 010 1.5h-2.5A.75.75.0 016 15.25z"/></svg>Tip</p><p>在我的电脑上 <code>vim</code> 的 <code>/</code> 默认是大小写敏感，而 less 是默认带有 <code>-i</code> 标志。有些老的电脑上面 less 可能需要自己加标志。</p><p>如果想要在 <code>vim</code> 中使用大小写不敏感搜索，需要在搜索条目中加上 <code>\c</code> 转义，这个标志可以加在搜索条目的任何位置，参考 <a href=https://stackoverflow.com/a/2287449/ title=https://stackoverflow.com/a/2287449/ rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://stackoverflow.com/a/2287449/<i class="fa fa-external-link-alt"></i></a> 。还有一种方式<a href=https://stackoverflow.com/a/2287452/ title=使用命令 rel="noopener external nofollow noreferrer" target=_blank class=exturl>使用命令<i class="fa fa-external-link-alt"></i></a> <code>:set ic</code> 开启大小写不敏感搜索。</p></div><h1 id=过滤行>过滤行
<a class=header-anchor href=#%e8%bf%87%e6%bb%a4%e8%a1%8c></a></h1><p>先按 <code>&</code>（而不是 <code>/</code>）可以将输出过滤，只显示匹配的行。</p></div><footer class=post-footer><div readmore=false><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/posts/cli/common/less-%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%8D%E6%95%8F%E6%84%9F%E6%90%9C%E7%B4%A2%E8%BF%87%E6%BB%A4/#more rel=contents>阅读全文 &#187;</a></div></div></div><div class=no-more-to-read><hr><center>没有啦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/the-linux-programming-interface/25-%E8%BF%9B%E7%A8%8B%E7%9A%84%E7%BB%88%E6%AD%A2-exit_exit/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="🤖"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="🤖"><meta itemprop=description content="个人博客，主要是零散的笔记。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="25 进程的终止 exit()、_exit()"><meta itemprop=description content="_exit() 系统调用

虽然参数是 int 类型，但是只有低 8 位可用。而且由于终端中用信号值 + 128 表示进程因信号退出的状态码（$?），所以最好也不要使用超过 127 的退出值。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/the-linux-programming-interface/25-%E8%BF%9B%E7%A8%8B%E7%9A%84%E7%BB%88%E6%AD%A2-exit_exit/ itemprop=url class=post-title-link>25 进程的终止 exit()、_exit()</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-07-03 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-07-03 00:00:00 +0800 CST">2024-07-03
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title=修改时间：2024-09-10T00:00:00+08:00 itemprop=dateModified datetime=2024-09-10T00:00:00+08:00>2024-09-10</time>
</span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/the-linux-programming-interface itemprop=url rel=index><span itemprop=name>the-linux-programming-interface</span></a></span></span></div></div></header><div class=post-body itemprop=articleBody><h1 id=_exit-系统调用><code>_exit()</code> 系统调用
<a class=header-anchor href=#_exit-%e7%b3%bb%e7%bb%9f%e8%b0%83%e7%94%a8></a></h1><p>虽然参数是 int 类型，但是只有低 8 位可用。而且由于终端中用信号值 + 128 表示进程因信号退出的状态码（<code>$?</code>），所以最好也不要使用超过 127 的退出值。</p><h1 id=exit-函数><code>exit()</code> 函数
<a class=header-anchor href=#exit-%e5%87%bd%e6%95%b0></a></h1><p>会做这几件事：</p><ol><li>执行退出处理程序，这些程序是用 <code>atexit()</code> 和 <code>on_exit()</code> 注册的。</li><li>刷新 stdio 流缓冲区。</li><li>调用 <code>_exit()</code>。</li></ol><p>由于在执行退出处理程序时，<code>main()</code> 函数已经退出，所以退出处理函数不能使用 <code>main()</code> 函数中定义的变量。</p><p>如果用户程序没有调用 <code>_exit()</code> 和 <code>exit()</code>，并正常从 <code>main()</code> 函数中返回，则使用 <code>main()</code> 函数的返回值作为对 <code>exit()</code> 调用时传入的参数，这个过程是由运行时函数处理的。如果 <code>main()</code> 函数没有显式提供返回值，则在 C89 中属于未定义行为，在 C99/C++ 中会隐式返回 0。</p></div><footer class=post-footer><div readmore=true><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/the-linux-programming-interface/25-%E8%BF%9B%E7%A8%8B%E7%9A%84%E7%BB%88%E6%AD%A2-exit_exit/#more rel=contents>阅读全文 &#187;</a></div></div></div><div class=no-more-to-read><hr><center>没有啦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/the-linux-programming-interface/26-%E7%9B%91%E6%8E%A7%E5%AD%90%E8%BF%9B%E7%A8%8B-wait/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="🤖"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="🤖"><meta itemprop=description content="个人博客，主要是零散的笔记。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="26 监控子进程 wait()"><meta itemprop=description content="子进程的状态

1. 状态的分类


调用 _exit() 正常退出（无论是手动调用还是运行时在 main() 函数退出后自动调用）。
收到信号而终止。
收到信号而暂停执行。
收到信号而恢复执行。

2. 如何在父进程中区分子进程状态

为了区分这 4 种状态，等待函数中 int 类型的输出参数实际上会有低 2 个字节被使用（虽然实际上返回状态只需要用 1 个字节表示）："></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/the-linux-programming-interface/26-%E7%9B%91%E6%8E%A7%E5%AD%90%E8%BF%9B%E7%A8%8B-wait/ itemprop=url class=post-title-link>26 监控子进程 wait()</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-07-03 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-07-03 00:00:00 +0800 CST">2024-07-03
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title=修改时间：2025-04-21T00:00:00+08:00 itemprop=dateModified datetime=2025-04-21T00:00:00+08:00>2025-04-21</time>
</span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/the-linux-programming-interface itemprop=url rel=index><span itemprop=name>the-linux-programming-interface</span></a></span></span></div></div></header><div class=post-body itemprop=articleBody><h1 id=子进程的状态>子进程的状态
<a class=header-anchor href=#%e5%ad%90%e8%bf%9b%e7%a8%8b%e7%9a%84%e7%8a%b6%e6%80%81></a></h1><h2 id=1-状态的分类>1. 状态的分类
<a class=header-anchor href=#1-%e7%8a%b6%e6%80%81%e7%9a%84%e5%88%86%e7%b1%bb></a></h2><ul><li>调用 <code>_exit()</code> 正常退出（无论是手动调用还是运行时在 <code>main()</code> 函数退出后自动调用）。</li><li>收到信号而终止。</li><li>收到信号而暂停执行。</li><li>收到信号而恢复执行。</li></ul><h2 id=2-如何在父进程中区分子进程状态>2. 如何在父进程中区分子进程状态
<a class=header-anchor href=#2-%e5%a6%82%e4%bd%95%e5%9c%a8%e7%88%b6%e8%bf%9b%e7%a8%8b%e4%b8%ad%e5%8c%ba%e5%88%86%e5%ad%90%e8%bf%9b%e7%a8%8b%e7%8a%b6%e6%80%81></a></h2><p>为了区分这 4 种状态，等待函数中 int 类型的输出参数实际上会有低 2 个字节被使用（虽然实际上返回状态只需要用 1 个字节表示）：</p><p><img src=/the-linux-programming-interface/tlpi-assets/26%20%E7%9B%91%E6%8E%A7%E5%AD%90%E8%BF%9B%E7%A8%8B%EF%BC%88%E6%AF%94%E5%89%8D%E5%87%A0%E7%AB%A0%E5%A4%8D%E6%9D%82%EF%BC%89-20240703234651158.webp></p><p>可以分别通过 <code>WIFEXITED (status)</code>、<code>WIFSIGNALED (status)</code>、<code>WIFSTOPPED (status)</code>、<code>WIFCONTINUED (status)</code> 来判断是否属于这几种情况。这几种情况是互斥的。在进程被信号所杀时，内核转储标志可能会被设置，这时如果宏 <code>WCOREDUMP</code> 被定义，可以用 <code>WCOREDUMP</code> 来检查内核转换标志是否被设置。</p><h2 id=3-在信号处理函数中终止子进程>3. 在信号处理函数中终止子进程
<a class=header-anchor href=#3-%e5%9c%a8%e4%bf%a1%e5%8f%b7%e5%a4%84%e7%90%86%e5%87%bd%e6%95%b0%e4%b8%ad%e7%bb%88%e6%ad%a2%e5%ad%90%e8%bf%9b%e7%a8%8b></a></h2><p>如果需要对某个信号做出一定的处理再终止子进程，则不能调用 <code>_exit()</code> 函数，否则子进程会被视为正常终止。如果想要让子进程终止时可以反应真实的终止原因，需要在信号处理器函数中做出善后处理之后，再将该信号的处置方式设置成默认，然后用 <code>raise()</code> 系统调用发送相同的信号。</p></div><footer class=post-footer><div readmore=true><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/the-linux-programming-interface/26-%E7%9B%91%E6%8E%A7%E5%AD%90%E8%BF%9B%E7%A8%8B-wait/#more rel=contents>阅读全文 &#187;</a></div></div></div><div class=no-more-to-read><hr><center>没有啦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/the-linux-programming-interface/24-%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%88%9B%E5%BB%BA-fork/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="🤖"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="🤖"><meta itemprop=description content="个人博客，主要是零散的笔记。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="24 进程的创建 fork()"><meta itemprop=description content="几个系统调用 / 库函数的介绍


fork()：创建子进程。
exit(status)：库函数，退出当前进程，是 _exit 的包装。
wait(&amp;status)：挂起当前进程并等待一个子进程。
execve(pathname, argv, envp)：加载一个新的程序。


  
    
      
      
    Tip"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/the-linux-programming-interface/24-%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%88%9B%E5%BB%BA-fork/ itemprop=url class=post-title-link>24 进程的创建 fork()</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-07-01 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-07-01 00:00:00 +0800 CST">2024-07-01
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title=修改时间：2024-09-10T00:00:00+08:00 itemprop=dateModified datetime=2024-09-10T00:00:00+08:00>2024-09-10</time>
</span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/the-linux-programming-interface itemprop=url rel=index><span itemprop=name>the-linux-programming-interface</span></a></span></span></div></div></header><div class=post-body itemprop=articleBody><h1 id=几个系统调用--库函数的介绍>几个系统调用 / 库函数的介绍
<a class=header-anchor href=#%e5%87%a0%e4%b8%aa%e7%b3%bb%e7%bb%9f%e8%b0%83%e7%94%a8--%e5%ba%93%e5%87%bd%e6%95%b0%e7%9a%84%e4%bb%8b%e7%bb%8d></a></h1><ul><li><code>fork()</code>：创建子进程。</li><li><code>exit(status)</code>：库函数，退出当前进程，是 <code>_exit</code> 的包装。</li><li><code>wait(&amp;status)</code>：挂起当前进程并等待一个子进程。</li><li><code>execve(pathname, argv, envp)</code>：加载一个新的程序。</li></ul><div class="markdown-alert markdown-alert-tip"><p class=markdown-alert-title><svg class="octicon octicon-light-bulb mr-2" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M8 1.5c-2.363.0-4 1.69-4 3.75.0.984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75.0 01-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456.0 00-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863.0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751.0 01-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304.0-2.06-1.637-3.75-4-3.75zM5.75 12h4.5a.75.75.0 010 1.5h-4.5a.75.75.0 010-1.5zM6 15.25a.75.75.0 01.75-.75h2.5a.75.75.0 010 1.5h-2.5A.75.75.0 016 15.25z"/></svg>Tip</p><p>SUSv3 还规定了 <code>posix_spawn()</code> 函数，相当于 <code>fork</code> + <code>exec</code>，在有些实现中速度会快一些，有的实现中则不是。网上对此的讨论也很多。</p></div><h1 id=fork-和文件共享><code>fork</code> 和文件共享
<a class=header-anchor href=#fork-%e5%92%8c%e6%96%87%e4%bb%b6%e5%85%b1%e4%ba%ab></a></h1><p><code>fork</code> 后父子进程是可以共享打开的文件描述符的，而且这些文件描述符都指向内核打开文件表的同一个项目，共享文件属性和偏移量。不过可以在打开文件时设置 <code>O_CLOEXEC</code> 选项，使得子进程将来调用 <code>exec</code> 时关闭文件。</p><h1 id=vfork-和写时复制><code>vfork</code> 和写时复制
<a class=header-anchor href=#vfork-%e5%92%8c%e5%86%99%e6%97%b6%e5%a4%8d%e5%88%b6></a></h1><p>早前 <code>fork</code> 函数没有 copy-on-write 功能，因而在子进程要调用 <code>exec</code> 时，显得不划算。<code>vfork</code> 让父子进程共享内存，只是复制极小部分用来管理进程的数据，并且将父进程挂起，直到子进程调用 <code>exec</code> 或者 <code>_wait</code> 才恢复。如果子进程在此期间做出了别的行为，则行为未定义。</p><blockquote><p>这里的别的行为指：1. 修改了除了 <code>vfork</code> 返回值以外的任何数据；2. 从调用 <code>vfork</code> 的函数中返回；3. 在调用 <code>exec</code> / <code>_wait</code> 之前调用了任何函数。</p></blockquote></div><footer class=post-footer><div readmore=true><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/the-linux-programming-interface/24-%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%88%9B%E5%BB%BA-fork/#more rel=contents>阅读全文 &#187;</a></div></div></div><div class=no-more-to-read><hr><center>没有啦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/posts/programming/www/ctrl-+-f5-%E5%8F%AF%E4%BB%A5%E5%BC%BA%E5%88%B6-chrome-%E6%8B%89%E5%8F%96%E6%9C%80%E6%96%B0%E7%9A%84%E7%BD%91%E9%A1%B5%E8%B5%84%E6%BA%90/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="🤖"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="🤖"><meta itemprop=description content="个人博客，主要是零散的笔记。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="ctrl + f5 可以强制 chrome 拉取最新的网页资源"><meta itemprop=description content="如题。"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/posts/programming/www/ctrl-+-f5-%E5%8F%AF%E4%BB%A5%E5%BC%BA%E5%88%B6-chrome-%E6%8B%89%E5%8F%96%E6%9C%80%E6%96%B0%E7%9A%84%E7%BD%91%E9%A1%B5%E8%B5%84%E6%BA%90/ itemprop=url class=post-title-link>ctrl + f5 可以强制 chrome 拉取最新的网页资源</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-06-29 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-06-29 00:00:00 +0800 CST">2024-06-29
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title=修改时间：2024-08-09T00:00:00+08:00 itemprop=dateModified datetime=2024-08-09T00:00:00+08:00>2024-08-09</time></span></div></div></header><div class=post-body itemprop=articleBody><p>如题。</p></div><footer class=post-footer><div readmore=false><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/posts/programming/www/ctrl-+-f5-%E5%8F%AF%E4%BB%A5%E5%BC%BA%E5%88%B6-chrome-%E6%8B%89%E5%8F%96%E6%9C%80%E6%96%B0%E7%9A%84%E7%BD%91%E9%A1%B5%E8%B5%84%E6%BA%90/#more rel=contents>阅读全文 &#187;</a></div></div></div><div class=no-more-to-read><hr><center>没有啦~</center></div></div><div class=post-eof></div></footer></article></div><nav class=pagination><a class="extend prev" rel=prev href=/page/14/><i class="fa fa-angle-left"></i>
</a><a class=page-number href=/page/11/>11</a>
<a class=page-number href=/page/12/>12</a>
<a class=page-number href=/page/13/>13</a>
<a class=page-number href=/page/14/>14</a>
<span class="page-number current">15</span>
<a class=page-number href=/page/16/>16</a>
<a class=page-number href=/page/17/>17</a>
<a class=page-number href=/page/18/>18</a>
<a class=page-number href=/page/19/>19</a>
<a class="extend next" rel=next href=/page/16/><i class="fa fa-angle-right"></i></a></nav></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2023 - 2025
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>🤖</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.143.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div></div></footer><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js defer></script><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":false,"save":"manual"},"copybtn":true,"darkmode":false,"hostname":"https://hxhue.github.io/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":false,"transition":{"collheader":"fadeInLeft","menu_item":"fadeInDown","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline"},"views":{"enable":false,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"cdnjs","router":"https://cdnjs.cloudflare.com/ajax/libs"},"version":"4.5.3"}</script><script type=text/javascript src=/js/main.min.37ba8b54f9d4d784d08028c45eea93b5d4e13eda8ee7fb0d2edd6f3fac66cfd2.js defer></script></body></html>