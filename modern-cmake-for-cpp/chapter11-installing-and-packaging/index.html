<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.143.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="chapter11 - installing and packaging"><meta itemprop=description content="ä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯é›¶æ•£çš„ç¬”è®°ã€‚"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://hxhue.github.io/imgs/371907.jpg"><meta itemprop=keywords content="cmake,cpp,modern-cmake-for-cpp"><link type=text/css rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css><link rel=stylesheet href=/css/main.min.bea76f574a755574e17d42bea39502a74ca3ca4db65807b8c82d3e26dcec8420.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ æˆ‘å¯æ˜¯æœ‰åº•çº¿çš„å“Ÿ ~"}</style><link rel=stylesheet type=text/css href=/css/style.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/github-markdown-css@5.3.0/github-markdown-dark.css><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js></script><script>MathJax={tex:{displayMath:[["$$","$$"],["\\[","\\]"]],inlineMath:[["$","$"],["\\(","\\)"]]},svg:{fontCache:"global"}}</script><script type=module>
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: false });
  mermaid.mermaidAPI.initialize();
  window.mermaid = mermaid;
</script><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":false,"isHome":false,"isPage":true,"path":"chapter11-installing-and-packaging","permalink":"https://hxhue.github.io/modern-cmake-for-cpp/chapter11-installing-and-packaging/","title":"chapter11 - installing and packaging","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>chapter11 - installing and packaging - Bluegill</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>Bluegill</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description></p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-about"><a href=/about/ class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>å…³äº</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>å½’æ¡£</a></li><li class="menu-item menu-item-categories"><a href=/categories/ class=hvr-icon-pulse rel=section><i class="fa fa-th hvr-icon"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-tags"><a href=/tags/ class=hvr-icon-pulse rel=section><i class="fa fa-hashtag hvr-icon"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-daily"><a href=/daily/ class=hvr-icon-pulse rel=section><i class="fa fa-newspaper hvr-icon"></i>éšç¬”</a></li><li class="menu-item menu-item-discovery"><a href=https://rift-fear-f2c.notion.site/2025-1e354a33cfb1802c841bdf29f2f3dab3 class=hvr-icon-pulse rel=section><i class="fa fa-compass hvr-icon"></i>å‘ç°</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>æœç´¢</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=æœç´¢... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>æ–‡ç« ç›®å½•</li><li class=sidebar-nav-overview>ç«™ç‚¹æ¦‚è§ˆ</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#exporting-without-installation>Exporting without installation</a></li><li><a href=#cmake---install><code>cmake --install</code></a></li><li><a href=#install-å‘½ä»¤><code>install()</code> å‘½ä»¤</a></li><li><a href=#installtargets><code>install(TARGETS)</code></a><ul><li><a href=#gnuinstalldirs><code>GNUInstallDirs</code></a></li><li><a href=#å¤„ç†-public-headers>å¤„ç† public headers</a></li></ul></li><li><a href=#installfilesprograms><code>install(FILES|PROGRAMS)</code></a></li><li><a href=#installdirectory><code>install(DIRECTORY)</code></a></li><li><a href=#installscriptcode><code>install(SCRIPT|CODE)</code></a></li><li><a href=#installexport><code>install(EXPORT)</code></a></li><li><a href=#å†™-config-file>å†™ Config file</a><ul><li><a href=#basic-config-file>Basic config file</a></li><li><a href=#advanced-config-file>Advanced config file</a></li><li><a href=#version-file>Version file</a></li></ul></li><li><a href=#components>Components</a></li><li><a href=#managing-symbolic-links-for-versioned-shared-libraries>Managing symbolic links for versioned shared libraries</a></li><li><a href=#cpack>CPack</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=ğŸ¤– src=/imgs/371907.jpg><p class=site-author-name itemprop=name>ğŸ¤–</p><div class=site-description itemprop=description>ä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯é›¶æ•£çš„ç¬”è®°ã€‚</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>433</span>
<span class=site-state-item-name>æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>12</span>
<span class=site-state-item-name>åˆ†ç±»</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>86</span>
<span class=site-state-item-name>æ ‡ç­¾</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/hxhue title="Github â†’ https://github.com/hxhue" rel=noopener target=_blank><i class="fab fa-github fa-fw"></i>
Github
</a></span><span class=links-of-social-item><a href=/rss.xml title="RSS è®¢é˜… â†’ /rss.xml" rel=noopener target=_blank><i class="fa fa-rss fa-fw"></i>
RSS è®¢é˜…</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=å…±äº«çŸ¥è¯†><img src=/imgs/cc/big/by_nc_sa.svg alt=å…±äº«çŸ¥è¯†></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
å‹æƒ…é“¾æ¥</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://shuai.guru/ title=https://shuai.guru/ target=_blank>shuai.guru</a></li></ul></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=toggle-theme class=button title=æ·±æµ…æ¨¡å¼åˆ‡æ¢><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=è¿”å›é¡¶éƒ¨><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/modern-cmake-for-cpp/chapter11-installing-and-packaging/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="ğŸ¤–"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="ğŸ¤–"><meta itemprop=description content="ä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯é›¶æ•£çš„ç¬”è®°ã€‚"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="chapter11 - installing and packaging"><meta itemprop=description content="Exporting without installation

ä½¿ç”¨ export å‘½ä»¤å¯ä»¥åˆ›å»ºå¯¼å‡ºæ–‡ä»¶ï¼Œç„¶åå…¶ä»–å·¥ç¨‹åªè¦ include è¿™ä¸ªå¯¼å‡ºæ–‡ä»¶å°±èƒ½ä½¿ç”¨å½“å‰è¿™ä¸ªåŒ…ä¸­çš„ targetï¼Œè€Œä¸éœ€è¦å…ˆå°†è¿™ä¸ªåŒ…ç”¨ install å®‰è£…åœ¨ç³»ç»Ÿé‡Œã€‚
export(TARGETS [target1 [target2 [...]]]
      [NAMESPACE <namespace>] [APPEND] FILE <path>
      [EXPORT_LINK_INTERFACE_LIBRARIES]

  NAMESPACE is recommended as a hint, stating that the target has been imported from other projects."></span><header class=post-header><h1 class=post-title itemprop="name headline">chapter11 - installing and packaging</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=å‘è¡¨äº>å‘è¡¨äºï¼š
</span><time title="åˆ›å»ºæ—¶é—´ï¼š2024-02-01 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-02-01 00:00:00 +0800 CST">2024-02-01
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=æ›´æ–°äº>æ›´æ–°äºï¼š
</span><time title=ä¿®æ”¹æ—¶é—´ï¼š2024-08-18T00:00:00+08:00 itemprop=dateModified datetime=2024-08-18T00:00:00+08:00>2024-08-18</time>
</span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=åˆ†ç±»äº>åˆ†ç±»äºï¼š
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/modern-cmake-for-cpp itemprop=url rel=index><span itemprop=name>modern-cmake-for-cpp</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=å­—æ•°><span class=post-meta-item-icon><i class="far fa-file-word"></i>
</span><span class=post-meta-item-text>å­—æ•°ï¼š</span>
<span>5274</span>
</span><span class=post-meta-item title=é˜…è¯»><span class=post-meta-item-icon><i class="far fa-clock"></i>
</span><span class=post-meta-item-text>é˜…è¯»ï¼š&ap;</span>
<span>11åˆ†é’Ÿ</span></span></div></div></header><div class=post-body itemprop=articleBody><h1 id=exporting-without-installation>Exporting without installation
<a class=header-anchor href=#exporting-without-installation></a></h1><p>ä½¿ç”¨ <code>export</code> å‘½ä»¤å¯ä»¥åˆ›å»ºå¯¼å‡ºæ–‡ä»¶ï¼Œç„¶åå…¶ä»–å·¥ç¨‹åªè¦ include è¿™ä¸ªå¯¼å‡ºæ–‡ä»¶å°±èƒ½ä½¿ç”¨å½“å‰è¿™ä¸ªåŒ…ä¸­çš„ targetï¼Œè€Œä¸éœ€è¦å…ˆå°†è¿™ä¸ªåŒ…ç”¨ <code>install</code> å®‰è£…åœ¨ç³»ç»Ÿé‡Œã€‚</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#b58900>export</span>(<span style=color:#2aa198>TARGETS</span> <span style=color:#2aa198>[target1</span> <span style=color:#2aa198>[target2</span> <span style=color:#2aa198>[...]]]</span>
</span></span><span style=display:flex><span>      <span style=color:#2aa198>[NAMESPACE</span> <span style=color:#2aa198>&lt;namespace&gt;]</span> <span style=color:#2aa198>[APPEND]</span> <span style=color:#2aa198>FILE</span> <span style=color:#2aa198>&lt;path&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#2aa198>[EXPORT_LINK_INTERFACE_LIBRARIES]</span>
</span></span></code></pre></div><blockquote><p><code>NAMESPACE</code> is recommended as a hint, stating that the target has been imported from other projects.</p><p><code>APPEND</code> tells CMake that it shouldn&rsquo;t erase the contents of the file before writing. ä¹Ÿå°±æ˜¯è¯´æœ¬èº«ä¼šæŒ‰ç…§ <code>FILE</code> æ¥è¦†å†™æ–‡ä»¶ï¼Œä½†æ˜¯ <code>APPEND</code> ä½¿å¾—å†™å…¥æ–¹å¼å˜æˆè¿½åŠ ã€‚</p><p><code>EXPORT_LINK_INTERFACE_LIBRARIES</code> will export target link dependencies (including imported and config-specific variants).</p></blockquote><p>ä¾‹å­ï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#b58900>cmake_minimum_required</span>(<span style=color:#2aa198>VERSION</span> <span style=color:#2aa198>3.20.0</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>project</span>(<span style=color:#2aa198>ExportCalcCXX</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>add_subdirectory</span>(<span style=color:#2aa198>src</span> <span style=color:#2aa198>bin</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>set</span>(<span style=color:#2aa198>EXPORT_DIR</span> <span style=color:#2aa198>&#34;${CMAKE_CURRENT_BINARY_DIR}/cmake&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>export</span>(<span style=color:#2aa198>TARGETS</span> <span style=color:#2aa198>calc</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>FILE</span> <span style=color:#2aa198>&#34;${EXPORT_DIR}/CalcTargets.cmake&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>NAMESPACE</span> <span style=color:#2aa198>Calc::</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p><strong>è¿™æ®µä»£ç å°†å¯¼å‡ºæ–‡ä»¶ç”Ÿæˆåœ¨äº† binary tree é‡Œé¢</strong>ï¼Œè¿™æ ·çš„æ–‡ä»¶ä¸ä¼šæ±¡æŸ“ç³»ç»Ÿï¼Œä½†æ˜¯å¯ä»¥è¢«å…¶ä»–å·¥ç¨‹åŒ…å«è¿›å»ã€‚è¿˜è¦æ³¨æ„ CMake åœ¨ build tree ä¸­å¯¼å‡ºçš„ target export file é‡Œç”¨çš„æ˜¯ç»å¯¹è·¯å¾„ï¼Œæ‰€ä»¥ä¸èƒ½è½»æ˜“ç§»åŠ¨ã€‚ä¸Šé¢ä»£ç è¿˜ç”¨åˆ°äº†ä¸€ä¸ªåå­—ç©ºé—´ <code>Calc::</code>ï¼Œå› è€Œåˆ›å»ºçš„ target export file ä¸­å£°æ˜çš„ target æ˜¯ <code>Calc::calc</code>ã€‚</p><p>export å‘½ä»¤è¿˜æœ‰ä¸€ä¸ªå½¢å¼ï¼š<code>export(EXPORT &lt;export> [NAMESPACE &lt;namespace>] [FILE &lt;path>])</code>ã€‚è¿™ä¸ªå½¢å¼ä¸éœ€è¦ targetsï¼Œä½†æ˜¯éœ€è¦ä¸€ä¸ªä¹‹å‰åˆ›å»ºçš„ export çš„åå­—ã€‚</p><blockquote><p>However, it requires a <code>&lt;export></code> name rather than a list of exported targets. Such <code>&lt;export></code> instances are named lists of targets that are defined by install(TARGETS)</p></blockquote><p>export å‘½ä»¤åœ¨ build tree çš„ç”Ÿæˆé˜¶æ®µå°±ä¼šå¯¼å‡º target export fileã€‚<strong>ä½¿ç”¨ <code>${CMAKE_INSTALL_LIBDIR}</code> ä½œä¸ºå‰ç¼€æ˜¯å®‰å…¨çš„</strong>ï¼ˆæ›´ä¿é™©ä¸€ç‚¹çš„æ˜¯å…ˆ <code>include(GNUInstallDirs)</code>ï¼‰ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼Œç”Ÿæˆé˜¶æ®µçš„ç›¸å¯¹ä½ç½®æ˜¯ build treeï¼Œæ‰€ä»¥ä¸ä¼šçœŸæ­£å®‰è£…åˆ°ç³»ç»Ÿé‡Œé¢å»ã€‚</p><h1 id=cmake---install><code>cmake --install</code>
<a class=header-anchor href=#cmake---install></a></h1><p><code>cmake --install</code> æ¥å—è¿™äº›å‚æ•°ï¼ˆå®ƒä»¬çš„å‚æ•°éƒ½æ˜¯å‰é¢ä¸åŠ ç­‰å·çš„ï¼‰ï¼š</p><ol><li><code>--config</code>ï¼šå¯¹å¤šé…ç½®ç”Ÿæˆå™¨æœ‰ç”¨ã€‚</li><li><code>--component</code>ï¼šé€‰æ‹©è¦å®‰è£…çš„éƒ¨åˆ†ï¼ˆåé¢è®²ï¼‰ã€‚</li><li><code>--default-directory-permissions</code>ï¼šè®¾ç½®å®‰è£…ç›®å½•çš„æƒé™ï¼ˆ<code>u=rwx,g=rx,o=rx</code>ï¼‰ã€‚</li><li><code>--prefix</code>ï¼šè®¾ç½® <code>CMAKE_INSTALL_PREFIX</code> çš„å€¼ï¼ˆå¯¹ Windows æ¥è¯´é»˜è®¤ä¸º <code>c:/Program Files/${PROJECT_NAME}</code>ï¼Œå¯¹ unix æ¥è¯´é»˜è®¤ä¸º <code>/usr/local</code>ï¼‰ã€‚</li><li><code>-v</code>, <code>--verbose</code></li></ol><h1 id=install-å‘½ä»¤><code>install()</code> å‘½ä»¤
<a class=header-anchor href=#install-%e5%91%bd%e4%bb%a4></a></h1><ul><li><code>install(TARGETS)</code>: This installs output artifacts such as libraries and executables.</li><li><code>install(FILES|PROGRAMS)</code>: This installs individual files and sets their permissions. è¿™ä¸¤å‘½ä»¤éå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯è®¾ç½®çš„é»˜è®¤æƒé™ä¸åŒï¼Œæ˜¾ç„¶ <code>PROGRAMS</code> ä¼šè®¾ç½®å†™æƒé™ã€‚</li><li><code>install(DIRECTORY)</code>: This installs whole directories.</li><li><code>install(SCRIPT|CODE)</code>: This runs a CMake script or a snippet during installation.</li><li><code>install(EXPORT)</code>: This generates and installs a target export file.</li></ul><p><code>install</code> å‘½ä»¤å¯ä»¥æŒ‡å®š <code>DESTINATION</code>/<code>PERMISSIONS</code>/<code>CONFIGURATIONS</code>/<code>OPTIONAL</code> ç­‰å‚æ•°ã€‚åœ¨ <code>COMPONENT</code> æ¨¡å¼ä¸‹ï¼Œè¿˜å¯ä»¥æŒ‡å®š <code>EXCLUDE_FROM_ALL</code>ã€‚å¦‚æœç»™å®šçš„å®‰è£…ä½ç½®æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œé‚£ä¹ˆå®é™…ä¸Šçš„å®‰è£…ä½ç½®æ˜¯ <code>${CMAKE_INSTALL_PREFIX} + ${DESTINATION}</code>ã€‚</p><h1 id=installtargets><code>install(TARGETS)</code>
<a class=header-anchor href=#installtargets></a></h1><div class="markdown-alert markdown-alert-note"><p class=markdown-alert-title><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1116 0A8 8 0 010 8zm8-6.5a6.5 6.5.0 100 13 6.5 6.5.0 000-13zM6.5 7.75A.75.75.0 017.25 7h1a.75.75.0 01.75.75v2.75h.25a.75.75.0 010 1.5h-2a.75.75.0 010-1.5h.25v-2h-.25a.75.75.0 01-.75-.75zM8 6a1 1 0 110-2 1 1 0 010 2z"/></svg>Note</p><p><code>OPTIONAL</code> æŒ‡çš„æ˜¯å¦‚æœæ‰¾ä¸åˆ°è¦å®‰è£…çš„æ–‡ä»¶ä¹Ÿä¸æŠ¥é”™ã€‚<code>CONFIGURATIONS</code> æŒ‡çš„æ˜¯è¿™ä¸ªå®‰è£…å¯¹å“ªäº›é…ç½®ï¼ˆDebug, Releaseï¼‰æœ‰æ•ˆï¼Œå¤„åœ¨æ— æ•ˆé…ç½®æ—¶è¿™æ¡ <code>install</code> å‘½ä»¤è¢«å¿½ç•¥ã€‚</p></div><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#b58900>install</span>(<span style=color:#2aa198>TARGETS</span> <span style=color:#2aa198>&lt;target&gt;...</span> <span style=color:#2aa198>[EXPORT</span> <span style=color:#2aa198>&lt;export-name&gt;]</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[&lt;output-artifact-configuration&gt;</span> <span style=color:#2aa198>...]</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[INCLUDES</span> <span style=color:#2aa198>DESTINATION</span> <span style=color:#2aa198>[&lt;dir&gt;</span> <span style=color:#2aa198>...]]</span>
</span></span><span style=display:flex><span>        )
</span></span></code></pre></div><p><code>&lt;output-artifact-configuration></code> æŒ‡çš„æ˜¯ï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span>&lt;TYPE&gt; [DESTINATION &lt;dir&gt;] [PERMISSIONS permissions...]
</span></span><span style=display:flex><span>       [CONFIGURATIONS [Debug|Release|...]]
</span></span><span style=display:flex><span>       [COMPONENT &lt;component&gt;]
</span></span><span style=display:flex><span>       [NAMELINK_COMPONENT &lt;component&gt;]
</span></span><span style=display:flex><span>       [OPTIONAL] [EXCLUDE_FROM_ALL]
</span></span><span style=display:flex><span>       [NAMELINK_ONLY|NAMELINK_SKIP]
</span></span></code></pre></div><p>å…¶ä¸­çš„ <code>&lt;TYPE></code> å¯ä»¥æ˜¯ï¼š</p><ol><li><code>ARCHIVE</code> é™æ€åº“ï¼ˆStatic libraries (.a) and DLL import libraries for Windows-based systems (.lib)ï¼‰</li><li><code>LIBRARY</code> åŠ¨æ€åº“ï¼ˆShared libraries (.so), but not DLLsï¼‰</li><li><code>RUNTIME</code> å¯æ‰§è¡Œæ–‡ä»¶å’Œ DLLsã€‚</li><li><code>OBJECT</code> ç›®æ ‡æ–‡ä»¶</li><li><code>FRAMEWORK</code> macOS ä¸“å±</li><li><code>BUNDLE</code> macOS ä¸“å±</li><li><code>PUBLIC_HEADER</code>, <code>PRIVATE_HEADER</code>, <code>RESOURCE</code></li></ol><p>ä¸€ä¸ª target å¯ä»¥åŒæ—¶æŒ‡å®šå®‰è£…å¤šä¸ª typesã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ‰ä¸ª target å¯èƒ½æ—¢éœ€è¦å®‰è£…é™æ€åº“ï¼Œåˆéœ€è¦å®‰è£…åŠ¨æ€åº“ï¼ŒåŒæ—¶è¿˜å®‰è£…å¤´æ–‡ä»¶ã€‚å¦‚æœä¸€ä¸ª target è¢«æŒ‡å®šäº†éœ€è¦å®‰è£…æŸä¸€ç±»æˆå“ï¼ˆæ¯”å¦‚è®¾ç½®äº† <code>PUBLIC_HEADER</code> å±æ€§ï¼‰ï¼Œä½†æ˜¯è¿™ä¸ªæˆå“æ²¡æœ‰åœ¨ <code>install</code> å‘½ä»¤ä¸­ç»™å‡ºé…ç½®ï¼Œé‚£ä¹ˆåœ¨ 3.20.0 ä¹‹å‰å°±ä¼šå¿½ç•¥å®ƒçš„å®‰è£…ï¼Œè€Œåœ¨è¿™ä¹‹ååˆ™æ˜¯ä½¿ç”¨é»˜è®¤é…ç½®å®‰è£…ã€‚å‚è€ƒï¼š</p><blockquote><p>The CMake documentation claims that if you only configure one artifact type (for example, <code>LIBRARY</code>), only this type will be installed. For CMake version 3.20.0, this is not true: all the artifacts will be installed as if they were configured with the default options. This can be solved by specifying <code>&lt;TYPE> EXCLUDE_FROM_ALL</code> for all unwanted artifact types.</p></blockquote><p>è¿™ä¸ªå‘½ä»¤ä¹Ÿæœ‰å±€é™æ€§ï¼Œæ¯”å¦‚è™½ç„¶ <code>CONFIGURATIONS</code> æ˜¯å¯ä»¥å¯¹æ¯ä¸ªæˆå“ç±»å‹å•ç‹¬è®¾ç½®ï¼Œä½†æ˜¯ä¸€ä¸ªæˆå“ç±»å‹åªèƒ½åœ¨ <code>install</code> å‘½ä»¤ä¸­å‡ºç°ä¸€æ¬¡ã€‚ä¹Ÿå°±æ˜¯è¯´æƒ³è¦å¯¹ Debug å’Œ Release ä¸¤ç§é…ç½®å•ç‹¬è®¾ç½®æŸç§æˆå“çš„å®‰è£…æ–¹å¼ï¼Œéœ€è¦ä¸¤æ¡ <code>install</code> å‘½ä»¤ï¼Œä¸èƒ½æ”¾åœ¨ä¸€èµ·å†™ã€‚</p><p><img src=/assets/4a429e2c96abfb245883b6fd8e556f15.webp></p><p>ä¸Šé¢çš„è¿™äº›å˜é‡ä¹Ÿèƒ½å¤Ÿé€šè¿‡å‘½ä»¤è¡Œè®¾ç½®ï¼ˆå¤§æ¦‚æ˜¯å› ä¸ºå®ƒä»¬æ˜¯ cached å˜é‡ï¼‰ã€‚</p><h2 id=gnuinstalldirs><code>GNUInstallDirs</code>
<a class=header-anchor href=#gnuinstalldirs></a></h2><p>CMake æœ‰ä¸€ä¸ª <code>GNUInstallDirs</code> æ¨¡å—ã€‚è¿™ä¸ªæ¨¡å—å¯ä»¥æ£€æŸ¥ GNU å¹³å°çš„ç§ç±»ï¼ˆæ¯”å¦‚è¯´æœ‰äº›ç³»ç»Ÿå¹¶ä¸æ˜¯å®‰è£…åœ¨ <code>/usr/local</code> ä¸­æ¯”è¾ƒå¥½ï¼‰ï¼Œå¹¶æ­£ç¡®è®¾ç½®å¥½å’Œå®‰è£…è·¯å¾„ç›¸å…³çš„å˜é‡ã€‚åœ¨å®‰è£…ä¹‹å‰ <code>include</code> ä¸€ä¸‹å°±è¡Œäº†ã€‚</p><h2 id=å¤„ç†-public-headers>å¤„ç† public headers
<a class=header-anchor href=#%e5%a4%84%e7%90%86-public-headers></a></h2><blockquote><p>The <code>install(TARGETS)</code> documentation recommends that we specify public headers (as a semicolon-separated list) in the <code>PUBLIC_HEADER</code> property of the library target.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#b58900>add_library</span>(<span style=color:#2aa198>calc</span> <span style=color:#2aa198>STATIC</span> <span style=color:#2aa198>calc.cpp</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>target_include_directories</span>(<span style=color:#2aa198>calc</span> <span style=color:#2aa198>INTERFACE</span> <span style=color:#2aa198>include</span>)
</span></span><span style=display:flex><span><span style=color:#586e75># ä¹Ÿå¯ä»¥ç›´æ¥è®¾ç½® INTERFACE_ å¼€å¤´çš„å˜é‡
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#b58900>set_target_properties</span>(<span style=color:#2aa198>calc</span> <span style=color:#2aa198>PROPERTIES</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>PUBLIC_HEADER</span> <span style=color:#2aa198>src/include/calc/calc.h</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>å› ä¸ºè®¾ç½®äº† calc è¿™ä¸ª target çš„ <code>PUBLIC_HEADER</code> å±æ€§ï¼Œè¿™ä¸‹ç”¨ install å®‰è£… calc çš„æ—¶å€™ï¼Œåªè¦æŒ‡å®š <code>PUBLIC_HEADER</code> ä¹Ÿèƒ½å°†è¿™äº›å¤´æ–‡ä»¶ä¹Ÿä¸€èµ·å®‰è£…ã€‚</p><p>ä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦è§£å†³ä¸€ä¸ªé—®é¢˜ï¼ŒCMake çš„é»˜è®¤å®‰è£…ä½ç½®å¾ˆå¯èƒ½ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚å°¤å…¶æ˜¯ç›´æ¥å°†å¤´æ–‡ä»¶è£¸éœ²åœ¨ /usr/local/include é‡Œé¢è¿™ä¸€ç‚¹ã€‚åŒ…å« <code>GNUInstallDirs</code> æ¨¡å—ä¹‹åï¼Œ<code>CMAKE_INSTALL_INCLUDEDIR</code> ä¼šè¢«é‡è®¾ã€‚ç„¶åæˆ‘ä»¬æ ¹æ®å®ƒæ³¨æ˜æˆ‘ä»¬è¦å®‰è£…çš„ä½ç½®ï¼ˆå‚æ•° <code>DESTINATION</code>ï¼‰ï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#b58900>cmake_minimum_required</span>(<span style=color:#2aa198>VERSION</span> <span style=color:#2aa198>3.20.0</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>project</span>(<span style=color:#2aa198>InstallTargets</span> <span style=color:#2aa198>CXX</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>add_subdirectory</span>(<span style=color:#2aa198>src</span> <span style=color:#2aa198>bin</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>include</span>(<span style=color:#2aa198>GNUInstallDirs</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>install</span>(<span style=color:#2aa198>TARGETS</span> <span style=color:#2aa198>calc</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>ARCHIVE</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>PUBLIC_HEADER</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>DESTINATION</span> <span style=color:#719e07>${</span><span style=color:#268bd2>CMAKE_INSTALL_INCLUDEDIR</span><span style=color:#719e07>}</span><span style=color:#2aa198>/calc</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><div class="markdown-alert markdown-alert-note"><p class=markdown-alert-title><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1116 0A8 8 0 010 8zm8-6.5a6.5 6.5.0 100 13 6.5 6.5.0 000-13zM6.5 7.75A.75.75.0 017.25 7h1a.75.75.0 01.75.75v2.75h.25a.75.75.0 010 1.5h-2a.75.75.0 010-1.5h.25v-2h-.25a.75.75.0 01-.75-.75zM8 6a1 1 0 110-2 1 1 0 010 2z"/></svg>Note</p><p>åœ¨ Debian 12 ä¸Šæµ‹è¯•ï¼Œ<code>CMAKE_INSTALL_INCLUDEDIR</code> éƒ½æ˜¯ includeã€‚æ‹¼æ¥ä¸Šé»˜è®¤çš„å‰ç¼€è·¯å¾„å°±æ˜¯ usr/local/includeã€‚</p></div><p>è¿™ä¸ªå˜é‡ä¼¼ä¹åœ¨æ‰€æœ‰å¹³å°ä¸Šå…¶å®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›å˜é‡åœ¨ä¸åŒå¹³å°ä¸Šè¡¨ç°ä¸åŒï¼Œæ¯”å¦‚ï¼š</p><blockquote><p><code>CMAKE_INSTALL_LIBDIR</code> will vary by architecture and distribution â€“ <code>lib</code>, <code>lib64</code>, or <code>lib/&lt;multiarch-tuple></code>.</p></blockquote><p>ä¹¦ä¸Šç»™å‡ºçš„è¿è¡Œç»“æœï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#586e75># cmake -S &lt;source-tree&gt; -B &lt;build-tree&gt;</span>
</span></span><span style=display:flex><span><span style=color:#586e75># cmake --build &lt;build-tree&gt;</span>
</span></span><span style=display:flex><span><span style=color:#586e75># cmake --install &lt;build-tree&gt;</span>
</span></span><span style=display:flex><span>-- Install configuration: <span style=color:#2aa198>&#34;&#34;</span>
</span></span><span style=display:flex><span>-- Installing: /usr/local/lib/libcalc.a
</span></span><span style=display:flex><span>-- Installing: /usr/local/include/calc/calc.h
</span></span></code></pre></div><p>ç”±äºç‰ˆæœ¬æ¯”è¾ƒæ–°ï¼Œè€Œä¸”æ²¡æœ‰æŒ‡å®šé™æ€åº“æˆå“çš„å®‰è£…æ–¹å¼ï¼Œæ‰€ä»¥æŒ‰ç…§é»˜è®¤æ–¹å¼å®‰è£…äº†ã€‚</p><p>è¿™ç§åŸºäº target çš„å®‰è£…æ„Ÿè§‰æ¯”åŸºäºå…¶ä»–æ–¹å¼çš„å®‰è£…æ›´åŠ çµæ´»å’Œæ–¹ä¾¿ï¼Œæ¯•ç«Ÿæ˜¯æŠŠå¾ˆå¤šæˆå“éƒ½æ†ç»‘åœ¨ä¸€èµ·äº†ã€‚ä½†æ˜¯ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œæ¯”å¦‚å¿…é¡»è¦ç»™å‡ºæ‰€æœ‰çš„å¤´æ–‡ä»¶ï¼Œæ‰‹åŠ¨åˆ—ä¸¾å®¹æ˜“å½¢æˆè¶…é•¿çš„åˆ—è¡¨ã€‚è€Œä¸”æ‰€æœ‰å¤´æ–‡ä»¶éƒ½è¢«å®‰è£…åœ¨äº†åŒä¸€ä¸ªç›®å½•ï¼Œä¸¢å¤±äº†å±‚çº§å…³ç³»ï¼š</p><div class="markdown-alert markdown-alert-warning"><p class=markdown-alert-title><svg class="octicon octicon-alert mr-2" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086.0l6.082 11.378A1.75 1.75.0 0114.082 15H1.918A1.75 1.75.0 01.375 12.425zm1.763.707a.25.25.0 00-.44.0L1.698 13.132a.25.25.0 00.22.368h12.164a.25.25.0 00.22-.368zm.53 3.996v2.5a.75.75.0 01-1.5.0v-2.5a.75.75.0 011.5.0zM9 11a1 1 0 11-2 0 1 1 0 012 0z"/></svg>Warning</p><p>This works well for this basic case, but there&rsquo;s a slight drawback: files specified in this way don&rsquo;t retain their directory structure. They will all be installed in the same destination, even if they&rsquo;re nested in different base directories.</p></div><p>åœ¨ CMake 3.23.0 ä¹‹åï¼Œ<code>target_sources</code> æœ‰æ–°é€‰é¡¹ <code>FILE_SET</code> å¯ä»¥æ›´å¥½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><h1 id=installfilesprograms><code>install(FILES|PROGRAMS)</code>
<a class=header-anchor href=#installfilesprograms></a></h1><p>ç­¾åï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#b58900>install</span>(<span style=color:#2aa198>&lt;FILES|PROGRAMS&gt;</span> <span style=color:#2aa198>files...</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>TYPE</span> <span style=color:#2aa198>&lt;type&gt;</span> <span style=color:#2aa198>|</span> <span style=color:#2aa198>DESTINATION</span> <span style=color:#2aa198>&lt;dir&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[PERMISSIONS</span> <span style=color:#2aa198>permissions...]</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[CONFIGURATIONS</span> <span style=color:#2aa198>[Debug|Release|...]]</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[COMPONENT</span> <span style=color:#2aa198>&lt;component&gt;]</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[RENAME</span> <span style=color:#2aa198>&lt;name&gt;]</span> <span style=color:#2aa198>[OPTIONAL]</span> <span style=color:#2aa198>[EXCLUDE_FROM_ALL]</span>)
</span></span></code></pre></div><p>è¿™ä¸¤å‘½ä»¤éå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯è®¾ç½®çš„é»˜è®¤æƒé™ä¸åŒï¼Œä¸»è¦æ˜¯ <code>PROGRAMS</code> ä¼šè®¾ç½®å†™æƒé™ã€‚ä¸‹é¢æ˜¯ä¸åŒç±»å‹å’Œé»˜è®¤çš„å®‰è£…ä½ç½®ã€‚</p><p><img src=/assets/01e051f3683d45def6221e2a53e1630e.webp></p><h1 id=installdirectory><code>install(DIRECTORY)</code>
<a class=header-anchor href=#installdirectory></a></h1><p>ç­¾åï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#b58900>install</span>(<span style=color:#2aa198>DIRECTORY</span> <span style=color:#2aa198>dirs...</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>TYPE</span> <span style=color:#2aa198>&lt;type&gt;</span> <span style=color:#2aa198>|</span> <span style=color:#2aa198>DESTINATION</span> <span style=color:#2aa198>&lt;dir&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[FILE_PERMISSIONS</span> <span style=color:#2aa198>permissions...]</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[DIRECTORY_PERMISSIONS</span> <span style=color:#2aa198>permissions...]</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[USE_SOURCE_PERMISSIONS]</span> <span style=color:#2aa198>[OPTIONAL]</span> <span style=color:#2aa198>[MESSAGE_NEVER]</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[CONFIGURATIONS</span> <span style=color:#2aa198>[Debug|Release|...]]</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[COMPONENT</span> <span style=color:#2aa198>&lt;component&gt;]</span> <span style=color:#2aa198>[EXCLUDE_FROM_ALL]</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[FILES_MATCHING]</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[[PATTERN</span> <span style=color:#2aa198>&lt;pattern&gt;</span> <span style=color:#2aa198>|</span> <span style=color:#2aa198>REGEX</span> <span style=color:#2aa198>&lt;regex&gt;]</span> <span style=color:#2aa198>[EXCLUDE]</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[PERMISSIONS</span> <span style=color:#2aa198>permissions...]]</span> <span style=color:#2aa198>[...]</span>
</span></span></code></pre></div><p><code>TYPE</code> é€‰é¡¹å’Œ <code>install(FILES|PROGRAMS)</code> æ˜¯ä¸€æ ·çš„ã€‚</p><p>æœ‰ä¸ªå°ç»†èŠ‚éœ€è¦æ³¨æ„ï¼š<strong>å¦‚æœç»™çš„ç›®å½•æ²¡æœ‰ä»¥ / ç»“å°¾ï¼Œå°†ä¼šå°†ç›®å½•æœ¬èº«å¤åˆ¶åˆ°ç›®çš„ä½ç½®ã€‚å¦‚æœä»¥ / ç»“å°¾ï¼Œå°†ä¼šæŠŠç›®å½•ä¸­çš„å†…å®¹å¤åˆ¶åˆ°ç›®çš„ä½ç½®ï¼Œè¿™ä¸ªå’Œ rsync çš„æ‹·è´æœ‰ç›¸åŒä¹‹å¤„</strong>ï¼</p><blockquote><p>There&rsquo;s one detail worth noting: if the paths that are provided after the <code>DIRECTORY</code> keyword do not end with /, the last directory of the path will be appended to the destination, like so:</p><p><code>install(DIRECTORY a DESTINATION /x)</code></p><p>This will create a directory called <strong>/x/a</strong> and copy the contents of a to it. Now, look at the following code:</p><p><code>install(DIRECTORY a/ DESTINATION /x)</code></p><p>This will copy the contents of a <strong>directly to /x</strong>.</p></blockquote><p>ä½¿ç”¨è¿™ä¸ªæ¨¡å¼çš„æ—¶å€™å¯ä»¥ç”¨ <code>DIRECTORY_PERMISSIONS</code> å‚æ•°è®¾ç½®æ–‡ä»¶å¤¹çš„ <code>x</code> æƒé™ã€‚è¿™æ˜¯å› ä¸ºæ–‡ä»¶å¤¹çš„ <code>x</code> æƒé™è¡¨ç¤ºç”¨æˆ·æ˜¯å¦èƒ½å¤Ÿè¿›å…¥ç›®å½•å’Œåˆ—ä¸¾ç›®å½•å†…å®¹ï¼Œæ˜¯å’Œæ–‡ä»¶æœ‰ä¸€ç‚¹ä¸åŒçš„ã€‚</p><p>è¿˜èƒ½è¿‡æ»¤ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚å¯ä»¥ç”¨ <code>PATTERN</code> æ¥åŒ¹é… glob è¡¨è¾¾å¼ï¼ˆ<strong>ä»¥ç»™å®šçš„ parttern ç»“å°¾</strong>çš„æ‰€æœ‰æ–‡ä»¶åéƒ½ä¼šè¢«åŒ¹é…ä¸Šï¼‰ï¼Œæˆ–è€…ç”¨ <code>REGEX</code> æ¥åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ã€‚ç”¨ <code>FILES_MATCHING</code> æ¥é€‰æ‹©æ–‡ä»¶ï¼ˆä½†æ˜¯ä¸ä¼šæ’é™¤ç›®å½•ï¼Œå› è€Œç›®å½•ç»“æ„ä¼šè¢«ä¿ç•™ï¼‰ã€‚ç”¨ <code>EXCLUDE</code> æ¥æ’é™¤ä¸€éƒ¨åˆ†å·²ç»åŒ¹é…ä¸Šçš„å†…å®¹ã€‚</p><h1 id=installscriptcode><code>install(SCRIPT|CODE)</code>
<a class=header-anchor href=#installscriptcode></a></h1><p><strong>åœ¨å®‰è£…çš„æ—¶å€™æ‰§è¡Œä»£ç </strong>ã€‚è¿™é‡Œçš„ä»£ç å¾—æ˜¯ CMake çš„ä»£ç ï¼Œå¹¶ä¸æ˜¯ shell çš„ä»£ç ï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#b58900>cmake_minimum_required</span>(<span style=color:#2aa198>VERSION</span> <span style=color:#2aa198>3.20.0</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>project</span>(<span style=color:#2aa198>InstallCode</span> <span style=color:#2aa198>CXX</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>add_subdirectory</span>(<span style=color:#2aa198>src</span> <span style=color:#2aa198>bin</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#b58900>include</span>(<span style=color:#2aa198>GNUInstallDirs</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>install</span>(<span style=color:#2aa198>TARGETS</span> <span style=color:#2aa198>calc</span> <span style=color:#2aa198>LIBRARY</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>PUBLIC_HEADER</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>DESTINATION</span> <span style=color:#719e07>${</span><span style=color:#268bd2>CMAKE_INSTALL_INCLUDEDIR</span><span style=color:#719e07>}</span><span style=color:#2aa198>/calc</span>
</span></span><span style=display:flex><span>       )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#b58900>if</span> (<span style=color:#2aa198>UNIX</span>)
</span></span><span style=display:flex><span>  <span style=color:#b58900>install</span>(<span style=color:#2aa198>CODE</span> <span style=color:#2aa198>&#34;execute_process(COMMAND ldconfig)&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>endif</span>()
</span></span></code></pre></div><p>è¿™é‡Œçš„ <code>"execute_process(COMMAND ldconfig)"</code> åªèƒ½ç”¨å¥‡å¼‚æ¥å½¢å®¹ã€‚</p><p>ä¹Ÿå¯ä»¥ç”¨ <code>install(SCRIPT)</code>ï¼Œä½†æ˜¯å®ƒçš„å‚æ•°æ˜¯ CMake è„šæœ¬æ–‡ä»¶çš„è·¯å¾„è€Œä¸æ˜¯ä»£ç å­—ç¬¦ä¸²ã€‚</p><h1 id=installexport><code>install(EXPORT)</code>
<a class=header-anchor href=#installexport></a></h1><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#b58900>install</span>(<span style=color:#2aa198>EXPORT</span> <span style=color:#2aa198>&lt;export-name&gt;</span> <span style=color:#2aa198>DESTINATION</span> <span style=color:#2aa198>&lt;dir&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[NAMESPACE</span> <span style=color:#2aa198>&lt;namespace&gt;]</span> <span style=color:#2aa198>[[FILE</span> <span style=color:#2aa198>&lt;name&gt;.cmake]|</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[PERMISSIONS</span> <span style=color:#2aa198>permissions...]</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[CONFIGURATIONS</span> <span style=color:#2aa198>[Debug|Release|...]]</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[EXPORT_LINK_INTERFACE_LIBRARIES]</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[COMPONENT</span> <span style=color:#2aa198>&lt;component&gt;]</span>
</span></span><span style=display:flex><span>        <span style=color:#2aa198>[EXCLUDE_FROM_ALL]</span>)
</span></span></code></pre></div><blockquote><p>It&rsquo;s a combination of &ldquo;plain&rdquo; <code>export(EXPORT)</code> and other <code>install()</code> commands.</p></blockquote><div class="markdown-alert markdown-alert-note"><p class=markdown-alert-title><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1116 0A8 8 0 010 8zm8-6.5a6.5 6.5.0 100 13 6.5 6.5.0 000-13zM6.5 7.75A.75.75.0 017.25 7h1a.75.75.0 01.75.75v2.75h.25a.75.75.0 010 1.5h-2a.75.75.0 010-1.5h.25v-2h-.25a.75.75.0 01-.75-.75zM8 6a1 1 0 110-2 1 1 0 010 2z"/></svg>Note</p><p>å¥½åƒèƒ½ä½¿ç”¨çš„ <code>EXPORT</code> å‚æ•°çš„ <code>install()</code> å‘½ä»¤é™¤äº† <code>install(EXPORT)</code> æœ¬èº«ä¹Ÿå°±åªæœ‰ <code>install(TARGETS)</code> äº†ã€‚</p></div><p>è¿™ä¸ªå‘½ä»¤æ˜¯ç”¨æ¥å®‰è£… export æ–‡ä»¶çš„ã€‚ç”¨ <code>export</code> æˆ–è€… <code>install(TARGETS ... EXPORT)</code> å¯ä»¥ç”Ÿæˆ export æ–‡ä»¶ã€‚è¿™ä¸ªå‘½ä»¤ä¸ä¼šåœ¨æ„å»ºæ—¶åœ¨ binary tree é‡Œäº§ç”Ÿæ–‡ä»¶å“¦ï¼</p><h1 id=å†™-config-file>å†™ Config file
<a class=header-anchor href=#%e5%86%99-config-file></a></h1><h2 id=basic-config-file>Basic config file
<a class=header-anchor href=#basic-config-file></a></h2><blockquote><p>A complete package definition consists of the <strong>target export files</strong>, the package&rsquo;s <strong>config file</strong>, and the package&rsquo;s <strong>version file</strong>, but technically, all that&rsquo;s needed for <code>find_package()</code> to work is a config-file.</p></blockquote><p>Config file çš„å‘½åï¼š<code>&lt;PackageName>-config.cmake</code> or <code>&lt;PackageName>Config.cmake</code>ã€‚æœç´¢è·¯å¾„æœ‰å¾ˆå¤šï¼Œä¸€èˆ¬å¯ä»¥æ”¾åœ¨ <code>${CMAKE_INSTALL_LIBDIR}/&lt;PackageName>/cmake/</code> ä¸‹ã€‚</p><p>æœ€ç®€å•çš„ config file å°±æ˜¯ç›´æ¥å°† target export files å¼•ç”¨è¿›æ¥ï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#586e75># CMakeLists.txt
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#b58900>install</span>(<span style=color:#2aa198>EXPORT</span> <span style=color:#2aa198>CalcTargets</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>DESTINATION</span> <span style=color:#719e07>${</span><span style=color:#268bd2>CMAKE_INSTALL_LIBDIR</span><span style=color:#719e07>}</span><span style=color:#2aa198>/calc/cmake</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>NAMESPACE</span> <span style=color:#2aa198>Calc::</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#b58900>install</span>(<span style=color:#2aa198>FILES</span> <span style=color:#2aa198>&#34;CalcConfig.cmake&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>DESTINATION</span> <span style=color:#719e07>${</span><span style=color:#268bd2>CMAKE_INSTALL_LIBDIR</span><span style=color:#719e07>}</span><span style=color:#2aa198>/calc/cmake</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#586e75># CalcConfig.cmake
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#b58900>include</span>(<span style=color:#2aa198>&#34;${CMAKE_CURRENT_LIST_DIR}/CalcTargets.cmake&#34;</span>)
</span></span></code></pre></div><h2 id=advanced-config-file>Advanced config file
<a class=header-anchor href=#advanced-config-file></a></h2><p>æ›´é«˜çº§ä¸€ç‚¹çš„æ˜¯ä¸è‡ªå·±å†™ CalcConfig.cmakeï¼Œè€Œæ˜¯æä¾›æ¨¡æ¿ CalcConfig.cmake.in æ–‡ä»¶ï¼ˆä¸€èˆ¬æŒ‰ç…§è¿™ç§æ–¹å¼å‘½åï¼‰ã€‚</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#b58900>cmake_minimum_required</span>(<span style=color:#2aa198>VERSION</span> <span style=color:#2aa198>3.20.0</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>project</span>(<span style=color:#2aa198>AdvancedConfig</span> <span style=color:#2aa198>CXX</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>include</span>(<span style=color:#2aa198>GNUInstallDirs</span>) <span style=color:#586e75># so it&#39;s available in ./src/
</span></span></span><span style=display:flex><span><span style=color:#586e75></span><span style=color:#b58900>add_subdirectory</span>(<span style=color:#2aa198>src</span> <span style=color:#2aa198>bin</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#b58900>install</span>(<span style=color:#2aa198>TARGETS</span> <span style=color:#2aa198>calc</span> <span style=color:#2aa198>EXPORT</span> <span style=color:#2aa198>CalcTargets</span> <span style=color:#2aa198>ARCHIVE</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>PUBLIC_HEADER</span> <span style=color:#2aa198>DESTINATION</span> <span style=color:#719e07>${</span><span style=color:#268bd2>CMAKE_INSTALL_INCLUDEDIR</span><span style=color:#719e07>}</span><span style=color:#2aa198>/calc</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#b58900>install</span>(<span style=color:#2aa198>EXPORT</span> <span style=color:#2aa198>CalcTargets</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>DESTINATION</span> <span style=color:#719e07>${</span><span style=color:#268bd2>CMAKE_INSTALL_LIBDIR</span><span style=color:#719e07>}</span><span style=color:#2aa198>/calc/cmake</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>NAMESPACE</span> <span style=color:#2aa198>Calc::</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#586e75># åˆ°è¿™ä¸€æ­¥å·²ç»æœ‰äº† target export fileï¼Œä½†æ˜¯æ²¡æœ‰ config file
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>
</span></span><span style=display:flex><span><span style=color:#b58900>include</span>(<span style=color:#2aa198>CMakePackageConfigHelpers</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>set</span>(<span style=color:#2aa198>LIB_INSTALL_DIR</span> <span style=color:#719e07>${</span><span style=color:#268bd2>CMAKE_INSTALL_LIBDIR</span><span style=color:#719e07>}</span><span style=color:#2aa198>/calc</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>configure_package_config_file</span>(
</span></span><span style=display:flex><span>  <span style=color:#719e07>${</span><span style=color:#268bd2>CMAKE_CURRENT_SOURCE_DIR</span><span style=color:#719e07>}</span><span style=color:#2aa198>/CalcConfig.cmake.in</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>&#34;${CMAKE_CURRENT_BINARY_DIR}/CalcConfig.cmake&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>INSTALL_DESTINATION</span> <span style=color:#719e07>${</span><span style=color:#268bd2>CMAKE_INSTALL_LIBDIR</span><span style=color:#719e07>}</span><span style=color:#2aa198>/calc/cmake</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>PATH_VARS</span> <span style=color:#2aa198>LIB_INSTALL_DIR</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#586e75># åˆ°è¿™ä¸€æ­¥å·²ç»æ ¹æ®æ¨¡æ¿æ–‡ä»¶åˆ›å»ºäº† config file
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>
</span></span><span style=display:flex><span><span style=color:#b58900>install</span>(<span style=color:#2aa198>FILES</span> <span style=color:#2aa198>&#34;${CMAKE_CURRENT_BINARY_DIR}/CalcConfig.cmake&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>DESTINATION</span> <span style=color:#719e07>${</span><span style=color:#268bd2>CMAKE_INSTALL_LIBDIR</span><span style=color:#719e07>}</span><span style=color:#2aa198>/calc/cmake</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>ä¸€èˆ¬ä½¿ç”¨ <a href=https://cmake.org/cmake/help/latest/module/CMakePackageConfigHelpers.html title=CMakePackageConfigHelpers rel="noopener external nofollow noreferrer" target=_blank class=exturl><code>CMakePackageConfigHelpers</code><i class="fa fa-external-link-alt"></i></a> æ¨¡å—æ¥å¸®åŠ©å®Œæˆè¿™ä¸ªæ“ä½œã€‚ä½¿ç”¨ <a href=https://cmake.org/cmake/help/latest/module/CMakePackageConfigHelpers.html#command:configure_package_config_file title rel="noopener external nofollow noreferrer" target=_blank class=exturl><i class="fa fa-external-link-alt"></i></a> å’Œ <code>install</code> åˆ†äº†ä¸¤éƒ¨ï¼Œè€Œä¸æ˜¯ä¸€å£æ°”å®‰è£…åˆ°ç³»ç»Ÿç›®å½•ï¼Œè¿™æ˜¯å› ä¸º configure çš„æ—¶å€™ä¸ç¡®å®šç”¨æˆ·æ˜¯å¦éœ€è¦å®‰è£…ï¼Œæ‰€ä»¥ä¸èƒ½è½»æ˜“å®‰è£…ã€‚åªæœ‰ç”¨æˆ·ä½¿ç”¨ <code>cmake --install</code> å¯åŠ¨å®‰è£…è¿‡ç¨‹æ—¶ï¼Œæ‰åº”è¯¥å°†å…¶å®‰è£…åˆ°ç³»ç»Ÿã€‚å¦å¤–å°±æ˜¯åœ¨ configure çš„æ—¶å€™å°±è¦æ˜ç¡®ç›®çš„å®‰è£…è·¯å¾„äº†ï¼Œå› ä¸ºå¯èƒ½æœ‰äº›å®‰è£…æ–‡ä»¶æ˜¯è¦ç¡¬ç¼–ç æœ€ç»ˆçš„å®‰è£…è·¯å¾„çš„ã€‚</p><p><code>PATH_VARS</code> æ˜¯æˆ‘ä»¬è¦ä»å½“å‰çš„ CMake è„šæœ¬å‘ <code>*.cmake.in</code> æ–‡ä»¶ä¼ é€’çš„å˜é‡ï¼Œè¿™äº›å˜é‡å¯ä»¥åœ¨æ¨¡æ¿æ–‡ä»¶ä¸­å¼•ç”¨ã€‚å¹¶ä¸”è¿™ä¸ªå‡½æ•°ä¼šå¯¹æˆ‘ä»¬ä¼ å…¥çš„å˜é‡é‡æ–°è®¡ç®—ï¼Œæ­£ç¡®å¤„ç†å¥½ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„ã€‚æ¯”å¦‚ä¸Šé¢ä»£ç ä¸­ä¼ å…¥çš„æ˜¯ <code>LIB_INSTALL_DIR</code>ï¼Œåœ¨æ¨¡æ¿æ–‡ä»¶ä¸­å¯ä»¥ç”¨ <code>@PACKAGE_LIB_INSTALL_DIR@</code> æ¥å¼•ç”¨ï¼Œæ³¨æ„æœ‰ä¸€ä¸ª <code>PACKAGE</code> å‰ç¼€ã€‚å¦‚æœä¼ å…¥çš„æ˜¯ <code>calc</code>ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰ï¼Œä¼šè¢«å±•å¼€ä¸º <code>${PACKAGE_PREFIX_DIR}/calc</code>ï¼›ä¼ å…¥çš„æ˜¯ <code>/calc</code>ï¼ˆç»å¯¹è·¯å¾„ï¼‰ï¼Œä¼šè¢«å±•å¼€ä¸º <code>/calc</code>ï¼ˆä¸åšè·¯å¾„æ‹¼æ¥ï¼‰ã€‚</p><p>æ¨¡æ¿æ–‡ä»¶å†™æ³•å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span>@PACKAGE_INIT@
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#b58900>set_and_check</span>(<span style=color:#2aa198>CALC_LIB_DIR</span> <span style=color:#2aa198>&#34;@PACKAGE_LIB_INSTALL_DIR@&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>include</span>(<span style=color:#2aa198>&#34;${CALC_LIB_DIR}/cmake/CalcTargets.cmake&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#b58900>check_required_components</span>(<span style=color:#2aa198>Calc</span>)
</span></span></code></pre></div><p>å¼€å¤´æœ‰ä¸€ä¸ªå›ºå®šçš„ <code>@PACKAGE_INIT@</code> å¤´ã€‚<code>set_and_check</code> å’Œ <code>check_required_components</code> éƒ½æ˜¯ <code>configure_package_config_file</code> æä¾›çš„å®ï¼Œä¼šåœ¨ <code>@PACKAGE_INIT@</code> å±•å¼€çš„æ—¶å€™è¡¥å……å‡ºæ¥ã€‚å¥½åƒç›®å‰ç‰ˆæœ¬é‡Œå°±åªæä¾›äº†è¿™ä¸¤ä¸ªå®ã€‚</p><p><code>set_and_check</code> ä¼šåœ¨è®¾ç½®å˜é‡åæ£€æŸ¥å®ƒæ˜¯å¦ä¸ºä¸€ä¸ªåœ¨æ“ä½œç³»ç»Ÿä¸Šå­˜åœ¨çš„è·¯å¾„ï¼Œä¸å­˜åœ¨åˆ™æŠ¥é”™ã€‚<code>check_required_components</code> çš„å‚æ•°æ˜¯å½“å‰åŒ…çš„åå­—ï¼Œå®ƒä¼šæ ¹æ® CMake çš„ find_package è°ƒç”¨è§„å®šæ£€æŸ¥ä¼ æ¥çš„ COMPONENTS æ˜¯å¦å…¨éƒ¨è¢«æ‰¾åˆ°äº†ï¼ˆä»¥ FOUND ä¸ºåç¼€çš„å˜é‡æ˜¯å¦ä¸ºçœŸï¼‰ï¼Œæ²¡æœ‰æ‰¾åˆ°åˆ™æŠ¥é”™ã€‚æ‰€ä»¥è¿™ä¸ªå®è¦æ”¾åœ¨æ•´ä¸ªæ¨¡æ¿æ–‡ä»¶çš„æœ€åä½¿ç”¨ã€‚</p><p>åŸºæœ¬ä¸Šä¸€å¤´ä¸€å°¾æ˜¯å›ºå®šçš„ï¼Œä¸­é—´æ˜¯ä¸€äº› include å’Œå˜é‡è®¾ç½®ã€‚</p><p>å¦‚æœæœ‰ä¸€äº›å¿…é¡»è¦æ»¡è¶³çš„ä¾èµ–å¯ä»¥ä½¿ç”¨ <code>CMakeFindDependencyMacro</code> ä¸­çš„ <code>find_dependency()</code> å»æ‰¾ï¼Œæ³¨æ„è¿™ä¸ªå®æœ‰æ‰¾ä¸åˆ°å°±è¿”å›çš„æ€§è´¨ã€‚è¿™ä¸ªå‡½æ•°åœ¨
<a href=/modern-cmake-for-cpp/chapter07-managing-dependencies/ title="chapter07 - managing dependencies">chapter07 - managing dependencies</a> å·²ç»æåˆ°è¿‡äº†ã€‚</p><h2 id=version-file>Version file
<a class=header-anchor href=#version-file></a></h2><p><code>CMakePackageConfigHelpers</code> è¿˜æä¾›äº†ç”Ÿæˆ version æ–‡ä»¶çš„åŠŸèƒ½ã€‚æœ‰äº† versionï¼Œç”¨æˆ·å°±èƒ½åƒè¿™æ ·æ¥æŸ¥æ‰¾åŒ…ï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#b58900>find_package</span>(<span style=color:#2aa198>Calc</span> <span style=color:#2aa198>1.2.3</span> <span style=color:#2aa198>REQUIRED</span>)
</span></span></code></pre></div><blockquote><p>CMake will then search the config-file for Calc and check if a version file named <code>&lt;config-file>-version.cmake</code> or <code>&lt;config-file>Version.cmake</code> is present in the same directory, that is, <code>CalcConfigVersion.cmake</code>.</p></blockquote><p><code>write_basic_package_version_file</code> çš„ç”¨æ³•ï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#b58900>write_basic_package_version_file</span>(<span style=color:#2aa198>&lt;filename&gt;</span> <span style=color:#2aa198>[VERSION</span> <span style=color:#2aa198>&lt;ver&gt;]</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>COMPATIBILITY</span> <span style=color:#2aa198>&lt;AnyNewerVersion</span>  <span style=color:#2aa198>|</span> <span style=color:#2aa198>SameMajorVersion</span> <span style=color:#2aa198>|</span>
</span></span><span style=display:flex><span>                 <span style=color:#2aa198>SameMinorVersion</span> <span style=color:#2aa198>|</span> <span style=color:#2aa198>ExactVersion&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>[ARCH_INDEPENDENT]</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>å…¶ä¸­å…¼å®¹æ€§æŒ‡å®šçš„æ˜¯ç‰ˆæœ¬å¯èƒ½ä¸åŒæ—¶çš„å¤„ç†æƒ…å†µï¼Œå¦‚æœä½¿ç”¨ <code>AnyNewerVersion</code>ï¼Œåˆ™å¯ä»¥å‘ä¸‹å…¼å®¹è¯·æ±‚çš„ç‰ˆæœ¬ã€‚</p><blockquote><p>First, we need to provide the <code>&lt;filename></code> property of the artifact we want to create; it must follow the rules we outlined earlier. Other than that, keep in mind that we should store all the generated files in the build tree.</p></blockquote><p>æ³¨æ„è¿™ä¸ªå‘½ä»¤è¿˜æ˜¯å°†æ–‡ä»¶å†™å…¥åˆ° build tree çš„ã€‚å®‰è£…æ­¥éª¤æ˜¯è¦åˆ†å¼€çš„ã€‚æˆ‘ä»¬å¯ä»¥æä¾›ä¸€ä¸ª <code>VERSION</code> å‚æ•°ï¼Œå¦‚æœä¸æä¾›åˆ™ä¼šä½¿ç”¨æˆ‘ä»¬çš„ <code>project()</code> ä¸­æ ‡æ³¨çš„ <code>VERSION</code> å‚æ•°ï¼Œå¦‚æœ <code>project()</code> ä¹Ÿæ²¡æœ‰æä¾› <code>VERSION</code> å°±ä¼šæŠ¥é”™äº†ã€‚</p><h1 id=components>Components
<a class=header-anchor href=#components></a></h1><p><code>find_package</code> å¯ä»¥æœ‰ <code>COMPONENTS</code> å’Œ <code>OPTIONAL_COMPONENTS</code> å‚æ•°ã€‚æ³¨æ„è¿™äº›å‚æ•°éœ€è¦ç”± config æä¾›è€…åœ¨ config æ–‡ä»¶ä¸­åšå¥½æ£€æŸ¥ï¼Œå¦‚æœä¸æ£€æŸ¥é‚£ä¹ˆå°±ä¼šæ— äº‹å‘ç”Ÿã€‚</p><blockquote><p>Requested components are passed to the config-file in the <code>&lt;package>_FIND_COMPONENTS</code> variable (both optional and not). Additionally, for every non-optional component, a <code>&lt;package>_FIND_REQUIRED_&lt;component></code> will be set. As package authors, we could write a macro to scan this list and check if we have provided all the required components. But we don&rsquo;t need to â€“ this is exactly what <code>check_required_components()</code> does. To use it, the config-file should set the <code>&lt;Package>_&lt;Component>_FOUND</code> variable when the necessary component is found. The macro at the end of the file will check if all the required variables were set.</p></blockquote><p>å¯¹äºå¿…è¦çš„ components åšæ£€æŸ¥æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>CMakePackageConfigHelper</code> æ¨¡å—ä¸­æä¾›çš„ <code>check_required_components()</code> å®ã€‚åˆ°æ–‡ä»¶æœ€åè¿˜æ²¡æœ‰è®¾ç½® FOUND å˜é‡çš„å¯¹åº”æ¨¡å—å°±è¢«è§†ä¸ºæ²¡æœ‰æ‰¾åˆ°ã€‚</p><p>CMake åœ¨å‘½ä»¤è¡Œä» build tree ä¸­å®‰è£… componentsï¼ˆå¦‚æœæŒ‡å®šçš„æŸäº› components æ²¡æœ‰åŒ¹é…æˆåŠŸï¼Œä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯ä¸å®‰è£…è€Œå·²ï¼‰ï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cmake --install &lt;build tree&gt; --component<span style=color:#719e07>=</span>&lt;component name&gt;
</span></span></code></pre></div><p>install() å‘½ä»¤ä¸­å¯ä»¥ç»™æ¯ä¸€é¡¹éƒ½åŠ  COMPONENT å‚æ•°ï¼Œå°†ç»™å®šé¡¹ç›®å½’ç±»åˆ°ä¸€ä¸ª COMPONENT ä¸­ã€‚è¿™æ ·åœ¨é™å®š COMPONENT æ—¶ï¼Œå°±åªä¼šå®‰è£…å¯¹åº”çš„æ–‡ä»¶ã€‚ä½†æ˜¯å³ä¾¿æ˜¯æ ‡è®°äº† COMPONENTï¼Œæ–‡ä»¶ä¹Ÿä¼šè¢«é»˜è®¤å®‰è£…ï¼Œæƒ³è¦å°†å…¶æ’é™¤éœ€è¦ä½¿ç”¨ EXCLUDE_FROM_ALLã€‚</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#b58900>install</span>(<span style=color:#2aa198>TARGETS</span> <span style=color:#2aa198>calc</span> <span style=color:#2aa198>EXPORT</span> <span style=color:#2aa198>CalcTargets</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>ARCHIVE</span>
</span></span><span style=display:flex><span>    <span style=color:#2aa198>COMPONENT</span> <span style=color:#2aa198>lib</span>
</span></span><span style=display:flex><span>  <span style=color:#2aa198>PUBLIC_HEADER</span>
</span></span><span style=display:flex><span>    <span style=color:#2aa198>DESTINATION</span> <span style=color:#719e07>${</span><span style=color:#268bd2>CMAKE_INSTALL_INCLUDEDIR</span><span style=color:#719e07>}</span><span style=color:#2aa198>/calc</span>
</span></span><span style=display:flex><span>    <span style=color:#2aa198>COMPONENT</span> <span style=color:#2aa198>headers</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><blockquote><p>If no <code>COMPONENT</code> keyword is specified for the installed artifact, it will get a default value of Unspecified from the <code>CMAKE_INSTALL_DEFAULT_COMPONENT_NAME</code> variable.</p></blockquote><h1 id=managing-symbolic-links-for-versioned-shared-libraries>Managing symbolic links for versioned shared libraries
<a class=header-anchor href=#managing-symbolic-links-for-versioned-shared-libraries></a></h1><p>åœ¨å®‰è£…çš„æ—¶å€™ CMake å¯èƒ½ä¼šä½¿ç”¨ç¬¦å·é“¾æ¥å¸®åŠ©æˆ‘ä»¬å¤„ç†å¥½ linker çš„é—®é¢˜ï¼š</p><blockquote><p>The target platform for your installation may use symbolic links to help linkers discover the currently installed version of a shared library. After creating a <code>lib&lt;name>.so</code> symlink to the <code>lib&lt;name>.so.1</code> file, it&rsquo;s possible to link this library by passing the <code>-l&lt;name></code> argument to the linker. The creation of such symlinks is handled by <code>CMake</code>&rsquo;s <code>install(TARGETS &lt;target> LIBRARY)</code> block when needed.</p></blockquote><p>å¯ä»¥è·³è¿‡ç¬¦å·é“¾æ¥çš„é˜¶æ®µï¼Œæˆ–è€…åªè¿›è¡Œç¬¦å·é“¾æ¥çš„é˜¶æ®µã€‚</p><p><img src=/assets/5e75910ef77984fadaa879387f8921a1.webp></p><h1 id=cpack>CPack
<a class=header-anchor href=#cpack></a></h1><p>ä»¥ä¸‹æ˜¯ CPack æ”¯æŒçš„ package generatorsã€‚è¯·ä¸è¦å°† package generators å’Œ build generators ææ··æ·†ã€‚</p><p><img src=/assets/33ecd0b25782c14cde3061e906c7688c.webp></p><p>ä½¿ç”¨ CPack åªéœ€è¦åœ¨ CMakeLists.txt æ­£ç¡®å†™å¥½ install å‘½ä»¤ï¼Œç„¶ååŠ å…¥å¯¹ CPack ç›¸å…³å˜é‡çš„è®¾ç½®å’Œå¯¹ CPack æ¨¡å—çš„å¼•ç”¨ã€‚</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#b58900>set</span>(<span style=color:#2aa198>CPACK_PACKAGE_VENDOR</span> <span style=color:#2aa198>&#34;Rafal Swidzinski&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>set</span>(<span style=color:#2aa198>CPACK_PACKAGE_CONTACT</span> <span style=color:#2aa198>&#34;email@example.com&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>set</span>(<span style=color:#2aa198>CPACK_PACKAGE_DESCRIPTION</span> <span style=color:#2aa198>&#34;Simple Calculator&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#b58900>include</span>(<span style=color:#2aa198>CPack</span>)
</span></span></code></pre></div><p>è¿™é‡Œ CPack æ¨¡å—çš„ä½œç”¨æ˜¯ä» project å‘½ä»¤çš„è®¾ç½®ç»“æœä¸­æ¨å¯¼ä¸€äº› cpack ç¨‹åºéœ€è¦ç”¨åˆ°çš„å˜é‡ã€‚æ²¡æœ‰ CPack ä¹Ÿå¯ä»¥æ‰‹åŠ¨è®¾ç½®è¿™äº›å˜é‡ã€‚</p><p>è¿™å‡ ä¸ªå˜é‡æ˜¯å®‰è£…å¿…ä¸å¯ç¼ºçš„ï¼ˆè¿˜æœ‰å¾ˆå¤šä¸å¯ç¼ºå°‘çš„å˜é‡ï¼Œ<code>include(CPack)</code> å°±èƒ½æ¨å¯¼ï¼‰ï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span>å˜é‡å                       å¯¹åº”å‘½ä»¤è¡Œå‚æ•°ï¼ˆè¦†ç›–ï¼‰
</span></span><span style=display:flex><span>CPACK_PACKAGE_NAME          -P
</span></span><span style=display:flex><span>CPACK_PACKAGE_VERSION       -R
</span></span><span style=display:flex><span>CPACK_PACKAGE_VENDOR        --vendor
</span></span></code></pre></div><p>æœ€ç»ˆæ–‡ä»¶åæ˜¯ <code>$CPACK_PACKAGE_NAME-$CPACK_PACKAGE_VERSION-$CPACK_SYSTEM_NAME</code>ï¼Œæ¯”å¦‚ CPackPackage-1.2.3-Linux.zipï¼ˆpackage generator æ˜¯ ZIPï¼‰ã€‚</p><p>ä¸ºäº†è®© CPack èƒ½æ¨å¯¼å˜é‡ï¼Œproject() å‘½ä»¤å°±è¦å†™çš„è¯¦ç»†ä¸€ç‚¹ï¼ˆå…¶å®ä¹Ÿå°±åªæ˜¯éœ€è¦ä¸€ä¸ªæ˜ç¡®çš„ versionï¼Œæ¯•ç«Ÿåå­—æ˜¯å¿…éœ€çš„ã€è¯­è¨€æ˜¯æ— å…³çš„ï¼‰ï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#b58900>project</span>(<span style=color:#2aa198>CPackPackage</span> <span style=color:#2aa198>VERSION</span> <span style=color:#2aa198>1.2.3</span> <span style=color:#2aa198>LANGUAGES</span> <span style=color:#2aa198>CXX</span>)
</span></span></code></pre></div><p>å…¶ä»–é€‰é¡¹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-txt data-lang=txt><span style=display:flex><span>-G &lt;generators&gt;      semicolon-separated list of package generators
</span></span><span style=display:flex><span>                     å¯ä»¥åœ¨ CMakeLists.txt çš„ include(CPack) ä¹‹å‰è®¾ç½® CPACK_GENERATOR å˜é‡ä»¥æä¾›é»˜è®¤å€¼
</span></span><span style=display:flex><span>-C &lt;configs&gt;         semicolon-separated list of build configurations (debug, release)
</span></span><span style=display:flex><span>-D &lt;var&gt;=&lt;value&gt;
</span></span><span style=display:flex><span>--config &lt;config-file&gt;
</span></span><span style=display:flex><span>                     è¦†ç›– CPackConfig.cmake çš„è·¯å¾„ï¼ˆè¿™æ ·å°±å¯ä»¥ä¸å‘½åä¸º CPackConfig.cmakeï¼‰
</span></span><span style=display:flex><span>-B &lt;packageDirectory&gt;
</span></span><span style=display:flex><span>                     è¾“å‡ºè·¯å¾„ã€‚é»˜è®¤æ˜¯å½“å‰å·¥ä½œè·¯å¾„ã€‚
</span></span></code></pre></div><p>ä¾‹å­ï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cpack -G <span style=color:#2aa198>&#34;ZIP;7Z;DEB&#34;</span> -B pkgs
</span></span></code></pre></div><p>è¿™æ ·ä¼šç”Ÿæˆä¸‰ä¸ªåŒ…ï¼Œåˆ†åˆ«æ˜¯ï¼ˆä¹¦ä¸­ç»™å‡ºçš„ç»“æœï¼‰ï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-txt data-lang=txt><span style=display:flex><span>CPackPackage-1.2.3-Linux.7z
</span></span><span style=display:flex><span>CPackPackage-1.2.3-Linux.deb
</span></span><span style=display:flex><span>CPackPackage-1.2.3-Linux.zip
</span></span></code></pre></div><p>å› ä¸º cpack è¿˜ä¼šç”Ÿæˆä¸´æ—¶çš„ç›®å½• <code>_CPack_Packages</code>ï¼Œæ‰€ä»¥æœ€å¥½æ˜¾å¼æä¾› -B å‚æ•°ï¼Œä¸è¦ç”Ÿæˆåœ¨å½“å‰è·¯å¾„ã€‚å°±ç®—æ˜¯åœ¨ build é‡Œé¢ï¼Œå°†å¤šä¸ªåŒ…åˆ†ç»„åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œé¢ä¹Ÿæ˜¯æ›´å¥½çš„åšæ³•ã€‚</p><div class="markdown-alert markdown-alert-caution"><p class=markdown-alert-title><svg class="octicon octicon-stop mr-2" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M4.47.22A.749.749.0 015 0h6c.199.0.389.079.53.22l4.25 4.25c.141.14.22.331.22.53v6a.749.749.0 01-.22.53l-4.25 4.25A.749.749.0 0111 16H5a.749.749.0 01-.53-.22L.22 11.53A.749.749.0 010 11V5c0-.199.079-.389.22-.53zm.84 1.28L1.5 5.31v5.38l3.81 3.81h5.38l3.81-3.81V5.31L10.69 1.5zM8 4a.75.75.0 01.75.75v3.5a.75.75.0 01-1.5.0v-3.5A.75.75.0 018 4zm0 8a1 1 0 110-2 1 1 0 010 2z"/></svg>Caution</p><p>cpack è¦åœ¨ build tree é‡Œé¢è·‘ï¼Œè¿™ä¸ªå’Œ ctest ä¸€æ ·ã€‚</p><p>ä¸ºä»€ä¹ˆè¦åœ¨ build tree é‡Œè·‘å‘¢ï¼Ÿå› ä¸º build tree ä¸­æœ‰ç”Ÿæˆçš„ CPackConfig.cmakeã€‚å¦‚æœåœ¨åˆ«å¤„è·‘ï¼Œå°±ä¸ä¼šè‡ªåŠ¨åŠ è½½è¿™ä¸ªæ–‡ä»¶ï¼Œä»è€ŒæŠ¥é”™ï¼š<code>CPack Error: CPack project name not specified</code>ã€‚è¿™æ ·çš„æŠ¥é”™å¾ˆéšæ™¦ï¼Œå› ä¸º cpack ç¨‹åºå¹¶ä¸è¦æ±‚å­˜åœ¨ CPackConfig.cmake æ‰èƒ½è¿è¡Œï¼Œè€Œæˆ‘ä»¬ä¹Ÿä½¿ç”¨äº† <code>include(CPack)</code> çš„å†™æ³•ï¼Œæ²¡æœ‰æ‰‹åŠ¨æä¾›å¿…éœ€çš„å˜é‡ã€‚</p><p>å¦‚æœç›´æ¥åœ¨ source tree é‡Œè·‘ï¼Œèƒ½å¤Ÿé€šè¿‡ <code>--config</code> é€‰é¡¹ä¼ å…¥ build tree ä¸­çš„ CPackConfig.cmake è·¯å¾„ï¼Œä¹Ÿæ˜¯å¯ä»¥æˆåŠŸçš„ã€‚</p></div><div class="markdown-alert markdown-alert-note"><p class=markdown-alert-title><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1116 0A8 8 0 010 8zm8-6.5a6.5 6.5.0 100 13 6.5 6.5.0 000-13zM6.5 7.75A.75.75.0 017.25 7h1a.75.75.0 01.75.75v2.75h.25a.75.75.0 010 1.5h-2a.75.75.0 010-1.5h.25v-2h-.25a.75.75.0 01-.75-.75zM8 6a1 1 0 110-2 1 1 0 010 2z"/></svg>Note</p><p>cpack åœ¨ multi-config generatorï¼ˆè‡³å°‘ Ninja Multi-Config æ˜¯è¿™æ ·ï¼‰çš„ build tree ä¸­é»˜è®¤å¯»æ‰¾çš„æ˜¯ Release ç‰ˆæœ¬ã€‚ä½¿ç”¨ <code>-C Debug</code> æ¥å…è®¸ Debug ç‰ˆæœ¬çš„å®‰è£…ã€‚</p></div><p>æ„Ÿè§‰ CPack å¾ˆå¥½ç”¨ï¼Œåœ¨å†™å¥½ install å‘½ä»¤çš„åŸºç¡€ä¸Šå‡ ä¹ä¸å¿…èŠ±æ—¶é—´å»é€‚é… CPackã€‚ä¸»è¦è¿˜æ˜¯ install æ¯”è¾ƒå¤æ‚ã€‚</p></div><footer class=post-footer><div class=post-tags><a href=/tags/cmake>cmake
</a><a href=/tags/cpp>cpp
</a><a href=/tags/modern-cmake-for-cpp>modern-cmake-for-cpp</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/modern-cmake-for-cpp/chapter10-documents/ rel=next title="chapter10 - documents"><i class="fa fa-chevron-left"></i> chapter10 - documents</a></div><div class="post-nav-prev post-nav-item"><a href=/modern-cmake-for-cpp/chapter11.a-%E5%AF%B9%E6%AF%94-export-%E5%92%8C-install-%E5%91%BD%E4%BB%A4/ rel=prev title="chapter11.a - å¯¹æ¯” export å’Œ install å‘½ä»¤">chapter11.a - å¯¹æ¯” export å’Œ install å‘½ä»¤
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2023 - 2025
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>ğŸ¤–</span></div><div class=powered-by>ç”± <a href=https://gohugo.io title=0.143.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.3 target=_blank>Hugo NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨</div></div></footer><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js defer></script><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":false,"save":"manual"},"copybtn":true,"darkmode":false,"hostname":"https://hxhue.github.io/","i18n":{"ds_day":" å¤©å‰","ds_days":" å¤© ","ds_hour":" å°æ—¶å‰","ds_hours":" å°æ—¶ ","ds_just":"åˆšåˆš","ds_min":" åˆ†é’Ÿå‰","ds_mins":" åˆ†é’Ÿ","ds_month":" ä¸ªæœˆå‰","ds_years":" å¹´ ","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","placeholder":"æœç´¢..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":false,"transition":{"collheader":"fadeInLeft","menu_item":"fadeInDown","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline"},"views":{"enable":false,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"cdnjs","router":"https://cdnjs.cloudflare.com/ajax/libs"},"version":"4.5.3"}</script><script type=text/javascript src=/js/main.min.37ba8b54f9d4d784d08028c45eea93b5d4e13eda8ee7fb0d2edd6f3fac66cfd2.js defer></script></body></html>