<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.143.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="Windows 合集"><meta itemprop=description content="个人博客，主要是零散的笔记。"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://hxhue.github.io/imgs/371907.jpg"><meta itemprop=keywords content="windows"><link type=text/css rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css><link rel=stylesheet href=/css/main.min.bea76f574a755574e17d42bea39502a74ca3ca4db65807b8c82d3e26dcec8420.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><link rel=stylesheet type=text/css href=/css/style.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/github-markdown-css@5.3.0/github-markdown-dark.css><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js></script><script>MathJax={tex:{displayMath:[["$$","$$"],["\\[","\\]"]],inlineMath:[["$","$"],["\\(","\\)"]]},svg:{fontCache:"global"}}</script><script type=module>
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: false });
  mermaid.mermaidAPI.initialize();
  window.mermaid = mermaid;
</script><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":false,"isHome":false,"isPage":true,"path":"Windows-%E5%90%88%E9%9B%86","permalink":"https://hxhue.github.io/posts/systems/Windows/Windows-%E5%90%88%E9%9B%86/","title":"Windows 合集","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>Windows 合集 - Bluegill</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>Bluegill</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description></p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about/ class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档</a></li><li class="menu-item menu-item-categories"><a href=/categories/ class=hvr-icon-pulse rel=section><i class="fa fa-th hvr-icon"></i>分类</a></li><li class="menu-item menu-item-tags"><a href=/tags/ class=hvr-icon-pulse rel=section><i class="fa fa-hashtag hvr-icon"></i>标签</a></li><li class="menu-item menu-item-daily"><a href=/daily/ class=hvr-icon-pulse rel=section><i class="fa fa-newspaper hvr-icon"></i>随笔</a></li><li class="menu-item menu-item-discovery"><a href=https://rift-fear-f2c.notion.site/2025-1e354a33cfb1802c841bdf29f2f3dab3 class=hvr-icon-pulse rel=section><i class="fa fa-compass hvr-icon"></i>发现</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#必做>🚩必做</a></li><li><a href=#通过任务计划程序创建还原点>通过任务计划程序创建还原点</a><ul><li><a href=#开启系统还原>开启系统还原</a></li><li><a href=#创建任务计划>创建任务计划</a></li></ul></li><li><a href=#组策略和注册表的关联>组策略和注册表的关联</a><ul><li><a href=#家庭版下强行开启组策略编辑器操作不生效>家庭版下强行开启组策略编辑器，操作不生效？</a></li></ul></li><li><a href=#windows-家庭版启用组策略编辑器>Windows 家庭版启用组策略编辑器</a></li><li><a href=#更改-windows-用户文件夹名称>更改 Windows 用户文件夹名称</a></li><li><a href=#为-java-注册关联文件>为 Java 注册关联文件</a></li><li><a href=#开机输入密码后进用户界面慢>开机输入密码后进用户界面慢</a></li><li><a href=#wifi-有网络但是还是有小地球>WiFi 有网络但是还是有小地球</a></li><li><a href=#安全中心闪退>安全中心闪退</a></li><li><a href=#高-cpu-问题>高 CPU 问题</a><ul><li><a href=#windows-defender>Windows Defender</a></li><li><a href=#microsoft-兼容性遥测>Microsoft 兼容性遥测</a></li></ul></li><li><a href=#wsl-localhost-在-firefox-上连接很慢>WSL localhost 在 Firefox 上连接很慢</a></li><li><a href=#防止-windows-更新在更新的时候降级驱动>防止 Windows 更新在更新的时候降级驱动</a></li><li><a href=#word-文档关闭时显示正在保存很长时间>Word 文档关闭时显示“正在保存”很长时间</a></li><li><a href=#msys2-的-ls-无法正确显示中文文件名>MSYS2 的 <code>ls</code> 无法正确显示中文文件名</a></li><li><a href=#关闭-windows-search-中的联网建议>⚠关闭 Windows Search 中的联网建议</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=🤖 src=/imgs/371907.jpg><p class=site-author-name itemprop=name>🤖</p><div class=site-description itemprop=description>个人博客，主要是零散的笔记。</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>433</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>12</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>86</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/hxhue title="Github → https://github.com/hxhue" rel=noopener target=_blank><i class="fab fa-github fa-fw"></i>
Github
</a></span><span class=links-of-social-item><a href=/rss.xml title="RSS 订阅 → /rss.xml" rel=noopener target=_blank><i class="fa fa-rss fa-fw"></i>
RSS 订阅</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://shuai.guru/ title=https://shuai.guru/ target=_blank>shuai.guru</a></li></ul></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/posts/systems/Windows/Windows-%E5%90%88%E9%9B%86/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="🤖"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="🤖"><meta itemprop=description content="个人博客，主要是零散的笔记。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="Windows 合集"><meta itemprop=description content="🚩必做


关闭实时保护
关闭自动更新
定时创建还原点

如果系统驱动有问题、难以修复而且没有创建还原点，全新安装新系统也可以，Windows 不会抹除所有数据，受影响的只有注册表和 C:\Windows 文件夹下的数据。用户文件夹会被备份到 C:\Windows.old 中，QQ 和微信聊天数据、ssh/clash 等配置文件夹可以从其中复制过来。程序需要重新安装。"></span><header class=post-header><h1 class=post-title itemprop="name headline">Windows 合集</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2023-08-12 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2023-08-12 00:00:00 +0800 CST">2023-08-12
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=更新于>更新于：
</span><time title=修改时间：2025-04-13T00:00:00+08:00 itemprop=dateModified datetime=2025-04-13T00:00:00+08:00>2025-04-13</time></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="far fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>2447</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="far fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>5分钟</span></span></div></div></header><div class=post-body itemprop=articleBody><h1 id=必做>🚩必做
<a class=header-anchor href=#%e5%bf%85%e5%81%9a></a></h1><ul><li>关闭实时保护</li><li>关闭自动更新</li><li>定时创建还原点</li></ul><p>如果系统驱动有问题、难以修复而且没有创建还原点，全新安装新系统也可以，<strong>Windows 不会抹除所有数据</strong>，受影响的只有注册表和 <code>C:\Windows</code> 文件夹下的数据。用户文件夹会被备份到 <code>C:\Windows.old</code> 中，QQ 和微信聊天数据、ssh/clash 等配置文件夹可以从其中复制过来。程序需要重新安装。</p><h1 id=通过任务计划程序创建还原点>通过任务计划程序创建还原点
<a class=header-anchor href=#%e9%80%9a%e8%bf%87%e4%bb%bb%e5%8a%a1%e8%ae%a1%e5%88%92%e7%a8%8b%e5%ba%8f%e5%88%9b%e5%bb%ba%e8%bf%98%e5%8e%9f%e7%82%b9></a></h1><p>参考这个 <a href=https://www.cnblogs.com/geraint/p/13115800.html title=博客 rel="noopener external nofollow noreferrer" target=_blank class=exturl>博客<i class="fa fa-external-link-alt"></i></a>。</p><h2 id=开启系统还原>开启系统还原
<a class=header-anchor href=#%e5%bc%80%e5%90%af%e7%b3%bb%e7%bb%9f%e8%bf%98%e5%8e%9f></a></h2><p>可以在 Windows 开始菜单搜索中搜索“还原”，找到“创建还原点”，也可以找到“系统属性 > 系统保护”，这两个方式都能来到同一个功能面板，对系统驱动器启用系统还原即可。</p><h2 id=创建任务计划>创建任务计划
<a class=header-anchor href=#%e5%88%9b%e5%bb%ba%e4%bb%bb%e5%8a%a1%e8%ae%a1%e5%88%92></a></h2><p>可以在 Windows 开始菜单搜索中搜索“计划”，找到“任务计划程序”进入。</p><p>点击右侧的“创建计划任务”，选择“不管用户是否登录都要运行”，启用最高权限，配置别动（<strong>不要选 Windows 10</strong>！会导致配置失效）。别急着点确定，翻到第二页“触发器”，选择“启动时”，点击确定。</p><p><img src=/posts/systems/Windows/assets/Pasted%20image%2020250211154218.webp width=700></p><p><img src=/posts/systems/Windows/assets/Pasted%20image%2020250211144849.webp width=600></p><p>创建触发器之后应该和下面一样：</p><p><img src=/posts/systems/Windows/assets/Pasted%20image%2020250211144920.webp width=600></p><p>接下来选择操作，选择“启动程序”，程序填 <code>powershell.exe</code>（不用浏览，PATH 里面肯定能找到），参数填：</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-txt data-lang=txt><span style=display:flex><span>-ExecutionPolicy Bypass -Command &#34;Checkpoint-Computer -Description &#34;Startup RestorePoint &#34; -RestorePointType &#34;MODIFY_SETTINGS&#34;&#34;
</span></span></code></pre></div><p>接下来在“条件”选项卡里面关闭唤醒时启动（这样是不是每次开机才跑一次而不是每次唤醒就跑一次？）和不充电时不启动，然后点击确定，输入账户密码（可能时因为设置了更高权限运行）即可创建。因为我创建的位置是在根，所以能在下图找到我计划的任务。</p><p><img src=/posts/systems/Windows/assets/Pasted%20image%2020250211145755.webp width=800></p><p>可以重启电脑检查一下是否有新的还原点创建。</p><h1 id=组策略和注册表的关联>组策略和注册表的关联
<a class=header-anchor href=#%e7%bb%84%e7%ad%96%e7%95%a5%e5%92%8c%e6%b3%a8%e5%86%8c%e8%a1%a8%e7%9a%84%e5%85%b3%e8%81%94></a></h1><p>组策略和注册表的内容是分别存储的，修改组策略并不会直接修改注册表。仅仅是在组策略刷新时，策略文件中的内容会被同步到注册表中。而且，组策略只维持自己的缓存，从不读取注册表中的值！</p><p>当注册表不经过组策略编辑器被改动时，如果想要使用组策略管理相关项，可能需要先显式设置组策略中的项目为另外一个值，然后再改过来。</p><blockquote><p><a href=https://superuser.com/a/1192458 title=https://superuser.com/a/1192458 rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://superuser.com/a/1192458<i class="fa fa-external-link-alt"></i></a></p><p><em>Local</em> group policy settings (which is what I believe you are referring to in your post) are stored in <code>registry.pol</code> files located in <code>C:\Windows\system32\GroupPolicy</code>. These files overwrite the corresponding keys in the registry every time the system performs a group policy refresh. The editor never actually reads the registry to see what settings it contains.</p><p>其中 <code>C:\Windows\system32\GroupPolicy</code> 是一个隐藏文件夹。</p></blockquote><h2 id=家庭版下强行开启组策略编辑器操作不生效>家庭版下强行开启组策略编辑器，操作不生效？
<a class=header-anchor href=#%e5%ae%b6%e5%ba%ad%e7%89%88%e4%b8%8b%e5%bc%ba%e8%a1%8c%e5%bc%80%e5%90%af%e7%bb%84%e7%ad%96%e7%95%a5%e7%bc%96%e8%be%91%e5%99%a8%e6%93%8d%e4%bd%9c%e4%b8%8d%e7%94%9f%e6%95%88></a></h2><p>编辑组策略后观察 <code>registry.pol</code> 文件，发现数据的确被写入了。比如启用“Windows 更新不包括驱动程序”，对应的文件如下：</p><p><img src=/assets/03904667cc69b9f4289b47e335e109de.webp></p><p>其中 <code>01 00 00 00</code> 表示“已启用”。这里看上去是一个字符按照两个字节存储，而整数又是 4 字节小端存储。</p><p>使用 <code>gpupdate /force</code> 强行刷新组策略，在 <code>事件查看器 > Windows 日志 > 系统</code> 中，能看到：</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-txt data-lang=txt><span style=display:flex><span>已成功为此计算机处理组策略设置。已经检测到并应用了 1 个组策略对象的新设置。
</span></span></code></pre></div><p><strong>但策略设置并没有被同步到注册表中。</strong></p><h1 id=windows-家庭版启用组策略编辑器>Windows 家庭版启用组策略编辑器
<a class=header-anchor href=#windows-%e5%ae%b6%e5%ba%ad%e7%89%88%e5%90%af%e7%94%a8%e7%bb%84%e7%ad%96%e7%95%a5%e7%bc%96%e8%be%91%e5%99%a8></a></h1><p>可以用脚本启用，但是<strong>不推荐</strong>！虽然能编辑，但内容并不生效。可以转而使用注册表来完成相同的功能。网上流传的脚本如下（需要管理员权限）：</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bat data-lang=bat><span style=display:flex><span><span style=color:#719e07>pushd</span> <span style=color:#2aa198>&#34;</span><span style=color:#268bd2>%~dp0</span><span style=color:#2aa198>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#719e07>dir</span> /b <span style=color:#268bd2>%SystemRoot%</span>\servicing\Packages\Microsoft-Windows-GroupPolicy-ClientExtensions-Package~3*.mum &gt;List.txt
</span></span><span style=display:flex><span><span style=color:#719e07>dir</span> /b <span style=color:#268bd2>%SystemRoot%</span>\servicing\Packages\Microsoft-Windows-GroupPolicy-ClientTools-Package~3*.mum &gt;&gt;List.txt
</span></span><span style=display:flex><span><span style=color:#719e07>for</span> <span style=color:#719e07>/f</span> <span style=color:#cb4b16>%%</span>i <span style=color:#719e07>in</span> (<span style=color:#2aa198>&#39;findstr /i . List.txt 2^&gt;nul&#39;</span>) <span style=color:#719e07>do</span> dism /online /norestart /add-package:<span style=color:#2aa198>&#34;</span><span style=color:#268bd2>%SystemRoot%</span><span style=color:#2aa198>\servicing\Packages\</span><span style=color:#cb4b16>%%</span><span style=color:#2aa198>i&#34;</span>
</span></span><span style=display:flex><span><span style=color:#719e07>pause</span>
</span></span></code></pre></div><h1 id=更改-windows-用户文件夹名称>更改 Windows 用户文件夹名称
<a class=header-anchor href=#%e6%9b%b4%e6%94%b9-windows-%e7%94%a8%e6%88%b7%e6%96%87%e4%bb%b6%e5%a4%b9%e5%90%8d%e7%a7%b0></a></h1><p>首先取消 OneDrive 对于桌面的同步！防止旧用户名被删除后还被桌面使用。</p><p><a href=https://www.elevenforum.com/t/enable-or-disable-built-in-administrator-account-in-windows-11.709/ title=https://www.elevenforum.com/t/enable-or-disable-built-in-administrator-account-in-windows-11.709/ rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://www.elevenforum.com/t/enable-or-disable-built-in-administrator-account-in-windows-11.709/<i class="fa fa-external-link-alt"></i></a></p><p><a href=https://www.tenforums.com/tutorials/89060-change-name-user-profile-folder-windows-10-a.html title=https://www.tenforums.com/tutorials/89060-change-name-user-profile-folder-windows-10-a.html rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://www.tenforums.com/tutorials/89060-change-name-user-profile-folder-windows-10-a.html<i class="fa fa-external-link-alt"></i></a></p><p>然后还要修改 USERNAME 环境变量（需要在控制面版里面找到用户）。</p><p><strong>是否要创建软链接</strong>？==如果不创建软链接，很多东西就需要重新安装，包括 Obsidian、VS Code、Notepad3、miniconda3 和安装在用户上的字体。==还有很多注册表项目……所以最好还是留个软链接。</p><p><strong>效益</strong>？不如重新创建一个用户。</p><h1 id=为-java-注册关联文件>为 Java 注册关联文件
<a class=header-anchor href=#%e4%b8%ba-java-%e6%b3%a8%e5%86%8c%e5%85%b3%e8%81%94%e6%96%87%e4%bb%b6></a></h1><p>使用 Java_HOME，然后在环境变量中引用。环境变量可以从开始中搜索进入。Jar 文件的关联需要使用 cmd（powershell 不行）的 assoc 命令和 ftype 命令。<strong>如果有旧的关联，需要换一个名字！不要用同一个名字来关联！</strong></p><div style=overflow-x:auto><table><thead><tr><th>命令</th><th>效果</th></tr></thead><tbody><tr><td><code>ftype jarfile</code></td><td>查看该程序类型当前的关联</td></tr><tr><td><code>ftype jarfile=</code></td><td>清空当前的关联</td></tr><tr><td><code>ftype jarfile="path/to/javaw.exe" -jar "%1" %*</code></td><td>关联该程序为使用 jar 打开</td></tr><tr><td><code>assoc .jar</code></td><td>查看该文件类型当前的关联</td></tr><tr><td><code>assoc .jar=jarfile</code></td><td>和名称为 jarfile 的项目连接起来</td></tr></tbody></table></div><p>另外，在 Java SE9 之前，windows 上的 GUI 程序不会随着显示屏缩放设置缩放。所以我升级到了 Java11。</p><h1 id=开机输入密码后进用户界面慢>开机输入密码后进用户界面慢
<a class=header-anchor href=#%e5%bc%80%e6%9c%ba%e8%be%93%e5%85%a5%e5%af%86%e7%a0%81%e5%90%8e%e8%bf%9b%e7%94%a8%e6%88%b7%e7%95%8c%e9%9d%a2%e6%85%a2></a></h1><p>可能是暂存目录太大了，影响系统工作。用 <code>cd %temp%</code> 进入目录，用 <code>explorer .</code> 打开这里，然后删掉里面所有的文件（可能需要显示隐藏文件）并重启。由于缓存目录过期会自动清理，所以有时候会有一种过一段时间开机又正常了的假象。上次清理的时候缓存目录有 10G。下面两个帖子提到了这一点：</p><p><a href=https://www.reddit.com/r/techsupport/comments/gh0v9e/long_black_screen_before_login_windows_10/ title=https://www.reddit.com/r/techsupport/comments/gh0v9e/long_black_screen_before_login_windows_10/ rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://www.reddit.com/r/techsupport/comments/gh0v9e/long_black_screen_before_login_windows_10/<i class="fa fa-external-link-alt"></i></a></p><p><a href=https://www.tenforums.com/performance-maintenance/155024-startup-takes-too-long-winlogon-init.html title=https://www.tenforums.com/performance-maintenance/155024-startup-takes-too-long-winlogon-init.html rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://www.tenforums.com/performance-maintenance/155024-startup-takes-too-long-winlogon-init.html<i class="fa fa-external-link-alt"></i></a></p><h1 id=wifi-有网络但是还是有小地球>WiFi 有网络但是还是有小地球
<a class=header-anchor href=#wifi-%e6%9c%89%e7%bd%91%e7%bb%9c%e4%bd%86%e6%98%af%e8%bf%98%e6%98%af%e6%9c%89%e5%b0%8f%e5%9c%b0%e7%90%83></a></h1><p>可能是 DNS 服务器 ping 不通，可以试一下 ping。如果 ping 不上，看看能不能把静态配置的 DNS 服务器改成自动获取。</p><h1 id=安全中心闪退>安全中心闪退
<a class=header-anchor href=#%e5%ae%89%e5%85%a8%e4%b8%ad%e5%bf%83%e9%97%aa%e9%80%80></a></h1><p><a href=https://m.ithome.com/html/570853.htm title=https://m.ithome.com/html/570853.htm rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://m.ithome.com/html/570853.htm<i class="fa fa-external-link-alt"></i></a></p><h1 id=高-cpu-问题>高 CPU 问题
<a class=header-anchor href=#%e9%ab%98-cpu-%e9%97%ae%e9%a2%98></a></h1><h2 id=windows-defender>Windows Defender
<a class=header-anchor href=#windows-defender></a></h2><p>改注册表、组策略里面有个二级选项可以关闭 Windows defender 的实时保护（不太好找）。</p><p><img src=/assets/fb3f63a43e5eb7fd1ff56c99b20f8a98.webp></p><p>上一级的 <code>关闭 Mircosoft Defender 防病毒</code> 看上去是无效的？</p><p>如果通过注册表修改，设置下面这个项目：</p><div style=overflow-x:auto><table><thead><tr><th>项</th><th><code>HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows Defender\Real-Time Protection</code></th></tr></thead><tbody><tr><td>DWORD</td><td><code>DisableRealtimeMonitoring</code></td></tr><tr><td>值</td><td>1</td></tr></tbody></table></div><p><strong>实时保护关闭之后还要在 Windows Defender 页面关掉其他几个相关项目，否则实时保护会自动打开。如果不在组策略中关闭实时保护，则重启后实时保护会自动打开，所以这两件事都要做。</strong></p><p><img src=/assets/8026377257cc607896dc55b7a840ce2f.webp width=500></p><h2 id=microsoft-兼容性遥测>Microsoft 兼容性遥测
<a class=header-anchor href=#microsoft-%e5%85%bc%e5%ae%b9%e6%80%a7%e9%81%a5%e6%b5%8b></a></h2><p><a href=https://blog.pcrisk.com/windows/13450-fix-microsoft-compatibility-telemetry-high-cpu-usage title=最全的方法 rel="noopener external nofollow noreferrer" target=_blank class=exturl>最全的方法<i class="fa fa-external-link-alt"></i></a>。</p><p>这个看上去可能靠谱一点：</p><blockquote><p>这个是微软 Windows 10 的兼容性检测助手，</p><ol><li><p>按下“Win+R”，输入 services.msc 打开服务。</p></li><li><p>进入到服务列表找到 <code>Connected User Experiences and Telemetry</code> ，<code>Program Compatibility Assistant Service</code> 服务项</p></li><li><p>打开服务，将服务进行禁用。</p></li></ol></blockquote><h1 id=wsl-localhost-在-firefox-上连接很慢>WSL localhost 在 Firefox 上连接很慢
<a class=header-anchor href=#wsl-localhost-%e5%9c%a8-firefox-%e4%b8%8a%e8%bf%9e%e6%8e%a5%e5%be%88%e6%85%a2></a></h1><p><img src=/assets/d9f0aa31d5bd9d36c26e7bcd57f5199c.webp width=700></p><p>这张图给出了原因。</p><h1 id=防止-windows-更新在更新的时候降级驱动>防止 Windows 更新在更新的时候降级驱动
<a class=header-anchor href=#%e9%98%b2%e6%ad%a2-windows-%e6%9b%b4%e6%96%b0%e5%9c%a8%e6%9b%b4%e6%96%b0%e7%9a%84%e6%97%b6%e5%80%99%e9%99%8d%e7%ba%a7%e9%a9%b1%e5%8a%a8></a></h1><p>如果是专业版，就编辑组策略：</p><p><img src=/assets/7fa21c6087b5456903c0aa0e3c364933.webp width=700></p><p>还可以修改注册表：</p><div style=overflow-x:auto><table><thead><tr><th>项</th><th><code>HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\WindowsUpdate</code></th></tr></thead><tbody><tr><td>DWORD</td><td><code>ExcludeWUDriversInQualityUpdate</code></td></tr><tr><td>值</td><td>1</td></tr></tbody></table></div><p>但是这样做不是很保险，我记得我有个设备设置了这个但是驱动还是被降级了。最好是直接永久停止 Windows 更新检查。</p><h1 id=word-文档关闭时显示正在保存很长时间>Word 文档关闭时显示“正在保存”很长时间
<a class=header-anchor href=#word-%e6%96%87%e6%a1%a3%e5%85%b3%e9%97%ad%e6%97%b6%e6%98%be%e7%a4%ba%e6%ad%a3%e5%9c%a8%e4%bf%9d%e5%ad%98%e5%be%88%e9%95%bf%e6%97%b6%e9%97%b4></a></h1><p><strong>在隐私设置中关闭全部联机体验</strong>。会使得自动保存不可用，频繁手动保存即可。</p><h1 id=msys2-的-ls-无法正确显示中文文件名>MSYS2 的 <code>ls</code> 无法正确显示中文文件名
<a class=header-anchor href=#msys2-%e7%9a%84-ls-%e6%97%a0%e6%b3%95%e6%ad%a3%e7%a1%ae%e6%98%be%e7%a4%ba%e4%b8%ad%e6%96%87%e6%96%87%e4%bb%b6%e5%90%8d></a></h1><p>可能是环境变量 <code>LANG</code> 没有被设置。设置它的值为 <code>zh_CN.UTF-8</code> 即可。（<code>en_US.UTF-8</code> 也是可以显示中文的，这就是没有设置的问题，可以用 <code>locale</code> 检查。）</p><p><code>LC_ALL</code> 的优先级大于 <code>LANG</code>，默认是没有设置的，也不需要管。</p><h1 id=关闭-windows-search-中的联网建议>⚠关闭 Windows Search 中的联网建议
<a class=header-anchor href=#%e5%85%b3%e9%97%ad-windows-search-%e4%b8%ad%e7%9a%84%e8%81%94%e7%bd%91%e5%bb%ba%e8%ae%ae></a></h1><p>有时候会在联网建议的时候卡住，导致不能正常搜索本地软件。</p><p>参考这个： <a href="https://www.reddit.com/r/pcmasterrace/comments/1adtmhz/comment/kk43t9o/?utm_source=share&amp;utm_medium=web3x&amp;utm_name=web3xcss&amp;utm_term=1&amp;utm_content=share_button" title="https://www.reddit.com/r/pcmasterrace/comments/1adtmhz/comment/kk43t9o/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button" rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://www.reddit.com/r/pcmasterrace/comments/1adtmhz/comment/kk43t9o/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button<i class="fa fa-external-link-alt"></i></a></p><p>在 <code>HKEY_CURRENT_USER\Software\Policies\Microsoft\Windows</code> 表项中增加 <code>Explorer</code> 项目，然后在其中增加一个名为 <code>DisableSearchBoxSuggestions</code> 的 <code>DWORD (32-bit) Value</code>，将其值改成 1。</p><p>2025 年 1 月 8 日：上述方法好像没用，还是出现了无法搜索本地软件的情况。打开任务管理器，右键然后重启 Windows Explorer 就好了。不知道如何永久解决。</p><p><img src=/assets/Pasted%20image%2020250108100352.webp width=600></p></div><footer class=post-footer><div class=post-tags><a href=/tags/windows>windows</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/posts/systems/Windows/Windows-%E7%AA%97%E5%8F%A3%E6%A0%8F%E5%9C%A8%E5%B1%8F%E5%B9%95%E5%A4%96%E4%B8%8D%E8%83%BD%E7%A7%BB%E5%8A%A8/ rel=next title="Windows 窗口栏在屏幕外不能移动"><i class="fa fa-chevron-left"></i> Windows 窗口栏在屏幕外不能移动</a></div><div class="post-nav-prev post-nav-item"><a href=/posts/systems/Windows/Windows-%E5%9B%9E%E9%80%80%E9%A9%B1%E5%8A%A8%E6%88%96%E7%BB%99%E5%B7%B2%E7%BB%8F%E5%88%A0%E9%99%A4%E7%9A%84%E8%AE%BE%E5%A4%87%E6%B7%BB%E5%8A%A0%E9%A9%B1%E5%8A%A8/ rel=prev title="Windows 回退驱动或给已经删除的设备添加驱动">Windows 回退驱动或给已经删除的设备添加驱动
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2023 - 2025
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>🤖</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.143.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div></div></footer><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js defer></script><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":false,"save":"manual"},"copybtn":true,"darkmode":false,"hostname":"https://hxhue.github.io/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":false,"transition":{"collheader":"fadeInLeft","menu_item":"fadeInDown","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline"},"views":{"enable":false,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"cdnjs","router":"https://cdnjs.cloudflare.com/ajax/libs"},"version":"4.5.3"}</script><script type=text/javascript src=/js/main.min.37ba8b54f9d4d784d08028c45eea93b5d4e13eda8ee7fb0d2edd6f3fac66cfd2.js defer></script></body></html>