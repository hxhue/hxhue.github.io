<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.143.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="Posts"><meta itemprop=description content="ä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯é›¶æ•£çš„ç¬”è®°ã€‚"><meta itemprop=image content="https://hxhue.github.io/imgs/371907.jpg"><meta itemprop=keywords content><link type=text/css rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css><link rel=stylesheet href=/css/main.min.bea76f574a755574e17d42bea39502a74ca3ca4db65807b8c82d3e26dcec8420.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ æˆ‘å¯æ˜¯æœ‰åº•çº¿çš„å“Ÿ ~"}</style><link rel=stylesheet type=text/css href=/css/style.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/github-markdown-css@5.3.0/github-markdown-dark.css><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js></script><script>MathJax={tex:{displayMath:[["$$","$$"],["\\[","\\]"]],inlineMath:[["$","$"],["\\(","\\)"]]},svg:{fontCache:"global"}}</script><script type=module>
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: false });
  mermaid.mermaidAPI.initialize();
  window.mermaid = mermaid;
</script><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":false,"isHome":false,"isPage":false,"path":"posts","permalink":"https://hxhue.github.io/posts/","title":"Posts","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>posts - Bluegill</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>Bluegill</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description></p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-about"><a href=/about/ class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>å…³äº</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>å½’æ¡£</a></li><li class="menu-item menu-item-categories"><a href=/categories/ class=hvr-icon-pulse rel=section><i class="fa fa-th hvr-icon"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-tags"><a href=/tags/ class=hvr-icon-pulse rel=section><i class="fa fa-hashtag hvr-icon"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-daily"><a href=/daily/ class=hvr-icon-pulse rel=section><i class="fa fa-newspaper hvr-icon"></i>éšç¬”</a></li><li class="menu-item menu-item-discovery"><a href=https://rift-fear-f2c.notion.site/2025-1e354a33cfb1802c841bdf29f2f3dab3 class=hvr-icon-pulse rel=section><i class="fa fa-compass hvr-icon"></i>å‘ç°</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>æœç´¢</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=æœç´¢... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-overview-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>æ–‡ç« ç›®å½•</li><li class=sidebar-nav-overview>ç«™ç‚¹æ¦‚è§ˆ</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=ğŸ¤– src=/imgs/371907.jpg><p class=site-author-name itemprop=name>ğŸ¤–</p><div class=site-description itemprop=description>ä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯é›¶æ•£çš„ç¬”è®°ã€‚</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>433</span>
<span class=site-state-item-name>æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>12</span>
<span class=site-state-item-name>åˆ†ç±»</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>86</span>
<span class=site-state-item-name>æ ‡ç­¾</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/hxhue title="Github â†’ https://github.com/hxhue" rel=noopener target=_blank><i class="fab fa-github fa-fw"></i>
Github
</a></span><span class=links-of-social-item><a href=/rss.xml title="RSS è®¢é˜… â†’ /rss.xml" rel=noopener target=_blank><i class="fa fa-rss fa-fw"></i>
RSS è®¢é˜…</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=å…±äº«çŸ¥è¯†><img src=/imgs/cc/big/by_nc_sa.svg alt=å…±äº«çŸ¥è¯†></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
å‹æƒ…é“¾æ¥</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://shuai.guru/ title=https://shuai.guru/ target=_blank>shuai.guru</a></li></ul></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=toggle-theme class=button title=æ·±æµ…æ¨¡å¼åˆ‡æ¢><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=è¿”å›é¡¶éƒ¨><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner index posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/posts/ai-infra/CUDA_DEVICE_MAX_CONNECTIONS/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="ğŸ¤–"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="ğŸ¤–"><meta itemprop=description content="ä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯é›¶æ•£çš„ç¬”è®°ã€‚"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="CUDA_DEVICE_MAX_CONNECTIONS"><meta itemprop=description content="ç¯å¢ƒå˜é‡è§£é‡Š

CUDA_DEVICE_MAX_CONNECTIONS è¿™ä¸ªç¯å¢ƒå˜é‡åœ¨ Megatron-LM æºç ä¸­ç»å¸¸è§åˆ°ï¼Œä¸»è¦æ˜¯ç”¨æ¥æ§åˆ¶ç¡¬ä»¶è°ƒåº¦ kernel çš„é¡ºåºï¼Œä»¥å°½å¯èƒ½æé«˜é€šä¿¡è®¡ç®—é‡å åœºæ™¯çš„é‡å ç‡ã€‚
è‹±ä¼Ÿè¾¾æ–‡æ¡£ cuda-environment-variables è¯´æ˜äº† CUDA_DEVICE_MAX_CONNECTIONS é»˜è®¤ä¸º 8ï¼Œå¯ä»¥è®¾ç½®ä¸º 1 åˆ° 32 çš„æ•´æ•°å€¼ï¼Œè¡¨ç¤ºè®¡ç®—å’Œæ‹·è´é˜Ÿåˆ—çš„æ•°é‡ã€‚ï¼ˆåŒæ ·è¿˜æœ‰ CUDA_DEVICE_MAX_COPY_CONNECTIONS è¡¨ç¤ºå¯¹æ‹·è´é˜Ÿåˆ—çš„è®¾ç½®ï¼ˆä¼˜å…ˆçº§é«˜äº CUDA_DEVICE_MAX_CONNECTIONï¼‰ã€‚ï¼‰è®ºå›å›å¤ æŒ‡å‡ºè¿™ä¸ªç¯å¢ƒå˜é‡è¡¨ç¤ºæœ‰å¤šå°‘ä¸ªç¡¬ä»¶é˜Ÿåˆ—å’Œ CUDA æµå‘ç”Ÿæ˜ å°„å…³ç³»ã€‚ï¼ˆå¦‚æœè¿™ä¸ªå€¼ä¸å¤Ÿå¤§åˆ™æµä¹‹é—´å­˜åœ¨è™šå‡ä¾èµ–ã€‚è¿™æ ·ä¸€æ¥ï¼Œè®¾ç½®ä¸º 1 å°±èƒ½å®Œå…¨ä¿è¯ kernel æ‰§è¡Œé¡ºåºå’Œå‘èµ·é¡ºåºä¸€è‡´ã€‚è®¾ç½®ä¸º 32 åˆ™å°½å¯èƒ½è®¾æ³•è®©ä¸åŒçš„æµå¹¶å‘æ‰§è¡Œ kernelsã€‚ï¼‰"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/posts/ai-infra/CUDA_DEVICE_MAX_CONNECTIONS/ itemprop=url class=post-title-link>CUDA_DEVICE_MAX_CONNECTIONS</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=å‘è¡¨äº>å‘è¡¨äºï¼š
</span><time title="åˆ›å»ºæ—¶é—´ï¼š2025-09-07 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2025-09-07 00:00:00 +0800 CST">2025-09-07</time></span></div></div></header><div class=post-body itemprop=articleBody><h1 id=ç¯å¢ƒå˜é‡è§£é‡Š>ç¯å¢ƒå˜é‡è§£é‡Š
<a class=header-anchor href=#%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%e8%a7%a3%e9%87%8a></a></h1><p><code>CUDA_DEVICE_MAX_CONNECTIONS</code> è¿™ä¸ªç¯å¢ƒå˜é‡åœ¨ Megatron-LM æºç ä¸­ç»å¸¸è§åˆ°ï¼Œä¸»è¦æ˜¯ç”¨æ¥æ§åˆ¶ç¡¬ä»¶è°ƒåº¦ kernel çš„é¡ºåºï¼Œä»¥å°½å¯èƒ½æé«˜é€šä¿¡è®¡ç®—é‡å åœºæ™¯çš„é‡å ç‡ã€‚</p><p><a href=https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#cuda-environment-variables title="è‹±ä¼Ÿè¾¾æ–‡æ¡£ cuda-environment-variables" rel="noopener external nofollow noreferrer" target=_blank class=exturl>è‹±ä¼Ÿè¾¾æ–‡æ¡£ cuda-environment-variables<i class="fa fa-external-link-alt"></i></a> è¯´æ˜äº† <code>CUDA_DEVICE_MAX_CONNECTIONS</code> é»˜è®¤ä¸º 8ï¼Œå¯ä»¥è®¾ç½®ä¸º 1 åˆ° 32 çš„æ•´æ•°å€¼ï¼Œè¡¨ç¤ºè®¡ç®—å’Œæ‹·è´é˜Ÿåˆ—çš„æ•°é‡ã€‚ï¼ˆåŒæ ·è¿˜æœ‰ <code>CUDA_DEVICE_MAX_COPY_CONNECTIONS</code> è¡¨ç¤ºå¯¹æ‹·è´é˜Ÿåˆ—çš„è®¾ç½®ï¼ˆä¼˜å…ˆçº§é«˜äº <code>CUDA_DEVICE_MAX_CONNECTION</code>ï¼‰ã€‚ï¼‰<a href=https://forums.developer.nvidia.com/t/cuda-device-max-connections-and-pci-e-traffic/262962/2 title=è®ºå›å›å¤ rel="noopener external nofollow noreferrer" target=_blank class=exturl>è®ºå›å›å¤<i class="fa fa-external-link-alt"></i></a> æŒ‡å‡ºè¿™ä¸ªç¯å¢ƒå˜é‡è¡¨ç¤ºæœ‰å¤šå°‘ä¸ªç¡¬ä»¶é˜Ÿåˆ—å’Œ CUDA æµå‘ç”Ÿæ˜ å°„å…³ç³»ã€‚ï¼ˆå¦‚æœè¿™ä¸ªå€¼ä¸å¤Ÿå¤§åˆ™æµä¹‹é—´å­˜åœ¨è™šå‡ä¾èµ–ã€‚è¿™æ ·ä¸€æ¥ï¼Œè®¾ç½®ä¸º 1 å°±èƒ½å®Œå…¨ä¿è¯ kernel æ‰§è¡Œé¡ºåºå’Œå‘èµ·é¡ºåºä¸€è‡´ã€‚è®¾ç½®ä¸º 32 åˆ™å°½å¯èƒ½è®¾æ³•è®©ä¸åŒçš„æµå¹¶å‘æ‰§è¡Œ kernelsã€‚ï¼‰</p><h1 id=megatron-lm-1f1b--ep-a2a-overlap>Megatron-LM 1F1B + EP A2A overlap
<a class=header-anchor href=#megatron-lm-1f1b--ep-a2a-overlap></a></h1><p>Megatron-LM 2025.8.1 çš„æäº¤æ”¯æŒäº† 1F1B + EP A2A overlapï¼Œä¹Ÿå¯¹ <code>CUDA_DEVICE_MAX_CONNECTIONS</code> ç¯å¢ƒå˜é‡æœ‰æè¿°ã€‚</p><p><a href=https://github.com/NVIDIA/Megatron-LM/blame/d338252b864bf3f24fea0e2f087b73f4f8de7b16/megatron/training/arguments.py#L850 title=ä»£ç  rel="noopener external nofollow noreferrer" target=_blank class=exturl>ä»£ç <i class="fa fa-external-link-alt"></i></a>ï¼š</p><p><img src=/posts/ai-infra/assets/Pasted%20image%2020250907124026.webp></p></div><footer class=post-footer><div readmore=true><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/posts/ai-infra/CUDA_DEVICE_MAX_CONNECTIONS/#more rel=contents>é˜…è¯»å…¨æ–‡ &#187;</a></div></div></div><div class=no-more-to-read><hr><center>æ²¡æœ‰å•¦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/posts/ai-infra/Megatron-LM-%E8%AE%BA%E6%96%87-PP-%E5%92%8C-VPP-%E7%94%BB%E6%B3%95%E7%96%91%E9%97%AE/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="ğŸ¤–"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="ğŸ¤–"><meta itemprop=description content="ä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯é›¶æ•£çš„ç¬”è®°ã€‚"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="Megatron-LM è®ºæ–‡ PP å’Œ VPP ç”»æ³•ç–‘é—®"><meta itemprop=description content="é—®é¢˜

è§åˆ°è¿‡ä¸¤ç§ç”»æ³•ï¼šä¸€æ˜¯ device 1 è°ƒåº¦åˆ° PP*VPP ä¸ªå¾®æ‰¹æ¬¡ä¹‹åç»§ç»­è°ƒåº¦ï¼ŒäºŒæ˜¯ device 1 è°ƒåº¦åˆ° PP*VPP å¾®æ‰¹æ¬¡ä¹‹åå°±åœä¸‹äº†ã€‚
æ¥æº 1ï¼šMegatron-LM è®ºæ–‡

è¿™ä¸ªæ˜¯ Megatron çš„è®ºæ–‡ Efficient Large-Scale Language Model Training on GPU Clusters Using Megatron-LM ç¬¬ 3 é¡µ https://arxiv.org/pdf/2104.04473 ï¼ŒåŒæ—¶æ˜¾ç¤ºäº†äº¤é”™å’Œéäº¤é”™çŠ¶æ€ä¸‹ 1F1B çš„è°ƒåº¦æ–¹å¼ã€‚"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/posts/ai-infra/Megatron-LM-%E8%AE%BA%E6%96%87-PP-%E5%92%8C-VPP-%E7%94%BB%E6%B3%95%E7%96%91%E9%97%AE/ itemprop=url class=post-title-link>Megatron-LM è®ºæ–‡ PP å’Œ VPP ç”»æ³•ç–‘é—®</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=å‘è¡¨äº>å‘è¡¨äºï¼š
</span><time title="åˆ›å»ºæ—¶é—´ï¼š2025-09-07 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2025-09-07 00:00:00 +0800 CST">2025-09-07</time></span></div></div></header><div class=post-body itemprop=articleBody><h1 id=é—®é¢˜>é—®é¢˜
<a class=header-anchor href=#%e9%97%ae%e9%a2%98></a></h1><p>è§åˆ°è¿‡ä¸¤ç§ç”»æ³•ï¼šä¸€æ˜¯ device 1 è°ƒåº¦åˆ° PP*VPP ä¸ªå¾®æ‰¹æ¬¡ä¹‹åç»§ç»­è°ƒåº¦ï¼ŒäºŒæ˜¯ device 1 è°ƒåº¦åˆ° PP*VPP å¾®æ‰¹æ¬¡ä¹‹åå°±åœä¸‹äº†ã€‚</p><h1 id=æ¥æº-1megatron-lm-è®ºæ–‡>æ¥æº 1ï¼šMegatron-LM è®ºæ–‡
<a class=header-anchor href=#%e6%9d%a5%e6%ba%90-1megatron-lm-%e8%ae%ba%e6%96%87></a></h1><p>è¿™ä¸ªæ˜¯ Megatron çš„è®ºæ–‡ Efficient Large-Scale Language Model Training on GPU Clusters Using Megatron-LM ç¬¬ 3 é¡µ <a href=https://arxiv.org/pdf/2104.04473 title=https://arxiv.org/pdf/2104.04473 rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://arxiv.org/pdf/2104.04473<i class="fa fa-external-link-alt"></i></a> ï¼ŒåŒæ—¶æ˜¾ç¤ºäº†äº¤é”™å’Œéäº¤é”™çŠ¶æ€ä¸‹ 1F1B çš„è°ƒåº¦æ–¹å¼ã€‚</p><p><img src=/posts/ai-infra/megatron-lm-pp-vpp-figures/Pasted%20image%2020250907122234.webp></p><h1 id=æ¥æº-2pangu-ultra-è®ºæ–‡>æ¥æº 2ï¼šPangu Ultra è®ºæ–‡
<a class=header-anchor href=#%e6%9d%a5%e6%ba%90-2pangu-ultra-%e8%ae%ba%e6%96%87></a></h1><p>è¿™ä¸ªæ˜¯ç›˜å¤çš„è®ºæ–‡ Pangu Ultra: Pushing the Limits of Dense Large Language Models on Ascend NPUs ç¬¬ 7 é¡µ <a href=https://arxiv.org/pdf/2504.07866 title=https://arxiv.org/pdf/2504.07866 rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://arxiv.org/pdf/2504.07866<i class="fa fa-external-link-alt"></i></a> ã€‚æ— è®ºæ˜¯äº¤é”™è¿˜æ˜¯éäº¤é”™ 1F1B å‡å’Œ Megatron è®ºæ–‡ç”»æ³•æœ‰å·®å¼‚ã€‚</p><p><img src=/posts/ai-infra/megatron-lm-pp-vpp-figures/Pasted%20image%2020250907122344.webp></p></div><footer class=post-footer><div readmore=true><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/posts/ai-infra/Megatron-LM-%E8%AE%BA%E6%96%87-PP-%E5%92%8C-VPP-%E7%94%BB%E6%B3%95%E7%96%91%E9%97%AE/#more rel=contents>é˜…è¯»å…¨æ–‡ &#187;</a></div></div></div><div class=no-more-to-read><hr><center>æ²¡æœ‰å•¦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/posts/ai-infra/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E9%80%9A%E4%BF%A1%E8%A6%81%E8%A7%A3%E5%86%B3%E5%93%AA%E4%BA%9B%E9%97%AE%E9%A2%98%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="ğŸ¤–"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="ğŸ¤–"><meta itemprop=description content="ä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯é›¶æ•£çš„ç¬”è®°ã€‚"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="å¤§æ¨¡å‹è®­ç»ƒé€šä¿¡è¦è§£å†³å“ªäº›é—®é¢˜ï¼Ÿï¼ˆä¸ªäººæ€»ç»“ï¼‰"><meta itemprop=description content="ç»“æ„å›¾









åŠ é€Ÿé€šä¿¡


å‡å°‘ç»™å®šæ“ä½œçš„é€šä¿¡é‡

ä½ç²¾åº¦è®­ç»ƒ
å…ˆé‡åŒ–å†é€šä¿¡

DeepSeek V3 dispatch æ—¶å…ˆæŠŠ BF16 é‡åŒ–åˆ° FP8ï¼Œé€šä¿¡é‡å‡å°‘ä¸€åŠã€‚ä½†å› ä¸º combine é€šä¿¡ä¸­å¸¦æœ‰è§„çº¦ï¼Œæ‰€ä»¥ä¸é€‚åˆç”¨ FP8ã€‚
MegaScale-MoE åœ¨ AllGather æ´¾å‘å™¨çš„ combine é˜¶æ®µç”¨ (a) é‡åŒ–åˆ° FP8 + (b) AlltoAll + (c) FP32 ç´¯åŠ å™¨è§„çº¦ æ¥ä»£æ›¿åŸå…ˆçš„ ReduceScatter é€šä¿¡ï¼Œé€šä¿¡é‡å‡å°‘ä¸€åŠã€loss æ­£å¸¸ã€‚ReduceScatter æ—¶æ¯ä¸ª rank åªéœ€è¦æ”¶åˆ°è‡ªå·±åˆ†åŒºçš„æ‰€æœ‰æ•°æ®å¹¶å®Œæˆè§„çº¦å³å¯ï¼ˆä¸åƒ AllGather æ¥å£éœ€è¦æ‰€æœ‰æ•°æ®ï¼‰ï¼Œç”¨ AlltoAll + æ¥æ”¶åæœ¬åœ°è§„çº¦ä¹Ÿèƒ½æ›¿ä»£ã€‚


é€šä¿¡å»é‡

DeepEP




å‡å°‘é€šä¿¡

å°½å¯èƒ½ä½¿ç”¨æ•ˆç‡æ›´é«˜çš„å¹¶è¡Œæ–¹å¼ï¼Œæ¯”å¦‚ç”¨ Ulysses SP ä»£æ›¿ TP å¯ä»¥ä»ç†è®ºä¸Šå¤§å¤§é™ä½é€šä¿¡ã€‚



ä¿æŒè®¡ç®—æµå¿™ç¢Œ


é€šä¿¡è®¡ç®—é‡å 

Megatron-LM ç°åœ¨å¯¹ DP/TP/CP/PP/EP å‡æœ‰é€šä¿¡é‡å åŠŸèƒ½

éƒ¨åˆ†é€‰é¡¹ä¾èµ– CUDA_DEVICE_MAX_CONNECTIONS
éƒ¨åˆ†é€‰é¡¹ä¾èµ–äº¤é”™ 1F1B è°ƒåº¦
Megatron CP çš„é€šä¿¡è®¡ç®—é‡å å¼ºåˆ¶æ‰“å¼€ã€æ— é€‰é¡¹å¯ä»¥å…³é—­
Megatron 1F1B + EP A2A overlap æ˜¯ 2025.8 æ‰åŠ å…¥çš„æ–°åŠŸèƒ½ï¼Œä½†åœ¨ 2025.3 å·²æœ‰äººæå‡º


DualPipe ç”¨å‰åå‘ä¸¤ä¸ªå¾®æ‰¹æ¬¡çš„å‰åå‘æ¥é‡å 


è´Ÿè½½å‡è¡¡

DP/PP è´Ÿè½½å‡è¡¡

ByteScale çš„å·¥ä½œå¾ˆæœ‰å¯å‘æ€§
Ernie 4.5 ä¹Ÿåšäº† DP ä¸Šçš„å­åºåˆ—é‡æ’


EP è´Ÿè½½å‡è¡¡

token dropã€è¾…åŠ© lossã€expert bias
ä¸“å®¶åŠ¨æ€è°ƒæ•´ï¼Œè¿™ä¸€ç±»å·¥ä½œå¾ˆå¤š
æ ·æœ¬åŠ¨æ€è°ƒæ•´ï¼Œå¦‚ NetMoE


CP è´Ÿè½½å‡è¡¡

Ulysses SP
Megatron CP æœªè€ƒè™‘å­åºåˆ—æ‰“åŒ…çš„é—®é¢˜ï¼ŒByteScale åšäº†ä¸€äº›å¤„ç†




æ¶ˆé™¤å¡é—´åŒæ­¥

ZeroBubble åæ ¡éªŒ


"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/posts/ai-infra/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E9%80%9A%E4%BF%A1%E8%A6%81%E8%A7%A3%E5%86%B3%E5%93%AA%E4%BA%9B%E9%97%AE%E9%A2%98%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/ itemprop=url class=post-title-link>å¤§æ¨¡å‹è®­ç»ƒé€šä¿¡è¦è§£å†³å“ªäº›é—®é¢˜ï¼Ÿï¼ˆä¸ªäººæ€»ç»“ï¼‰</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=å‘è¡¨äº>å‘è¡¨äºï¼š
</span><time title="åˆ›å»ºæ—¶é—´ï¼š2025-09-07 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2025-09-07 00:00:00 +0800 CST">2025-09-07</time></span></div></div></header><div class=post-body itemprop=articleBody><h1 id=ç»“æ„å›¾>ç»“æ„å›¾
<a class=header-anchor href=#%e7%bb%93%e6%9e%84%e5%9b%be></a></h1><p><img src=/posts/ai-infra/assets/Pasted%20image%2020250907125720.webp width=600></p><h1 id=åŠ é€Ÿé€šä¿¡>åŠ é€Ÿé€šä¿¡
<a class=header-anchor href=#%e5%8a%a0%e9%80%9f%e9%80%9a%e4%bf%a1></a></h1><ul><li>å‡å°‘ç»™å®šæ“ä½œçš„é€šä¿¡é‡<ul><li>ä½ç²¾åº¦è®­ç»ƒ</li><li>å…ˆé‡åŒ–å†é€šä¿¡<ul><li>DeepSeek V3 dispatch æ—¶å…ˆæŠŠ BF16 é‡åŒ–åˆ° FP8ï¼Œé€šä¿¡é‡å‡å°‘ä¸€åŠã€‚ä½†å› ä¸º combine é€šä¿¡ä¸­å¸¦æœ‰è§„çº¦ï¼Œæ‰€ä»¥ä¸é€‚åˆç”¨ FP8ã€‚</li><li>MegaScale-MoE åœ¨ AllGather æ´¾å‘å™¨çš„ combine é˜¶æ®µç”¨ <strong>(a)</strong> é‡åŒ–åˆ° FP8 + <strong>(b)</strong> AlltoAll + <strong>(c)</strong> FP32 ç´¯åŠ å™¨è§„çº¦ æ¥ä»£æ›¿åŸå…ˆçš„ ReduceScatter é€šä¿¡ï¼Œé€šä¿¡é‡å‡å°‘ä¸€åŠã€loss æ­£å¸¸ã€‚ReduceScatter æ—¶æ¯ä¸ª rank åªéœ€è¦æ”¶åˆ°è‡ªå·±åˆ†åŒºçš„æ‰€æœ‰æ•°æ®å¹¶å®Œæˆè§„çº¦å³å¯ï¼ˆä¸åƒ AllGather æ¥å£éœ€è¦æ‰€æœ‰æ•°æ®ï¼‰ï¼Œç”¨ AlltoAll + æ¥æ”¶åæœ¬åœ°è§„çº¦ä¹Ÿèƒ½æ›¿ä»£ã€‚</li></ul></li><li>é€šä¿¡å»é‡<ul><li>DeepEP</li></ul></li></ul></li><li>å‡å°‘é€šä¿¡<ul><li>å°½å¯èƒ½ä½¿ç”¨æ•ˆç‡æ›´é«˜çš„å¹¶è¡Œæ–¹å¼ï¼Œæ¯”å¦‚ç”¨ Ulysses SP ä»£æ›¿ TP å¯ä»¥ä»ç†è®ºä¸Šå¤§å¤§é™ä½é€šä¿¡ã€‚</li></ul></li></ul><h1 id=ä¿æŒè®¡ç®—æµå¿™ç¢Œ>ä¿æŒè®¡ç®—æµå¿™ç¢Œ
<a class=header-anchor href=#%e4%bf%9d%e6%8c%81%e8%ae%a1%e7%ae%97%e6%b5%81%e5%bf%99%e7%a2%8c></a></h1><ul><li>é€šä¿¡è®¡ç®—é‡å <ul><li>Megatron-LM ç°åœ¨å¯¹ DP/TP/CP/PP/EP å‡æœ‰é€šä¿¡é‡å åŠŸèƒ½<ul><li>éƒ¨åˆ†é€‰é¡¹ä¾èµ– <code>CUDA_DEVICE_MAX_CONNECTIONS</code></li><li>éƒ¨åˆ†é€‰é¡¹ä¾èµ–äº¤é”™ 1F1B è°ƒåº¦</li><li>Megatron CP çš„é€šä¿¡è®¡ç®—é‡å å¼ºåˆ¶æ‰“å¼€ã€æ— é€‰é¡¹å¯ä»¥å…³é—­</li><li>Megatron 1F1B + EP A2A overlap æ˜¯ 2025.8 æ‰åŠ å…¥çš„æ–°åŠŸèƒ½ï¼Œä½†åœ¨ 2025.3 å·²æœ‰äººæå‡º</li></ul></li><li>DualPipe ç”¨å‰åå‘ä¸¤ä¸ªå¾®æ‰¹æ¬¡çš„å‰åå‘æ¥é‡å </li></ul></li><li>è´Ÿè½½å‡è¡¡<ul><li>DP/PP è´Ÿè½½å‡è¡¡<ul><li>ByteScale çš„å·¥ä½œå¾ˆæœ‰å¯å‘æ€§</li><li>Ernie 4.5 ä¹Ÿåšäº† DP ä¸Šçš„å­åºåˆ—é‡æ’</li></ul></li><li>EP è´Ÿè½½å‡è¡¡<ul><li>token dropã€è¾…åŠ© lossã€expert bias</li><li>ä¸“å®¶åŠ¨æ€è°ƒæ•´ï¼Œè¿™ä¸€ç±»å·¥ä½œå¾ˆå¤š</li><li>æ ·æœ¬åŠ¨æ€è°ƒæ•´ï¼Œå¦‚ NetMoE</li></ul></li><li>CP è´Ÿè½½å‡è¡¡<ul><li>Ulysses SP</li><li>Megatron CP æœªè€ƒè™‘å­åºåˆ—æ‰“åŒ…çš„é—®é¢˜ï¼ŒByteScale åšäº†ä¸€äº›å¤„ç†</li></ul></li></ul></li><li>æ¶ˆé™¤å¡é—´åŒæ­¥<ul><li>ZeroBubble åæ ¡éªŒ</li></ul></li></ul></div><footer class=post-footer><div readmore=false><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/posts/ai-infra/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E9%80%9A%E4%BF%A1%E8%A6%81%E8%A7%A3%E5%86%B3%E5%93%AA%E4%BA%9B%E9%97%AE%E9%A2%98%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/#more rel=contents>é˜…è¯»å…¨æ–‡ &#187;</a></div></div></div><div class=no-more-to-read><hr><center>æ²¡æœ‰å•¦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/posts/ai-infra/DeepSeek-V3-MLA/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="ğŸ¤–"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="ğŸ¤–"><meta itemprop=description content="ä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯é›¶æ•£çš„ç¬”è®°ã€‚"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="DeepSeek V3 MLA"><meta itemprop=description content="ä¸‹å›¾æ ‡æ³¨äº† MLA çš„ä¸€ç§è®¡ç®—æ–¹å¼ï¼Œæ©™è‰²è™šçº¿éƒ¨åˆ†å¯ä»¥è¢«åŒ…è£¹åˆ°é‡è®¡ç®—ä¸­ï¼Œå…¥å£ä¸º q1ï¼Œkv1 å’Œ k_rope1ï¼ˆä¸ä¿å­˜ kv1 å’Œ k_rope1 è€Œæ˜¯ä¿å­˜ kv1_and_k_rope ä¹Ÿå¯ä»¥ï¼Œå®ƒä»¬çš„å¤§å°ä¸€æ ·ï¼Œæ²¡åŒºåˆ«ï¼‰ã€‚flash_attn æ¯”è¾ƒç‰¹æ®Šï¼Œé™¤äº†ä¿å­˜è¾“å…¥ä¹‹å¤–è¿˜ä¼šä¿å­˜è¾“å‡ºã€‚"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/posts/ai-infra/DeepSeek-V3-MLA/ itemprop=url class=post-title-link>DeepSeek V3 MLA</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=å‘è¡¨äº>å‘è¡¨äºï¼š
</span><time title="åˆ›å»ºæ—¶é—´ï¼š2025-08-21 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2025-08-21 00:00:00 +0800 CST">2025-08-21
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=æ›´æ–°äº>æ›´æ–°äºï¼š
</span><time title=ä¿®æ”¹æ—¶é—´ï¼š2025-10-04T00:00:00+08:00 itemprop=dateModified datetime=2025-10-04T00:00:00+08:00>2025-10-04</time></span></div></div></header><div class=post-body itemprop=articleBody><p>ä¸‹å›¾æ ‡æ³¨äº† MLA çš„ä¸€ç§è®¡ç®—æ–¹å¼ï¼Œæ©™è‰²è™šçº¿éƒ¨åˆ†å¯ä»¥è¢«åŒ…è£¹åˆ°é‡è®¡ç®—ä¸­ï¼Œå…¥å£ä¸º q1ï¼Œkv1 å’Œ k_rope1ï¼ˆä¸ä¿å­˜ kv1 å’Œ k_rope1 è€Œæ˜¯ä¿å­˜ kv1_and_k_rope ä¹Ÿå¯ä»¥ï¼Œå®ƒä»¬çš„å¤§å°ä¸€æ ·ï¼Œæ²¡åŒºåˆ«ï¼‰ã€‚<code>flash_attn</code> æ¯”è¾ƒç‰¹æ®Šï¼Œé™¤äº†ä¿å­˜è¾“å…¥ä¹‹å¤–è¿˜ä¼šä¿å­˜è¾“å‡ºã€‚</p><p>å¦‚æœè¦åš TPï¼Œéœ€è¦ä¿æŒ down_proj ä¸ºå®Œæ•´çŸ©é˜µï¼Œåœ¨ up_proj çŸ©é˜µåšåˆ—åˆ‡åˆ†ï¼Œåœ¨ o_proj åšè¡Œåˆ‡åˆ†ã€‚å¦‚æœè¦åš CPï¼Œéœ€è¦åœ¨ attention çš„ä½ç½®æ’å…¥ CP ç­–ç•¥ã€‚</p><p><img src=/posts/ai-infra/assets/mla-recompute.svg></p><p>MLA æ¨èé˜…è¯»ï¼š <a href=https://www.cnblogs.com/rossiXYZ/p/18827618 title=https://www.cnblogs.com/rossiXYZ/p/18827618 rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://www.cnblogs.com/rossiXYZ/p/18827618<i class="fa fa-external-link-alt"></i></a></p></div><footer class=post-footer><div readmore=false><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/posts/ai-infra/DeepSeek-V3-MLA/#more rel=contents>é˜…è¯»å…¨æ–‡ &#187;</a></div></div></div><div class=no-more-to-read><hr><center>æ²¡æœ‰å•¦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/posts/ai-infra/MoE-Parallel-FoldingETP-%E5%92%8C-DeepEP/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="ğŸ¤–"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="ğŸ¤–"><meta itemprop=description content="ä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯é›¶æ•£çš„ç¬”è®°ã€‚"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="MoE Parallel Foldingã€ETP å’Œ DeepEP"><meta itemprop=description content="DeepEP å‡è®¾äº†æœ¬åœ° node ç”¨ NVLINK è¿æ¥çš„å¡æ•°ä¸º 8ï¼Œå› æ­¤ EP å¿…é¡»åœ¨æœ€å†…å±‚ã€‚Megatron åœ¨ MoEFlexTokenDispatcher æ¥å…¥ DeepEPï¼Œä¹Ÿå¿…é¡»æ»¡è¶³è¿™ä¸ªå‡è®¾ã€‚
åœ¨ MoE Parallel Folding ä¸‹ï¼ŒMoE å±‚çš„ CP æ¶ˆå¤±ï¼Œæ’åœ¨ EP å†…å±‚çš„åªæœ‰ TPï¼ŒMegatron æ˜¯å¦‚ä½•å¤„ç† ETP > 1 çš„æƒ…å†µçš„ï¼Ÿå®ƒå°† routing map å±•å¼€äº† tp_size ä»½ï¼Œç›´æ¥ç”¨ DeepEP åˆ†å‘ï¼ˆè¿™ä¸ªæ—¶å€™ä½¿ç”¨ TP-EP ç»„è€Œä¸æ˜¯ EP ç»„ï¼Œå¤§å°ä¸º ep_size * tp_sizeï¼‰ï¼Œè¿™æ ·å°±æ»¡è¶³äº† DeepEP çš„å‡è®¾ï¼Œå®è´¨ä¸Šåˆ©ç”¨ DeepEP æŠŠ TP çš„é€šä¿¡ä¹Ÿåšäº†ã€‚"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/posts/ai-infra/MoE-Parallel-FoldingETP-%E5%92%8C-DeepEP/ itemprop=url class=post-title-link>MoE Parallel Foldingã€ETP å’Œ DeepEP</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=å‘è¡¨äº>å‘è¡¨äºï¼š
</span><time title="åˆ›å»ºæ—¶é—´ï¼š2025-08-18 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2025-08-18 00:00:00 +0800 CST">2025-08-18
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=æ›´æ–°äº>æ›´æ–°äºï¼š
</span><time title=ä¿®æ”¹æ—¶é—´ï¼š2025-09-07T00:00:00+08:00 itemprop=dateModified datetime=2025-09-07T00:00:00+08:00>2025-09-07</time></span></div></div></header><div class=post-body itemprop=articleBody><p>DeepEP å‡è®¾äº†æœ¬åœ° node ç”¨ NVLINK è¿æ¥çš„å¡æ•°ä¸º 8ï¼Œå› æ­¤ EP å¿…é¡»åœ¨æœ€å†…å±‚ã€‚Megatron åœ¨ MoEFlexTokenDispatcher æ¥å…¥ DeepEPï¼Œä¹Ÿå¿…é¡»æ»¡è¶³è¿™ä¸ªå‡è®¾ã€‚</p><p>åœ¨ <a href=https://arxiv.org/html/2504.14960v2 title="MoE Parallel Folding" rel="noopener external nofollow noreferrer" target=_blank class=exturl>MoE Parallel Folding<i class="fa fa-external-link-alt"></i></a> ä¸‹ï¼ŒMoE å±‚çš„ CP æ¶ˆå¤±ï¼Œæ’åœ¨ EP å†…å±‚çš„åªæœ‰ TPï¼ŒMegatron æ˜¯å¦‚ä½•å¤„ç† ETP > 1 çš„æƒ…å†µçš„ï¼Ÿå®ƒå°† routing map å±•å¼€äº† tp_size ä»½ï¼Œç›´æ¥ç”¨ DeepEP åˆ†å‘ï¼ˆ<strong>è¿™ä¸ªæ—¶å€™ä½¿ç”¨ TP-EP ç»„è€Œä¸æ˜¯ EP ç»„ï¼Œå¤§å°ä¸º <code>ep_size * tp_size</code></strong>ï¼‰ï¼Œè¿™æ ·å°±æ»¡è¶³äº† DeepEP çš„å‡è®¾ï¼Œå®è´¨ä¸Šåˆ©ç”¨ DeepEP æŠŠ TP çš„é€šä¿¡ä¹Ÿåšäº†ã€‚</p><blockquote><p>æˆ‘è®¤ä¸º MoE Parallel Folding çš„ä¼˜åŠ¿æ˜¯ï¼š1. å…¼å®¹ DeepEPï¼›2. æŠŠ Attention å’Œ MoE çš„ TP æ•°è§£è€¦ï¼›3. ä¸º EP è®©å‡ºäº† CP çš„èŒƒå›´ï¼Œä½¿å¾— EP é€šä¿¡ç»„æ’åˆ—æ›´å±€éƒ¨ï¼Œé€šä¿¡æ•ˆç‡æ›´é«˜ã€‚</p></blockquote><p>ä¸€èˆ¬æ¥è¯´ MoE å±‚çš„ ETP é€šä¿¡æ˜¯å…ˆåš AlltoAll å†åš AllGatherã€‚å› ä¸º AllGather ä¼šåœ¨ TP ç»„å†…å½¢æˆå†—ä½™ï¼ˆå¤§å®¶éƒ½æ‹¿åˆ°ä¸€æ¨¡ä¸€æ ·çš„è¾“å…¥ï¼‰ï¼Œæ‰€ä»¥åº”è¯¥åªåœ¨çœŸæ­£éœ€è¦ç”¨åˆ°ä¹‹å‰æ‰åš AllGatherï¼Œå°† AllGather æ”¾åœ¨ AlltoAll åå¯ä»¥å‡å°‘ AlltoAll çš„é€šä¿¡é‡ï¼ˆå›¾ç‰‡æ¥è‡ª MoE Parallel Folding è®ºæ–‡ï¼Œä¸Šæ–‡å·²ç»™å‡ºé“¾æ¥ï¼‰ï¼š</p><p><img src=/posts/ai-infra/assets/Pasted%20image%2020250818210810.webp></p></div><footer class=post-footer><div readmore=true><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/posts/ai-infra/MoE-Parallel-FoldingETP-%E5%92%8C-DeepEP/#more rel=contents>é˜…è¯»å…¨æ–‡ &#187;</a></div></div></div><div class=no-more-to-read><hr><center>æ²¡æœ‰å•¦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/posts/ai-infra/NVIDIA-%E5%8D%9A%E5%AE%A2NCCL-2.12-PXN-%E4%BC%98%E5%8C%96/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="ğŸ¤–"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="ğŸ¤–"><meta itemprop=description content="ä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯é›¶æ•£çš„ç¬”è®°ã€‚"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="NVIDIA åšå®¢ï¼šNCCL 2.12 PXN ä¼˜åŒ–"><meta itemprop=description content="æ–‡ç« æ€»ç»“

https://developer.nvidia.com/blog/doubling-all2all-performance-with-nvidia-collective-communication-library-2-12/

  
      
      
    å†…å®¹ç”± AI ç”Ÿæˆ"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/posts/ai-infra/NVIDIA-%E5%8D%9A%E5%AE%A2NCCL-2.12-PXN-%E4%BC%98%E5%8C%96/ itemprop=url class=post-title-link>NVIDIA åšå®¢ï¼šNCCL 2.12 PXN ä¼˜åŒ–</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=å‘è¡¨äº>å‘è¡¨äºï¼š
</span><time title="åˆ›å»ºæ—¶é—´ï¼š2025-08-18 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2025-08-18 00:00:00 +0800 CST">2025-08-18
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=æ›´æ–°äº>æ›´æ–°äºï¼š
</span><time title=ä¿®æ”¹æ—¶é—´ï¼š2025-09-30T00:00:00+08:00 itemprop=dateModified datetime=2025-09-30T00:00:00+08:00>2025-09-30</time></span></div></div></header><div class=post-body itemprop=articleBody><h2 id=æ–‡ç« æ€»ç»“>æ–‡ç« æ€»ç»“
<a class=header-anchor href=#%e6%96%87%e7%ab%a0%e6%80%bb%e7%bb%93></a></h2><p><a href=https://developer.nvidia.com/blog/doubling-all2all-performance-with-nvidia-collective-communication-library-2-12/ title=https://developer.nvidia.com/blog/doubling-all2all-performance-with-nvidia-collective-communication-library-2-12/ rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://developer.nvidia.com/blog/doubling-all2all-performance-with-nvidia-collective-communication-library-2-12/<i class="fa fa-external-link-alt"></i></a></p><div class="markdown-alert markdown-alert-caution"><p class=markdown-alert-title><svg class="octicon octicon-stop mr-2" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M4.47.22A.749.749.0 015 0h6c.199.0.389.079.53.22l4.25 4.25c.141.14.22.331.22.53v6a.749.749.0 01-.22.53l-4.25 4.25A.749.749.0 0111 16H5a.749.749.0 01-.53-.22L.22 11.53A.749.749.0 010 11V5c0-.199.079-.389.22-.53zm.84 1.28L1.5 5.31v5.38l3.81 3.81h5.38l3.81-3.81V5.31L10.69 1.5zM8 4a.75.75.0 01.75.75v3.5a.75.75.0 01-1.5.0v-3.5A.75.75.0 018 4zm0 8a1 1 0 110-2 1 1 0 010 2z"/></svg>å†…å®¹ç”± AI ç”Ÿæˆ</p><p>NCCL 2.12 çš„æ ¸å¿ƒæ”¹è¿›åŒ…æ‹¬ï¼š</p><ul><li><strong>PXN (PCI Ã— NVLink)ï¼š</strong> è¿™æ˜¯ä¸€é¡¹æ–°åŠŸèƒ½ï¼Œå®ƒå…è®¸ GPU ç›´æ¥é€šè¿‡ <strong>NVLink å’Œ PCI</strong> ä¸èŠ‚ç‚¹ä¸Šçš„ç½‘å¡ (NIC) è¿›è¡Œé€šä¿¡ï¼Œä»è€Œç»•è¿‡ CPUã€‚è¿™å¸¦æ¥äº†æ›´é«˜æ•ˆçš„æ•°æ®ä¼ è¾“å’Œæ›´é«˜çš„å¸¦å®½ã€‚</li><li><strong>ä¼˜åŒ–çš„æ¶ˆæ¯èšåˆï¼š</strong> PXN ä½¿å¾—èŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰ GPU èƒ½å¤Ÿå°†å®ƒä»¬çš„æ•°æ®æ±‡æ€»åˆ°ä¸€ä¸ª GPU ä¸Šï¼Œä»¥å‘é€åˆ°ç‰¹å®šç›®çš„åœ°ã€‚è¿™æ ·ï¼Œç½‘ç»œå±‚å¯ä»¥å°†å¤šä¸ªæ¶ˆæ¯ä½œä¸ºä¸€ä¸ªæ•´ä½“å‘é€ï¼Œæé«˜äº†æ¶ˆæ¯é€Ÿç‡å¹¶å‡å°‘äº†è¿æ¥å¼€é”€ã€‚</li><li><strong>è½¨é“ä¼˜åŒ–çš„ç½‘ç»œæ‹“æ‰‘ï¼š</strong> PXN åˆ©ç”¨ <strong>NVSwitch è¿æ¥</strong>å°†æ•°æ®ç§»åŠ¨åˆ°ä¸ç›®çš„åœ°ä½äºåŒä¸€ç½‘ç»œè½¨é“ä¸Šçš„ GPUï¼Œé¿å…äº†é€šè¿‡ç¬¬äºŒå±‚ä¸»å¹²äº¤æ¢æœºè¿›è¡Œçš„æ•ˆç‡è¾ƒä½çš„æµé‡ã€‚</li></ul><p>è¿™äº›è¿›æ­¥ä½¿ <strong>all2all æ€§èƒ½æå‡äº†ä¸¤å€ä»¥ä¸Š</strong>ï¼Œå¹¶ä¸ºå¤æ‚çš„ GPU æ‹“æ‰‘ä¸­çš„æ¨¡å‹å¹¶è¡Œæ€§æä¾›äº†æ›´å¤§çš„çµæ´»æ€§ã€‚</p></div><p>è™½ç„¶çœ‹ä¸Šå»æ˜¯ä¸‰é¡¹åŠŸèƒ½ï¼Œä½†æ˜¯ä»æè¿°æ¥çœ‹éƒ½æ˜¯ PXN ä½¿å¾—å®ƒä»¬å¾—ä»¥å®ç°ï¼Œæ‰€ä»¥å®é™…ä¸Šä¸»è¦æ”¹è¿›è¿˜æ˜¯ PXN çš„å¼•å…¥ã€‚</p><h2 id=pxn-å¯¹-alltoall-çš„æ”¹è¿›>PXN å¯¹ alltoall çš„æ”¹è¿›
<a class=header-anchor href=#pxn-%e5%af%b9-alltoall-%e7%9a%84%e6%94%b9%e8%bf%9b></a></h2><blockquote><p>GPU ä¸æ˜¯åœ¨å…¶æœ¬åœ°å†…å­˜ä¸­ä¸ºæœ¬åœ° NIC å‘é€æ•°æ®å‡†å¤‡ç¼“å†²åŒºï¼Œè€Œæ˜¯åœ¨ä¸­é—´ GPU ä¸Šå‡†å¤‡ç¼“å†²åŒºï¼Œé€šè¿‡ NVLink å†™å…¥ã€‚ç„¶åå®ƒé€šçŸ¥ç®¡ç†è¯¥ NIC çš„ CPU ä»£ç†æ•°æ®å·²å‡†å¤‡å¥½ï¼Œè€Œä¸æ˜¯é€šçŸ¥å…¶è‡ªå·±çš„ CPU ä»£ç†ã€‚GPU-CPU åŒæ­¥å¯èƒ½ä¼šç¨å¾®æ…¢ä¸€äº›ï¼Œå› ä¸ºå®ƒå¯èƒ½éœ€è¦è·¨è¶Š CPU æ’æ§½ï¼Œä½†æ•°æ®æœ¬èº«ä»…ä½¿ç”¨ NVLink å’Œ PCI äº¤æ¢æœºï¼Œç¡®ä¿æœ€å¤§å¸¦å®½ã€‚</p></blockquote><p>åŸæ¥çš„ alltoall ä¼ è¾“å‰æ˜¯è¦åœ¨å‘é€æ–¹å‡†å¤‡æ•°æ®ç¼“å†²åŒºçš„ï¼Œlocal rank 0 å¦‚æœæƒ³è¦å‘ç»™ peer rank 3 å°±éœ€è¦å…ˆåœ¨è‡ªå·±è¿™é‡Œå‡†å¤‡æ•°æ®ï¼Œç„¶åç»è¿‡å¤šå±‚è·¯ç”±ä¼ è¾“ç»™ peer rank 3ã€‚ç°åœ¨æ˜¯åœ¨ local rank 3 ä¸Šå‡†å¤‡æ•°æ®ç¼“å†²åŒºï¼ˆåº”è¯¥æ˜¯ RDMA ç”¨ï¼‰ï¼Œlocal rank 0 é€šè¿‡ nvlink å°†æ•°æ®ä¼ è¾“ç»™ local rank 3ï¼Œç„¶å local rank 3 å‘ç»™ peer rank 3ã€‚å› ä¸ºåä¸¤è€…å±äºåŒä¸€ä¸ª railï¼Œæ‰€ä»¥åªéœ€è¦ç»è¿‡ L å±‚æ¬¡çš„ switchï¼Œå‡å°‘äº†è·¯ç”±å»¶è¿Ÿã€‚</p></div><footer class=post-footer><div readmore=true><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/posts/ai-infra/NVIDIA-%E5%8D%9A%E5%AE%A2NCCL-2.12-PXN-%E4%BC%98%E5%8C%96/#more rel=contents>é˜…è¯»å…¨æ–‡ &#187;</a></div></div></div><div class=no-more-to-read><hr><center>æ²¡æœ‰å•¦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/posts/cli/bash/diff-%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="ğŸ¤–"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="ğŸ¤–"><meta itemprop=description content="ä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯é›¶æ•£çš„ç¬”è®°ã€‚"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="diff ä¸¤ä¸ªæ–‡ä»¶å¤¹"><meta itemprop=description content="diff -bur folderA/ folderB/
-r è¡¨ç¤ºé€’å½’ï¼Œ-b è¡¨ç¤ºå¿½ç•¥ç©ºç™½å­—ç¬¦ï¼Œ-u è¡¨ç¤ºè¾“å‡ºç»Ÿä¸€æ ·å¼ï¼ˆä¹Ÿå°±æ˜¯ git diff å¸¸è§çš„æ ·å¼ï¼Œä¼šæ¯”é»˜è®¤æ ·å¼å®¹æ˜“é˜…è¯»ï¼‰ã€‚"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/posts/cli/bash/diff-%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9/ itemprop=url class=post-title-link>diff ä¸¤ä¸ªæ–‡ä»¶å¤¹</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=å‘è¡¨äº>å‘è¡¨äºï¼š
</span><time title="åˆ›å»ºæ—¶é—´ï¼š2025-07-10 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2025-07-10 00:00:00 +0800 CST">2025-07-10
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=æ›´æ–°äº>æ›´æ–°äºï¼š
</span><time title=ä¿®æ”¹æ—¶é—´ï¼š2025-07-19T00:00:00+08:00 itemprop=dateModified datetime=2025-07-19T00:00:00+08:00>2025-07-19</time></span></div></div></header><div class=post-body itemprop=articleBody><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>diff -bur folderA/ folderB/
</span></span></code></pre></div><p><code>-r</code> è¡¨ç¤ºé€’å½’ï¼Œ<code>-b</code> è¡¨ç¤ºå¿½ç•¥ç©ºç™½å­—ç¬¦ï¼Œ<code>-u</code> è¡¨ç¤ºè¾“å‡ºç»Ÿä¸€æ ·å¼ï¼ˆä¹Ÿå°±æ˜¯ git diff å¸¸è§çš„æ ·å¼ï¼Œä¼šæ¯”é»˜è®¤æ ·å¼å®¹æ˜“é˜…è¯»ï¼‰ã€‚</p></div><footer class=post-footer><div readmore=false><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/posts/cli/bash/diff-%E4%B8%A4%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9/#more rel=contents>é˜…è¯»å…¨æ–‡ &#187;</a></div></div></div><div class=no-more-to-read><hr><center>æ²¡æœ‰å•¦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/posts/programming/python/2.-PyTorch-C++-%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="ğŸ¤–"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="ğŸ¤–"><meta itemprop=description content="ä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯é›¶æ•£çš„ç¬”è®°ã€‚"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="PyTorch C++ ä»£ç ç”Ÿæˆ"><meta itemprop=description content='ä¸€äº›é—®é¢˜

ä¸ºä»€ä¹ˆæœ‰äº›ä¼šç”Ÿæˆ at::cuda åå­—ç©ºé—´çš„å‡½æ•°ï¼Œæœ‰äº›ä¸ä¼šï¼Ÿï¼ˆå¾…è§£å†³ï¼‰
æè¦

æœ¬æ–‡è¯´æ˜äº† m.impl("index_put.out", ...) åˆ° at::native::index_put çš„è°ƒç”¨è·¯å¾„ã€‚ç»“åˆ 
  
  
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    PyTorch C++ å‡½æ•°æ´¾å‘ ä¸­ at::native::index_put_ â†’ at::_index_put_impl_ â†’ index_put_stub çš„è°ƒç”¨è·¯å¾„ï¼Œè¡¥å…¨äº†ä» m.impl åˆ° stub çš„å…¨è·¯å¾„ã€‚'></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/posts/programming/python/2.-PyTorch-C++-%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/ itemprop=url class=post-title-link>PyTorch C++ ä»£ç ç”Ÿæˆ</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=å‘è¡¨äº>å‘è¡¨äºï¼š
</span><time title="åˆ›å»ºæ—¶é—´ï¼š2025-06-30 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2025-06-30 00:00:00 +0800 CST">2025-06-30
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=æ›´æ–°äº>æ›´æ–°äºï¼š
</span><time title=ä¿®æ”¹æ—¶é—´ï¼š2025-10-02T00:00:00+08:00 itemprop=dateModified datetime=2025-10-02T00:00:00+08:00>2025-10-02</time></span></div></div></header><div class=post-body itemprop=articleBody><h1 id=ä¸€äº›é—®é¢˜>ä¸€äº›é—®é¢˜
<a class=header-anchor href=#%e4%b8%80%e4%ba%9b%e9%97%ae%e9%a2%98></a></h1><p>ä¸ºä»€ä¹ˆæœ‰äº›ä¼šç”Ÿæˆ at::cuda åå­—ç©ºé—´çš„å‡½æ•°ï¼Œæœ‰äº›ä¸ä¼šï¼Ÿï¼ˆå¾…è§£å†³ï¼‰</p><h1 id=æè¦>æè¦
<a class=header-anchor href=#%e6%8f%90%e8%a6%81></a></h1><p><strong>æœ¬æ–‡è¯´æ˜äº† <code>m.impl("index_put.out", ...)</code> åˆ° <code>at::native::index_put</code> çš„è°ƒç”¨è·¯å¾„</strong>ã€‚ç»“åˆ
<a href=/posts/programming/python/1.-PyTorch-C++-%E5%87%BD%E6%95%B0%E6%B4%BE%E5%8F%91/ title="PyTorch C++ å‡½æ•°æ´¾å‘">PyTorch C++ å‡½æ•°æ´¾å‘</a> ä¸­ <code>at::native::index_put_</code> â†’ <code>at::_index_put_impl_</code> â†’ <code>index_put_stub</code> çš„è°ƒç”¨è·¯å¾„ï¼Œè¡¥å…¨äº†ä» m.impl åˆ° stub çš„å…¨è·¯å¾„ã€‚</p><p><strong>æœ¬æ–‡è¯´æ˜äº† <code>m.impl</code> / <code>at::cuda::index_out</code> â†’ <code>index_stub</code> çš„è°ƒç”¨è·¯å¾„</strong>ã€‚å‡†ç¡®æ¥è¯´æ˜¯ä»‹ç»äº† <code>at::cuda::index_out</code> è°ƒç”¨ meta å’Œ impl çš„è¿‡ç¨‹ï¼Œmeta ä¸­å¯¹ä¸‹æ ‡åšé¢„å¤„ç†ï¼ˆåŒ…æ‹¬ kBool è½¬ kLong ä¸‹æ ‡ï¼‰ï¼Œimpl ä¸­è°ƒç”¨ <code>index_stub</code> è¿›è¡Œè®¡ç®—ã€‚å’Œ <code>index_out</code> ä¸åŒï¼Œ<code>index_put_</code> å‡½æ•°æ²¡æœ‰å‡ºç°åœ¨ <code>at::cuda</code> åå­—ç©ºé—´ä¸­ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ <code>at::cuda::_index_put_impl_</code>ã€‚</p><p>åœ¨è¿™ä¸¤ä¸ªä¾‹å­ä¸­ï¼Œèƒ½æ‰¾åˆ°çš„å‡½æ•°æœ‰ï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cpp data-lang=cpp><span style=display:flex><span>ç†è§£ native_functions.yaml ä¸­çš„å‡½æ•°å®šä¹‰åœ¨å“ªé‡Œ
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>é structured æƒ…å†µï¼š
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#719e07>-</span> func: index_put_(...)
</span></span><span style=display:flex><span>  dispatch:
</span></span><span style=display:flex><span>	  CompositeExplicitAutograd: index_put_ # é»˜è®¤åå­—ç©ºé—´æ˜¯ aten
</span></span><span style=display:flex><span>			\ at<span style=color:#719e07>::</span>index_put_ (build<span style=color:#719e07>/</span>aten<span style=color:#719e07>/</span>src<span style=color:#719e07>/</span>ATen<span style=color:#719e07>/</span>Functions.h)
</span></span><span style=display:flex><span>			 \ at<span style=color:#719e07>::</span>_ops<span style=color:#719e07>::</span>index_put_<span style=color:#719e07>::</span>call (build<span style=color:#719e07>/</span>aten<span style=color:#719e07>/</span>src<span style=color:#719e07>/</span>ATen<span style=color:#719e07>/</span>OperatorsEverything.cpp)
</span></span><span style=display:flex><span>			  \ c10<span style=color:#719e07>::</span>Dispatcher<span style=color:#719e07>::</span>singleton()
</span></span><span style=display:flex><span>			   <span style=color:#719e07>|</span>  .findSchemaOrThrow(index_put_<span style=color:#719e07>::</span>name, index_put_<span style=color:#719e07>::</span>overload_name)
</span></span><span style=display:flex><span>			   <span style=color:#719e07>|</span>  .typed<span style=color:#719e07>&lt;</span>index_put_<span style=color:#719e07>::</span>schema<span style=color:#719e07>&gt;</span>().call
</span></span><span style=display:flex><span>				 <span style=color:#719e07>|</span><span style=color:#719e07>struct</span> <span style=color:#268bd2>TORCH_API</span> index_put_ (build<span style=color:#719e07>/</span>aten<span style=color:#719e07>/</span>src<span style=color:#719e07>/</span>ATen<span style=color:#719e07>/</span>MethodOperators.h)
</span></span><span style=display:flex><span>				 <span style=color:#719e07>|</span>  ... name <span style=color:#719e07>=</span> <span style=color:#2aa198>&#34;aten::index_put_&#34;</span>;
</span></span><span style=display:flex><span>				 <span style=color:#719e07>|</span>  ... overload_name <span style=color:#719e07>=</span> <span style=color:#2aa198>&#34;&#34;</span>;
</span></span><span style=display:flex><span>				 \ m.impl(<span style=color:#2aa198>&#34;index_put_&#34;</span>, ...) (build<span style=color:#719e07>/</span>aten<span style=color:#719e07>/</span>src<span style=color:#719e07>/</span>ATen<span style=color:#719e07>/</span>RegisterCompositeExplicitAutogradEverything.cpp)
</span></span><span style=display:flex><span>				  \ at<span style=color:#719e07>::</span>native<span style=color:#719e07>::</span>index_put_ (aten<span style=color:#719e07>/</span>src<span style=color:#719e07>/</span>ATen<span style=color:#719e07>/</span>native<span style=color:#719e07>/</span>TensorAdvancedIndexing.cpp)
</span></span><span style=display:flex><span>				   \ at<span style=color:#719e07>::</span>_index_put_impl_
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ç»“è®ºæ˜¯æŒ‰ç…§ dispatch: yy: xx å­—æ®µç”Ÿæˆ at<span style=color:#719e07>::</span>xx å‡½æ•°ï¼Œæœ€ç»ˆè°ƒç”¨åˆ° at<span style=color:#719e07>::</span>native<span style=color:#719e07>::</span>xx å‡½æ•°ã€‚
</span></span><span style=display:flex><span>                                                       <span style=color:#719e07>^^^^^^^^^^^^^^</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>å¦‚æœæ˜¯ structured: Trueï¼Œå°±å¯¹åº” at<span style=color:#719e07>::</span>native<span style=color:#719e07>::</span>structured_xx<span style=color:#719e07>::</span>implï¼Œåœ¨ä»£ç ä¸­é€šå¸¸ä¸º
</span></span><span style=display:flex><span>at<span style=color:#719e07>::</span>native åå­—ç©ºé—´ä¸‹çš„ TORCH_IMPL_FUNC(xx)ã€‚
</span></span><span style=display:flex><span>                      <span style=color:#719e07>^^^^^^^^^^^^^^^^^^^</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>å¦‚æœæ˜¯ structured_delegate: zzï¼Œå¯èƒ½å¾—å»æ‰¾ zz çš„å®šä¹‰ã€‚
</span></span></code></pre></div></div><footer class=post-footer><div readmore=true><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/posts/programming/python/2.-PyTorch-C++-%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90/#more rel=contents>é˜…è¯»å…¨æ–‡ &#187;</a></div></div></div><div class=no-more-to-read><hr><center>æ²¡æœ‰å•¦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/posts/programming/python/1.-PyTorch-C++-%E5%87%BD%E6%95%B0%E6%B4%BE%E5%8F%91/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="ğŸ¤–"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="ğŸ¤–"><meta itemprop=description content="ä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯é›¶æ•£çš„ç¬”è®°ã€‚"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="PyTorch C++ å‡½æ•°æ´¾å‘"><meta itemprop=description content="Stub æ³¨å†Œæµç¨‹

æ‰€æœ‰çš„ stub å®šä¹‰å‡ ä¹éƒ½åœ¨ aten/src/ATen/native/DispatchStub.h æ–‡ä»¶ï¼Œå¯ä»¥æ…¢æ…¢çœ‹ã€‚é‡Œé¢æœ‰æ®µæ³¨é‡Šï¼š
// Implements instruction set specific function dispatch.
//
// Kernels that may make use of specialized instruction sets (e.g. AVX2) are
// compiled multiple times with different compiler flags (e.g. -mavx2). A
// DispatchStub contains a table of function pointers for a kernel. At runtime,
// the fastest available kernel is chosen based on the features reported by
// cpuinfo.
//
// Example:
//
// In native/MyKernel.h:
//   using fn_type = void(*)(const Tensor& x);
//   DECLARE_DISPATCH(fn_type, stub)
//
// In native/MyKernel.cpp
//   DEFINE_DISPATCH(stub);
//
// In native/cpu/MyKernel.cpp:
//   namespace {
//     // use anonymous namespace so that different cpu versions won't conflict
//     void kernel(const Tensor& x) { ... }
//   }
//   REGISTER_DISPATCH(stub, &amp;kernel);
//
// To call:
//   stub(kCPU, tensor);
//
// TODO: CPU instruction set selection should be folded into whatever
// the main dispatch mechanism is.
//
// Supported device types for registration:
//   - CPU: Central Processing Unit
//   - CUDA: NVIDIA GPUs
//   - HIP: AMD GPUs
//   - MPS: Apple Silicon GPUs (Metal Performance Shaders)
//   - MTIA: Meta Training and Inference Devices
//   - XPU: Intel GPUs
//   - HPU: Reserved for HPU (Intel Gaudi) device types
//   - PrivateUse1: Reserved for private/custom device types
//
// If you want to update the list of supported devices, add a new dispatch_ptr
// member in DispatchStubImpl.h and update the get_call_ptr switch.
// As well you will need to update the inlined list in 'is_device_supported`
//
//
// ignore warnings about DispatchStub::DEFAULT, AVX, AVX2 defined elsewhere
DispatchStub æ¨¡æ¿åŸºç±»å®šä¹‰

è§ aten/src/ATen/native/DispatchStub.hã€‚DispatchStub ç±»å‹ä¸ºï¼š"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/posts/programming/python/1.-PyTorch-C++-%E5%87%BD%E6%95%B0%E6%B4%BE%E5%8F%91/ itemprop=url class=post-title-link>PyTorch C++ å‡½æ•°æ´¾å‘</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=å‘è¡¨äº>å‘è¡¨äºï¼š
</span><time title="åˆ›å»ºæ—¶é—´ï¼š2025-06-30 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2025-06-30 00:00:00 +0800 CST">2025-06-30
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar-check"></i>
</span><span class=post-meta-item-text title=æ›´æ–°äº>æ›´æ–°äºï¼š
</span><time title=ä¿®æ”¹æ—¶é—´ï¼š2025-10-02T00:00:00+08:00 itemprop=dateModified datetime=2025-10-02T00:00:00+08:00>2025-10-02</time></span></div></div></header><div class=post-body itemprop=articleBody><h1 id=stub-æ³¨å†Œæµç¨‹>Stub æ³¨å†Œæµç¨‹
<a class=header-anchor href=#stub-%e6%b3%a8%e5%86%8c%e6%b5%81%e7%a8%8b></a></h1><p>æ‰€æœ‰çš„ stub å®šä¹‰å‡ ä¹éƒ½åœ¨ aten/src/ATen/native/DispatchStub.h æ–‡ä»¶ï¼Œå¯ä»¥æ…¢æ…¢çœ‹ã€‚é‡Œé¢æœ‰æ®µæ³¨é‡Šï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#586e75>// Implements instruction set specific function dispatch.
</span></span></span><span style=display:flex><span><span style=color:#586e75>//
</span></span></span><span style=display:flex><span><span style=color:#586e75>// Kernels that may make use of specialized instruction sets (e.g. AVX2) are
</span></span></span><span style=display:flex><span><span style=color:#586e75>// compiled multiple times with different compiler flags (e.g. -mavx2). A
</span></span></span><span style=display:flex><span><span style=color:#586e75>// DispatchStub contains a table of function pointers for a kernel. At runtime,
</span></span></span><span style=display:flex><span><span style=color:#586e75>// the fastest available kernel is chosen based on the features reported by
</span></span></span><span style=display:flex><span><span style=color:#586e75>// cpuinfo.
</span></span></span><span style=display:flex><span><span style=color:#586e75>//
</span></span></span><span style=display:flex><span><span style=color:#586e75>// Example:
</span></span></span><span style=display:flex><span><span style=color:#586e75>//
</span></span></span><span style=display:flex><span><span style=color:#586e75>// In native/MyKernel.h:
</span></span></span><span style=display:flex><span><span style=color:#586e75>//   using fn_type = void(*)(const Tensor&amp; x);
</span></span></span><span style=display:flex><span><span style=color:#586e75>//   DECLARE_DISPATCH(fn_type, stub)
</span></span></span><span style=display:flex><span><span style=color:#586e75>//
</span></span></span><span style=display:flex><span><span style=color:#586e75>// In native/MyKernel.cpp
</span></span></span><span style=display:flex><span><span style=color:#586e75>//   DEFINE_DISPATCH(stub);
</span></span></span><span style=display:flex><span><span style=color:#586e75>//
</span></span></span><span style=display:flex><span><span style=color:#586e75>// In native/cpu/MyKernel.cpp:
</span></span></span><span style=display:flex><span><span style=color:#586e75>//   namespace {
</span></span></span><span style=display:flex><span><span style=color:#586e75>//     // use anonymous namespace so that different cpu versions won&#39;t conflict
</span></span></span><span style=display:flex><span><span style=color:#586e75>//     void kernel(const Tensor&amp; x) { ... }
</span></span></span><span style=display:flex><span><span style=color:#586e75>//   }
</span></span></span><span style=display:flex><span><span style=color:#586e75>//   REGISTER_DISPATCH(stub, &amp;kernel);
</span></span></span><span style=display:flex><span><span style=color:#586e75>//
</span></span></span><span style=display:flex><span><span style=color:#586e75>// To call:
</span></span></span><span style=display:flex><span><span style=color:#586e75>//   stub(kCPU, tensor);
</span></span></span><span style=display:flex><span><span style=color:#586e75>//
</span></span></span><span style=display:flex><span><span style=color:#586e75>// TODO: CPU instruction set selection should be folded into whatever
</span></span></span><span style=display:flex><span><span style=color:#586e75>// the main dispatch mechanism is.
</span></span></span><span style=display:flex><span><span style=color:#586e75>//
</span></span></span><span style=display:flex><span><span style=color:#586e75>// Supported device types for registration:
</span></span></span><span style=display:flex><span><span style=color:#586e75>//   - CPU: Central Processing Unit
</span></span></span><span style=display:flex><span><span style=color:#586e75>//   - CUDA: NVIDIA GPUs
</span></span></span><span style=display:flex><span><span style=color:#586e75>//   - HIP: AMD GPUs
</span></span></span><span style=display:flex><span><span style=color:#586e75>//   - MPS: Apple Silicon GPUs (Metal Performance Shaders)
</span></span></span><span style=display:flex><span><span style=color:#586e75>//   - MTIA: Meta Training and Inference Devices
</span></span></span><span style=display:flex><span><span style=color:#586e75>//   - XPU: Intel GPUs
</span></span></span><span style=display:flex><span><span style=color:#586e75>//   - HPU: Reserved for HPU (Intel Gaudi) device types
</span></span></span><span style=display:flex><span><span style=color:#586e75>//   - PrivateUse1: Reserved for private/custom device types
</span></span></span><span style=display:flex><span><span style=color:#586e75>//
</span></span></span><span style=display:flex><span><span style=color:#586e75>// If you want to update the list of supported devices, add a new dispatch_ptr
</span></span></span><span style=display:flex><span><span style=color:#586e75>// member in DispatchStubImpl.h and update the get_call_ptr switch.
</span></span></span><span style=display:flex><span><span style=color:#586e75>// As well you will need to update the inlined list in &#39;is_device_supported`
</span></span></span><span style=display:flex><span><span style=color:#586e75>//
</span></span></span><span style=display:flex><span><span style=color:#586e75>//
</span></span></span><span style=display:flex><span><span style=color:#586e75>// ignore warnings about DispatchStub::DEFAULT, AVX, AVX2 defined elsewhere
</span></span></span></code></pre></div><h1 id=dispatchstub-æ¨¡æ¿åŸºç±»å®šä¹‰><code>DispatchStub</code> æ¨¡æ¿åŸºç±»å®šä¹‰
<a class=header-anchor href=#dispatchstub-%e6%a8%a1%e6%9d%bf%e5%9f%ba%e7%b1%bb%e5%ae%9a%e4%b9%89></a></h1><p>è§ aten/src/ATen/native/DispatchStub.hã€‚<code>DispatchStub</code> ç±»å‹ä¸ºï¼š</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#719e07>template</span> <span style=color:#719e07>&lt;</span><span style=color:#719e07>typename</span> rT, <span style=color:#719e07>typename</span> T, <span style=color:#719e07>typename</span>... Args<span style=color:#719e07>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#719e07>struct</span> <span style=color:#268bd2>DispatchStub</span><span style=color:#719e07>&lt;</span>rT (<span style=color:#719e07>*</span>)(Args...), T<span style=color:#719e07>&gt;</span>;
</span></span></code></pre></div><p>å…¶ä¸­ä¸»è¦åŒ…å«å‡ ç±»æ–¹æ³•ï¼Œä¸€æ˜¯è°ƒç”¨ï¼Œä¼šæ ¹æ®è®¾å¤‡ç±»å‹æ¥é€‰æ‹©å‡½æ•°æŒ‡é’ˆï¼Œå¼ºåˆ¶è½¬æ¢åè°ƒç”¨ï¼š</p></div><footer class=post-footer><div readmore=true><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/posts/programming/python/1.-PyTorch-C++-%E5%87%BD%E6%95%B0%E6%B4%BE%E5%8F%91/#more rel=contents>é˜…è¯»å…¨æ–‡ &#187;</a></div></div></div><div class=no-more-to-read><hr><center>æ²¡æœ‰å•¦~</center></div></div><div class=post-eof></div></footer></article></div><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://hxhue.github.io/posts/cli/%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E4%BD%BF%E7%94%A8-sing-box-%E4%BB%A3%E7%90%86/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/371907.jpg"><meta itemprop=name content="ğŸ¤–"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="ğŸ¤–"><meta itemprop=description content="ä¸ªäººåšå®¢ï¼Œä¸»è¦æ˜¯é›¶æ•£çš„ç¬”è®°ã€‚"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ sing-box ä»£ç†"><meta itemprop=description content="èƒŒæ™¯

æœåŠ¡å™¨ä¸Šé¢ä¸èƒ½ç§‘å­¦ä¸Šç½‘ã€‚ä»¥å‰éƒ½æ˜¯ç›´æ¥ 
  
  
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    ç”¨ ssh åšä»£ç†è½¬å‘ çš„ï¼Œä½†æ˜¯ç°åœ¨åœ¨æ ¡å¤–åªèƒ½ä½¿ç”¨ rvpnï¼Œè¿æ¥éå¸¸ä¸ç¨³å®šï¼Œä¹Ÿæ— æ³•å¤§æµé‡ä¼ è¾“æ–‡ä»¶ï¼Œåªèƒ½è€ƒè™‘åœ¨æœåŠ¡å™¨ä¸Šç›´æ¥ä¸Šç½‘ã€‚"></span><header class=post-header><h2 class=post-title itemprop="name headline"><a href=/posts/cli/%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E4%BD%BF%E7%94%A8-sing-box-%E4%BB%A3%E7%90%86/ itemprop=url class=post-title-link>åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ sing-box ä»£ç†</a></h2><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=å‘è¡¨äº>å‘è¡¨äºï¼š
</span><time title="åˆ›å»ºæ—¶é—´ï¼š2025-05-01 00:00:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2025-05-01 00:00:00 +0800 CST">2025-05-01</time></span></div></div></header><div class=post-body itemprop=articleBody><h1 id=èƒŒæ™¯>èƒŒæ™¯
<a class=header-anchor href=#%e8%83%8c%e6%99%af></a></h1><p>æœåŠ¡å™¨ä¸Šé¢ä¸èƒ½ç§‘å­¦ä¸Šç½‘ã€‚ä»¥å‰éƒ½æ˜¯ç›´æ¥
<a href=/posts/cli/ssh/ssh-%E4%BB%A3%E7%90%86%E8%BD%AC%E5%8F%91%E8%AE%A9%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E5%A4%96%E7%BD%91/ title="ç”¨ ssh åšä»£ç†è½¬å‘">ç”¨ ssh åšä»£ç†è½¬å‘</a> çš„ï¼Œä½†æ˜¯ç°åœ¨åœ¨æ ¡å¤–åªèƒ½ä½¿ç”¨ rvpnï¼Œè¿æ¥éå¸¸ä¸ç¨³å®šï¼Œä¹Ÿæ— æ³•å¤§æµé‡ä¼ è¾“æ–‡ä»¶ï¼Œåªèƒ½è€ƒè™‘åœ¨æœåŠ¡å™¨ä¸Šç›´æ¥ä¸Šç½‘ã€‚</p><p>å¹³æ—¶ä½¿ç”¨ Windows ä¸Šçš„ v2rayN ä¸Šç½‘ï¼Œè€ƒè™‘å°†å…¶é…ç½®è¿ç§»åˆ°æœåŠ¡å™¨ä¸Šã€‚ç”±äºæœåŠ¡å™¨æ˜¯å¤šäººå…±äº«ï¼Œæˆ‘æœ‰ä»¥ä¸‹éœ€æ±‚ï¼š</p><ol><li>ä¸ç”¨ systemd å¯åŠ¨ã€‚</li><li>é…ç½®ç§æœ‰åŒ–ï¼Œä¸”å…¶ä»–äººä¸èƒ½çœ‹åˆ°é…ç½®ã€‚</li><li>ç”¨çš„æ—¶å€™ä¸´æ—¶å¯åŠ¨ï¼Œç”¨å®Œä¹‹åå°±é€€å‡ºè¿›ç¨‹ã€‚</li></ol><h1 id=æœåŠ¡å™¨ä¸Šçš„å‡†å¤‡>æœåŠ¡å™¨ä¸Šçš„å‡†å¤‡
<a class=header-anchor href=#%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%b8%8a%e7%9a%84%e5%87%86%e5%a4%87></a></h1><ol><li>æœåŠ¡å™¨ä¸Š <a href=https://sing-box.sagernet.org/zh/installation/package-manager/ title="ä¸‹è½½å®‰è£… sing-box" rel="noopener external nofollow noreferrer" target=_blank class=exturl>ä¸‹è½½å®‰è£… sing-box<i class="fa fa-external-link-alt"></i></a>ã€‚</li><li>æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ sing-boxã€‚</li><li>åœ¨ v2rayN ä¸­ç‚¹â€œè®¾ç½® > æ‰“å¼€å­˜å‚¨æ‰€åœ¨çš„ä½ç½®â€ï¼Œæ–‡ä»¶å¤¹ä¸­çš„ <code>bin\srss</code> ä¸­åŒ…å«å¤§é‡ <code>geo*</code> æ–‡ä»¶ã€‚å°† <code>srss</code> æ–‡ä»¶å¤¹æ‹·è´åˆ°æœåŠ¡å™¨ä¸Šçš„ sing-box æ–‡ä»¶å¤¹ä¸­ã€‚</li></ol><p>è¿™ä¸€æ­¥ä¸‹è½½äº† sing-box å¹¶ä¸”å°†ä¸€äº›å…¬å¼€é…ç½®å¤åˆ¶åˆ°äº†æœåŠ¡å™¨ä¸Šã€‚</p></div><footer class=post-footer><div readmore=true><div class=readmore-overlay><div class=readmore-overlay-center><div class=post-button><a class=btn href=/posts/cli/%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E4%BD%BF%E7%94%A8-sing-box-%E4%BB%A3%E7%90%86/#more rel=contents>é˜…è¯»å…¨æ–‡ &#187;</a></div></div></div><div class=no-more-to-read><hr><center>æ²¡æœ‰å•¦~</center></div></div><div class=post-eof></div></footer></article></div><nav class=pagination><span class="page-number current">1</span>
<a class=page-number href=/posts/page/2/>2</a>
<a class=page-number href=/posts/page/3/>3</a>
<a class=page-number href=/posts/page/4/>4</a>
<a class=page-number href=/posts/page/5/>5</a>
<a class=page-number href=/posts/page/6/>6</a>
<a class=page-number href=/posts/page/7/>7</a>
<a class=page-number href=/posts/page/8/>8</a>
<a class="extend next" rel=next href=/posts/page/2/><i class="fa fa-angle-right"></i></a></nav></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2023 - 2025
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>ğŸ¤–</span></div><div class=powered-by>ç”± <a href=https://gohugo.io title=0.143.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.3 target=_blank>Hugo NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨</div></div></footer><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js defer></script><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":false,"save":"manual"},"copybtn":true,"darkmode":false,"hostname":"https://hxhue.github.io/","i18n":{"ds_day":" å¤©å‰","ds_days":" å¤© ","ds_hour":" å°æ—¶å‰","ds_hours":" å°æ—¶ ","ds_just":"åˆšåˆš","ds_min":" åˆ†é’Ÿå‰","ds_mins":" åˆ†é’Ÿ","ds_month":" ä¸ªæœˆå‰","ds_years":" å¹´ ","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","placeholder":"æœç´¢..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":false,"transition":{"collheader":"fadeInLeft","menu_item":"fadeInDown","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline"},"views":{"enable":false,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"cdnjs","router":"https://cdnjs.cloudflare.com/ajax/libs"},"version":"4.5.3"}</script><script type=text/javascript src=/js/main.min.37ba8b54f9d4d784d08028c45eea93b5d4e13eda8ee7fb0d2edd6f3fac66cfd2.js defer></script></body></html>